{"version":3,"file":"helper.js","sources":["../../../../src/_common/js/utils/helper.ts"],"sourcesContent":["export function omit(obj: object, fields: string[]): object {\n  const shallowCopy = {\n    ...obj,\n  };\n  for (let i = 0; i < fields.length; i++) {\n    const key = fields[i];\n    delete shallowCopy[key];\n  }\n  return shallowCopy;\n}\n\nexport function removeEmptyAttrs<T>(obj: T): Partial<T> {\n  const newObj = {};\n\n  Object.keys(obj).forEach((key) => {\n    if (typeof obj[key] !== 'undefined' || obj[key] === null) {\n      newObj[key] = obj[key];\n    }\n  });\n\n  return newObj;\n}\n\nexport function getTabElementByValue(tabs: [] = [], value: string): object {\n  const [result] = tabs.filter((item) => {\n    const { id } = item as any;\n    return id === value;\n  });\n  return result || null;\n}\n\nexport function firstUpperCase(str: string): string {\n  return str.toLowerCase().replace(/( |^)[a-z]/g, (char: string) => char.toUpperCase());\n}\n\nexport type Gradients = { [percent: string]: string };\nexport type FromTo = { from: string; to: string };\nexport type LinearGradient = { direction?: string } & (Gradients | FromTo);\nexport function getBackgroundColor(color: string | string[] | LinearGradient): string {\n  if (typeof color === 'string') {\n    return color;\n  }\n  if (Array.isArray(color)) {\n    if (color[0] && color[0][0] === '#') {\n      color.unshift('90deg');\n    }\n    return `linear-gradient( ${color.join(',')} )`;\n  }\n  const {\n    from, to, direction = 'to right', ...rest\n  } = color;\n  let keys = Object.keys(rest);\n  if (keys.length) {\n    keys = keys.sort((a, b) => {\n      const c = parseFloat(a.substr(0, a.length - 1)) - parseFloat(b.substr(0, b.length - 1));\n      return c;\n    });\n    const tempArr = keys.map((key: any) => `${rest[key]} ${key}`);\n    return `linear-gradient(${direction}, ${tempArr.join(',')})`;\n  }\n  return `linear-gradient(${direction}, ${from}, ${to})`;\n}\n\n/**\n *\n * @returns 获取 ie 浏览器版本\n */\nexport function getIEVersion() {\n  const { userAgent } = navigator;\n  // 判断是否IE<11浏览器\n  const isIE = userAgent.indexOf('compatible') > -1 && userAgent.indexOf('MSIE') > -1;\n  // 判断是否IE11浏览器\n  const isIE11 = userAgent.indexOf('Trident') > -1 && userAgent.indexOf('rv:11.0') > -1;\n  if (isIE) {\n    const reIE = new RegExp('MSIE (\\\\d+\\\\.\\\\d+);');\n    const match = userAgent.match(reIE);\n    if (!match) return -1;\n    const fIEVersion = parseFloat(match[1]);\n    return fIEVersion < 7 ? 6 : fIEVersion;\n  }\n  if (isIE11) {\n    // IE11\n    return 11;\n  }\n  // 不是ie浏览器\n  return Number.MAX_SAFE_INTEGER;\n}\n\n/**\n * 计算字符串字符的长度并可以截取字符串。\n * @param str 传入字符串\n * @param maxCharacter 规定最大字符串长度\n * @returns 当没有传入maxCharacter时返回字符串字符长度，当传入maxCharacter时返回截取之后的字符串和长度。\n */\nexport function getCharacterLength(str: string, maxCharacter?: number) {\n  const hasMaxCharacter = typeof maxCharacter === 'number';\n  if (!str || str.length === 0) {\n    if (hasMaxCharacter) {\n      return {\n        length: 0,\n        characters: str,\n      };\n    }\n    return 0;\n  }\n  let len = 0;\n  for (let i = 0; i < str.length; i++) {\n    let currentStringLength = 0;\n    if (str.charCodeAt(i) > 127 || str.charCodeAt(i) === 94) {\n      currentStringLength = 2;\n    } else {\n      currentStringLength = 1;\n    }\n    if (hasMaxCharacter && len + currentStringLength > maxCharacter) {\n      return {\n        length: len,\n        characters: str.slice(0, i),\n      };\n    }\n    len += currentStringLength;\n  }\n  if (hasMaxCharacter) {\n    return {\n      length: len,\n      characters: str,\n    };\n  }\n  return len;\n}\n\n/**\n * 兼容样式中支持number/string类型的传值 得出最后的结果。\n * @param param number或string类型的可用于样式上的值\n * @returns 可使用的样式值。\n */\nexport function pxCompat(param: string | number) {\n  return typeof param === 'number' ? `${param}px` : param;\n}\n\n/**\n * 计算dom元素盒模型尺寸\n * @param targetElement 需要计算盒模型尺寸的元素\n * @returns 计算出各维度尺寸。\n */\nconst DOM_STYLE_PROPS = [\n  'padding-top',\n  'padding-bottom',\n  'padding-left',\n  'padding-right',\n  'font-family',\n  'font-weight',\n  'font-size',\n  'font-variant',\n  'text-rendering',\n  'text-transform',\n  'width',\n  'text-indent',\n  'border-width',\n  'box-sizing',\n  'line-height',\n  'letter-spacing',\n];\n\nexport function calculateNodeSize(targetElement: HTMLElement) {\n  const style = window.getComputedStyle(targetElement);\n\n  const boxSizing = style.getPropertyValue('box-sizing')\n    || style.getPropertyValue('-moz-box-sizing')\n    || style.getPropertyValue('-webkit-box-sizing');\n\n  const paddingSize = (\n    parseFloat(style.getPropertyValue('padding-bottom'))\n    + parseFloat(style.getPropertyValue('padding-top'))\n  );\n\n  const borderSize = (\n    parseFloat(style.getPropertyValue('border-bottom-width'))\n    + parseFloat(style.getPropertyValue('border-top-width'))\n  );\n\n  const sizingStyle = DOM_STYLE_PROPS\n    .map((name) => `${name}:${style.getPropertyValue(name)}`)\n    .join(';');\n\n  return {\n    paddingSize, borderSize, boxSizing, sizingStyle,\n  };\n}\n"],"names":["omit","obj","fields","shallowCopy","i","length","key","removeEmptyAttrs","newObj","Object","keys","forEach","getTabElementByValue","tabs","value","filter","item","id","_slicedToArray","result","firstUpperCase","str","toLowerCase","replace","char","toUpperCase","getBackgroundColor","color","Array","isArray","unshift","join","from","to","direction","rest","sort","a","b","c","parseFloat","substr","tempArr","map","getIEVersion","navigator","userAgent","isIE","indexOf","isIE11","reIE","RegExp","match","fIEVersion","Number","MAX_SAFE_INTEGER","getCharacterLength","maxCharacter","hasMaxCharacter","characters","len","currentStringLength","charCodeAt","slice","pxCompat","param","DOM_STYLE_PROPS","calculateNodeSize","targetElement","style","window","getComputedStyle","boxSizing","getPropertyValue","paddingSize","borderSize","sizingStyle","name"],"mappings":"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"}