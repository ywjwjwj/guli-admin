{"version":3,"file":"input-items.js","sources":["../../src/time-picker/input-items.tsx"],"sourcesContent":["import Vue from 'vue';\nimport mixins from '../utils/mixins';\nimport getConfigReceiverMixins, { TimePickerConfig } from '../config-provider/config-receiver';\nimport {\n  componentName, AM_FORMAT, EMPTY_VALUE, MERIDIEM_LIST,\n} from './constant';\nimport {\n  TimeInputType, InputEvent, InputTime, KeyboardDirection, EPickerCols,\n} from './interface';\n\nimport { prefix } from '../config';\n\nconst name = `${prefix}-time-picker-input-items`; // t-time-picker-input-items\n\nexport default mixins(getConfigReceiverMixins<Vue, TimePickerConfig>('timePicker')).extend({\n  name,\n  data() {\n    return {\n      timeArr: [EPickerCols.hour, EPickerCols.minute, EPickerCols.second],\n    };\n  },\n  props: {\n    // 格式化标准\n    format: {\n      type: String,\n    },\n    // 时间\n    dayjs: {\n      type: [Object, Array, undefined],\n      default: undefined,\n    },\n    // placeholder\n    placeholder: {\n      type: String,\n    },\n    allowInput: {\n      type: Boolean,\n    },\n    isRangePicker: {\n      type: Boolean,\n      default: false,\n    },\n    disabled: {\n      type: Boolean,\n    },\n    steps: {\n      type: Array,\n    },\n  },\n\n  computed: {\n    displayTimeList(): Array<InputTime | undefined> {\n      return this.isRangePicker ? this.dayjs : [this.dayjs];\n    },\n  },\n\n  methods: {\n    // 输入事件\n    onInput(e: Event, type: TimeInputType, index: number): void {\n      if (!this.allowInput) return;\n      const { target, data } = e as InputEvent;\n      const { value } = target;\n      const {\n        $props: { format, steps },\n      } = this;\n      const curDayJs = this.displayTimeList[index];\n      let number = Number(value);\n\n      const colIdx = this.timeArr.indexOf(type as EPickerCols);\n\n      if (number % steps[colIdx]) {\n        number = 0;\n      }\n\n      if ((curDayJs[type] === '00' && number === 0) || value === '') {\n        // 输入之前是00 输入之后是0\n        // 清空\n        this.$emit('change', {\n          value: EMPTY_VALUE,\n          type,\n          index,\n        });\n      } else if (`${number}`.length > 2) {\n        // 当前输入的数值大于两位数\n        number = Number(data);\n      }\n      // 两位数判断\n      // 是否使有效输入\n      let emitChange = true;\n      // 过滤掉非法输入\n      if (!isNaN(number)) {\n        switch (type) {\n          case 'hour':\n            if (number > (/[h]{1}/.test(format) ? 12 : 24) || number < 0) {\n              emitChange = false;\n            }\n            break;\n          case 'minute':\n            if (number > 59 || number < 0) {\n              emitChange = false;\n            }\n            break;\n          case 'second':\n            if (number > 59 || number < 0) {\n              emitChange = false;\n            }\n            break;\n          default:\n            break;\n        }\n        if (emitChange) {\n          this.$emit('change', {\n            value: number,\n            type,\n            index,\n          });\n        }\n      }\n      if (curDayJs[type] !== undefined) this.setInputValue(curDayJs[type], target);\n    },\n    // 失去焦点\n    onBlur(e: FocusEvent, trigger: TimeInputType, index: number, input: number): void {\n      this.allowInput && this.$emit('blurDefault', e, trigger, index, input);\n    },\n    onFocus(e: FocusEvent, trigger: TimeInputType, index: number, input: number): void {\n      this.allowInput && this.$emit('focusDefault', e, trigger, index, input);\n    },\n    // 键盘监听\n    onKeydown(e: any, type: TimeInputType, index: number): void {\n      if (!this.allowInput) return;\n      const { which } = e;\n      const {\n        $props: { format, steps },\n      } = this;\n\n      const curDayJs = this.displayTimeList[index];\n      const colIdx = this.timeArr.indexOf(type as EPickerCols);\n\n      // 增加减少\n      if ([KeyboardDirection.up, KeyboardDirection.down].includes(which)) {\n        if (type === EPickerCols.meridiem) return;\n        // 加减\n        const current = curDayJs[type] ? Number(curDayJs[type]) : 0;\n        const operateStep = Number(steps[colIdx]);\n        const operate = which === KeyboardDirection.up ? 0 - operateStep : operateStep;\n        let result = current + operate;\n\n        if (type === 'hour') {\n          if (result > (/[h]{1}/.test(format) ? 11 : 23)) {\n            // 上限\n            result = 0;\n          } else if (result < 0) {\n            result = /[h]{1}/.test(format) ? 11 : 23;\n          }\n        } else if (result > 59 || result < 0) {\n          result = 0;\n        }\n\n        this.$emit('change', {\n          value: result,\n          type,\n          index,\n        });\n      } else if ([KeyboardDirection.left, KeyboardDirection.right].includes(which)) {\n        // 移动方向\n        const { target } = e;\n        // 查找上下一个兄弟节点\n        const { parentNode } = target;\n        const focus = which === KeyboardDirection.left ? parentNode.previousSibling : parentNode.nextSibling;\n        if (focus) {\n          const input = focus.querySelector('input');\n          if (!input.focus) return;\n          input.focus();\n        }\n      }\n    },\n    // 切换上下午\n    onToggleMeridiem(index: number): void {\n      this.$emit('toggleMeridiem', index);\n    },\n    // 设置输入框原始值，使其完全受控\n    setInputValue(v: string | number, input: HTMLInputElement): void {\n      const sV = String(v);\n      if (!input) {\n        return;\n      }\n      if (input.value !== sV) {\n        // input.value = sV;\n        Object.assign(input, { value: sV });\n        // input.setAttribute('value', sV);\n      }\n    },\n    // ==== 渲染逻辑层 START ====\n    // 渲染输入组件\n    switchRenderComponent() {\n      const {\n        $props: {\n          format, placeholder, allowInput, disabled,\n        },\n      } = this;\n\n      // 判定placeholder展示\n      function isEmptyDayjs(val: InputTime) {\n        return val === undefined || (val.hour === undefined && val.minute === undefined && val.second === undefined);\n      }\n      const isEmptyVal = this.displayTimeList.every((date) => isEmptyDayjs(date));\n      if (isEmptyVal) {\n        return <span class={`${componentName}__input-placeholder`}>{placeholder}</span>;\n      }\n      const itemClasses = disabled\n        ? [`${componentName}__input-item`, `${componentName}__input-item-disabled`]\n        : [`${componentName}__input-item`];\n      const inputClass = `${componentName}__input-item-input`;\n      const render: any = [];\n\n      this.displayTimeList.forEach((inputTime: InputTime | undefined, index: number) => {\n        if (index > 0) render.push('-');\n        const { hour, minute, second } = inputTime;\n        // 渲染组件 - 默认有小时输入\n        render.push(<span class={itemClasses}>\n            <input\n              class={inputClass}\n              value={hour}\n              disabled={!allowInput}\n              onKeydown={(e: Event) => this.onKeydown(e, 'hour', index)}\n              onInput={(e: Event) => this.onInput(e, 'hour', index)}\n              onBlur={(e: FocusEvent) => this.onBlur(e, 'hour', index, Number(hour))}\n              onFocus={(e: FocusEvent) => this.onFocus(e, 'hour', index, Number(hour))}\n            />\n          </span>);\n        // 判断分秒输入\n        if (/[hH]{1,2}:m{1,2}/.test(format)) {\n          // 需要分钟输入器\n          render.push(<span class={itemClasses}>\n              &#58;\n              <input\n                class={inputClass}\n                value={minute}\n                disabled={!allowInput}\n                onKeydown={(e: Event) => this.onKeydown(e, 'minute', index)}\n                onInput={(e: Event) => this.onInput(e, 'minute', index)}\n                onBlur={(e: FocusEvent) => this.onBlur(e, 'minute', index, Number(minute))}\n                onFocus={(e: FocusEvent) => this.onFocus(e, 'minute', index, Number(minute))}\n              />\n            </span>);\n          // 需要秒输入器\n          if (/[hH]{1,2}:m{1,2}:s{1,2}/.test(format)) {\n            render.push(<span class={itemClasses}>\n                &#58;\n                <input\n                  class={inputClass}\n                  value={second}\n                  disabled={!allowInput}\n                  onKeydown={(e: Event) => this.onKeydown(e, 'second', index)}\n                  onInput={(e: Event) => this.onInput(e, 'second', index)}\n                  onBlur={(e: FocusEvent) => this.onBlur(e, 'second', index, Number(second))}\n                  onFocus={(e: FocusEvent) => this.onFocus(e, 'second', index, Number(second))}\n                />\n              </span>);\n          }\n        }\n        // 判断上下午位置\n        if (/[h]{1}/.test(format) && (format.includes('A') || format.includes('a'))) {\n          const localeMeridiemList = [this.global.anteMeridiem, this.global.postMeridiem];\n          const text = localeMeridiemList[MERIDIEM_LIST.indexOf(inputTime.meridiem.toUpperCase())];\n          // 放在前面or后面\n          render[AM_FORMAT.test(format) ? 'unshift' : 'push'](\n            <span class={itemClasses} onClick={() => allowInput && this.onToggleMeridiem(index)}>\n              <input\n                readonly\n                class={[inputClass, `${inputClass}-meridiem`]}\n                value={text}\n                onKeydown={(e: Event) => this.onKeydown(e, 'meridiem', index)}\n                disabled={!allowInput}\n              />\n            </span>,\n          );\n        }\n      });\n      return render;\n    },\n    // ==== 渲染逻辑层 END ====\n  },\n\n  render() {\n    const classes = [`${componentName}__input`];\n    return <div class={classes}>{this.switchRenderComponent()}</div>;\n  },\n});\n"],"names":["name","prefix","mixins","getConfigReceiverMixins","extend","data","timeArr","EPickerCols","hour","minute","second","props","format","type","String","dayjs","Object","Array","placeholder","allowInput","Boolean","isRangePicker","disabled","steps","computed","displayTimeList","methods","onInput","e","index","target","value","$props","curDayJs","number","Number","colIdx","indexOf","$emit","EMPTY_VALUE","length","emitChange","isNaN","test","setInputValue","onBlur","trigger","input","onFocus","onKeydown","which","KeyboardDirection","up","down","includes","meridiem","current","operateStep","operate","result","left","right","parentNode","focus","previousSibling","nextSibling","querySelector","onToggleMeridiem","v","sV","assign","switchRenderComponent","isEmptyDayjs","val","isEmptyVal","every","date","componentName","itemClasses","inputClass","render","forEach","inputTime","push","localeMeridiemList","global","anteMeridiem","postMeridiem","text","MERIDIEM_LIST","toUpperCase","AM_FORMAT","classes"],"mappings":"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"}