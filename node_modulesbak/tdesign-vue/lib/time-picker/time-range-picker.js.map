{"version":3,"file":"time-range-picker.js","sources":["../../src/time-picker/time-range-picker.tsx"],"sourcesContent":["import dayjs from 'dayjs';\nimport customParseFormat from 'dayjs/plugin/customParseFormat';\nimport isFunction from 'lodash/isFunction';\nimport isEqual from 'lodash/isEqual';\n\nimport { TimeIcon } from 'tdesign-icons-vue';\nimport mixins from '../utils/mixins';\nimport getConfigReceiverMixins, { TimePickerConfig } from '../config-provider/config-receiver';\nimport {\n  TimePickerInstance, TimeInputEvent, InputTime, TimePickerPanelInstance, EPickerCols,\n} from './interface';\nimport TPopup, { PopupVisibleChangeContext } from '../popup';\nimport { prefix } from '../config';\nimport CLASSNAMES from '../utils/classnames';\nimport PickerPanel from './panel';\nimport TInput from '../input';\n\nimport InputItems from './input-items';\nimport props from './time-range-picker-props';\n\nimport {\n  TIME_PICKER_EMPTY, EMPTY_VALUE, componentName, AM_FORMAT, PM_Format, AM,\n} from './constant';\n\nconst name = `${prefix}-time-picker`;\n\ndayjs.extend(customParseFormat);\n\nexport default mixins(getConfigReceiverMixins<TimePickerInstance, TimePickerConfig>('timePicker')).extend({\n  name: 'TTimeRangePicker',\n\n  components: {\n    PickerPanel,\n    TimeIcon,\n    InputItems,\n    TPopup,\n    TInput,\n  },\n\n  props: { ...props },\n\n  data() {\n    // 初始化数据\n    return {\n      // 表单控制禁用态时的变量\n      formDisabled: undefined,\n      els: [],\n      focus: false,\n      isShowPanel: false,\n      // 时间对象\n      time: TIME_PICKER_EMPTY as Array<dayjs.Dayjs>,\n      // 初始值转input展示对象\n      inputTime: TIME_PICKER_EMPTY as Array<InputTime>,\n    };\n  },\n\n  computed: {\n    tDisabled(): boolean {\n      return this.formDisabled || this.disabled;\n    },\n    // 传递给选择面板的时间值\n    panelValue(): Array<dayjs.Dayjs> {\n      const time = this.time || TIME_PICKER_EMPTY;\n      return time.map((val: dayjs.Dayjs) => (val ? dayjs(val) : dayjs()));\n    },\n    textClassName(): string {\n      const isDefault = (this.inputTime as any).some(\n        (item: InputTime) => !!item.hour && !!item.minute && !!item.second,\n      );\n      return isDefault ? '' : `${name}__group-text`;\n    },\n  },\n\n  watch: {\n    value: {\n      handler(val, oldVal) {\n        if (JSON.stringify(val) === JSON.stringify(oldVal)) return;\n        const values = Array.isArray(this.value) ? this.value : [];\n        const { format } = this;\n        function getVal(value: string | undefined) {\n          return value ? dayjs(value, format) : undefined;\n        }\n        const dayjsList = [getVal(values[0]), getVal(values[1])];\n        this.time = dayjsList;\n        this.updateInputTime();\n      },\n      immediate: true,\n    },\n  },\n  methods: {\n    // 输入变化\n    inputChange(event: TimeInputEvent) {\n      const { type, value, index } = event;\n      let newTime = this.time[index];\n      if (value === EMPTY_VALUE) {\n        // 特殊标识，需要清空input\n        this.inputTime[index][type] = undefined;\n        // 需要重置该类型时间\n        newTime[type](0);\n        return;\n      }\n      if (!newTime) {\n        // 默认值不存在\n        newTime = dayjs();\n        newTime.hour(0);\n        newTime.minute(0);\n        newTime.second(0);\n      }\n      // @ts-ignore 设置时间 这里暂时只能ignore掉 没有 meridiem 的类型\n      newTime = newTime.set(type, value);\n      // 生成变动\n      this.time[index] = dayjs(newTime);\n      // 转化展示数据\n      this.updateInputTime();\n\n      this.$emit('input', { input: value, value: this.time[index].format(this.format), e: event });\n      const panelRef = this.$refs.panel as TimePickerPanelInstance;\n      panelRef.panelColUpdate();\n    },\n    getFormatValues() {\n      const values: Array<string> = [];\n      this.time.forEach((time) => {\n        if (time) {\n          values.push(time.format(this.format));\n        }\n      });\n      return values;\n    },\n    // @blur\n    onBlurDefault(e: Event) {\n      const value = this.getFormatValues();\n      this.$emit('blur', { value, e });\n    },\n    // @focus\n    onFocusDefault(e: Event) {\n      const value = this.getFormatValues();\n      this.$emit('focus', { value, e });\n    },\n    // 面板展示隐藏\n    panelVisibleChange(val: boolean, context?: PopupVisibleChangeContext) {\n      if (this.tDisabled) return;\n      if (context.trigger) {\n        const isClickDoc = context.trigger === 'document';\n        this.isShowPanel = !isClickDoc;\n        this.$emit(isClickDoc ? 'close' : 'open', context);\n      } else {\n        this.isShowPanel = val;\n        this.$emit(val ? 'open' : 'close', context);\n      }\n    },\n    // 切换上下午\n    toggleInputMeridiem(index: number) {\n      const curTime = this.time[index];\n      const current = curTime.format('a');\n      const currentHour = curTime.hour() + (current === AM ? 12 : -12);\n      // 时间变动\n      this.inputChange({ type: 'hour', value: currentHour, index });\n    },\n    // 选中时间发生变动\n    pickTime(col: EPickerCols, change: string | number, index: number, value: Record<string, any>) {\n      const { time, format } = this;\n      const panelRef = this.$refs.panel as TimePickerPanelInstance;\n      let shouldUpdatePanel = false;\n      let setTime = time[index];\n      if (EPickerCols.hour === col) {\n        setTime = value.set(\n          col,\n          value.hour() >= 12 && (AM_FORMAT.test(format) || PM_Format.test(format)) ? Number(change) + 12 : change,\n        );\n      } else if ([EPickerCols.minute, EPickerCols.second].includes(col)) {\n        setTime = value.set(col, change);\n      } else {\n        // 当前上下午\n        let currentHour = value.hour();\n        // 上下午\n        if (change === this.global.anteMeridiem) {\n          // 上午\n          currentHour -= 12;\n        } else if (change === this.global.postMeridiem) {\n          // 下午\n          currentHour += 12;\n        }\n        setTime = value.hour(currentHour);\n      }\n      this.time[index] = setTime;\n      // 处理初始化为空的逻辑\n      if (index === 0 && !this.time[1]) {\n        this.time[1] = setTime;\n        shouldUpdatePanel = true;\n      } else if (index === 1 && !this.time[0]) {\n        this.time[0] = dayjs().hour(0).minute(0).second(0);\n        shouldUpdatePanel = true;\n      }\n      this.updateInputTime();\n      shouldUpdatePanel && panelRef.panelColUpdate();\n    },\n    // 确定按钮\n    makeSure(e: MouseEvent) {\n      this.panelVisibleChange(false, { e });\n    },\n    // 设置输入框展示\n    updateInputTime() {\n      const {\n        $props: { format },\n      } = this;\n      const disPlayValues: Array<InputTime> = [];\n      (this.time || []).forEach((time: dayjs.Dayjs | undefined) => {\n        if (!time) {\n          disPlayValues.push({\n            hour: undefined,\n            minute: undefined,\n            second: undefined,\n            meridiem: AM,\n          });\n        } else {\n          let hour: number | string = time.hour();\n          let minute: number | string = time.minute();\n          let second: number | string = time.second();\n          // 判断12小时制上下午显示问题\n          if (/[h]{1}/.test(format)) {\n            hour %= 12;\n          }\n          // 判定是否补齐小于10\n          if (/[h|H]{2}/.test(format)) {\n            hour = hour < 10 ? `0${hour}` : hour;\n          }\n          if (/[m|M]{2}/.test(format)) {\n            minute = minute < 10 ? `0${minute}` : minute;\n          }\n          if (/[s|S]{2}/.test(format)) {\n            second = second < 10 ? `0${second}` : second;\n          }\n          disPlayValues.push({\n            hour,\n            minute,\n            second,\n            meridiem: time.format('a'),\n          });\n        }\n      });\n      this.inputTime = disPlayValues;\n      this.triggerUpdateValue();\n    },\n    // 清除选中\n    clear(context: { e: MouseEvent }) {\n      const { e } = context;\n      this.time = TIME_PICKER_EMPTY;\n      this.updateInputTime();\n      e.stopPropagation();\n    },\n    triggerUpdateValue() {\n      const values: Array<string> = [];\n      this.time.forEach((time) => {\n        if (time) {\n          values.push(time.format(this.format));\n        }\n      });\n      this.$emit('change', values);\n      isFunction(this.onChange) && this.onChange(values);\n    },\n    handleTInputFocus() {\n      // TODO: 待改成select-input后删除\n      // hack 在input聚焦时马上blur 避免出现输入光标\n      (this.$refs.tInput as HTMLInputElement).blur();\n    },\n    renderInput() {\n      const classes = [\n        `${name}__group`,\n        {\n          [`${prefix}-is-focused`]: this.isShowPanel,\n        },\n      ];\n      return (\n        <div class={classes}>\n          <t-input\n            disabled={this.tDisabled}\n            size={this.size}\n            onClear={this.clear}\n            clearable={this.clearable}\n            placeholder=\" \"\n            value={!isEqual(this.time, TIME_PICKER_EMPTY) ? ' ' : undefined}\n            ref=\"tInput\"\n          >\n            <time-icon slot=\"suffix-icon\"></time-icon>\n          </t-input>\n          <input-items\n            size={this.size}\n            dayjs={this.inputTime}\n            disabled={this.tDisabled}\n            format={this.format}\n            allowInput={this.allowInput}\n            placeholder={this.placeholder || this.global.placeholder}\n            isRangePicker\n            onToggleMeridiem={(index: number) => this.toggleInputMeridiem(index)}\n            onBlurDefault={this.onBlurDefault}\n            onFocusDefault={this.onFocusDefault}\n            onChange={(e: TimeInputEvent) => this.inputChange(e)}\n            steps={this.steps}\n          />\n        </div>\n      );\n    },\n  },\n  render() {\n    // 初始化数据\n    const {\n      $props: { size, className, tDisabled },\n    } = this;\n    // 样式类名\n    const classes = [name, CLASSNAMES.SIZE[size], className];\n\n    return (\n      <t-popup\n        ref=\"popup\"\n        class={classes}\n        placement=\"bottom-left\"\n        trigger=\"click\"\n        disabled={tDisabled}\n        visible={this.isShowPanel}\n        overlayClassName={`${componentName}__panel-container ${componentName}__range`}\n        on={{ 'visible-change': this.panelVisibleChange }}\n        expandAnimation={true}\n      >\n        {this.renderInput()}\n        <template slot=\"content\">\n          <picker-panel\n            ref=\"panel\"\n            format={this.format}\n            value={this.panelValue}\n            disabled={this.tDisabled}\n            isShowPanel={this.isShowPanel}\n            ontime-pick={this.pickTime}\n            onsure={this.makeSure}\n            steps={this.steps}\n            hideDisabledTime={this.hideDisabledTime}\n            disableTime={this.disableTime}\n            isFocus={this.focus}\n          />\n        </template>\n      </t-popup>\n    );\n  },\n});\n"],"names":["name","prefix","dayjs","extend","customParseFormat","mixins","getConfigReceiverMixins","components","PickerPanel","TimeIcon","InputItems","TPopup","TInput","props","data","formDisabled","els","focus","isShowPanel","time","TIME_PICKER_EMPTY","inputTime","computed","tDisabled","disabled","panelValue","map","val","textClassName","isDefault","some","item","hour","minute","second","watch","value","handler","oldVal","JSON","stringify","values","Array","isArray","format","getVal","dayjsList","updateInputTime","immediate","methods","inputChange","event","type","index","newTime","EMPTY_VALUE","set","$emit","input","e","panelRef","$refs","panel","panelColUpdate","getFormatValues","forEach","push","onBlurDefault","onFocusDefault","panelVisibleChange","context","trigger","isClickDoc","toggleInputMeridiem","curTime","current","currentHour","AM","pickTime","col","change","shouldUpdatePanel","setTime","EPickerCols","AM_FORMAT","test","PM_Format","Number","includes","global","anteMeridiem","postMeridiem","makeSure","$props","disPlayValues","meridiem","triggerUpdateValue","clear","stopPropagation","isFunction","onChange","handleTInputFocus","tInput","blur","renderInput","classes","size","clearable","isEqual","allowInput","placeholder","steps","render","className","CLASSNAMES","SIZE","_mergeJSXProps","componentName","hideDisabledTime","disableTime"],"mappings":"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"}