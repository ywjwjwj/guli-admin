{"version":3,"file":"message.js","sources":["../../src/message/message.tsx"],"sourcesContent":["import Vue from 'vue';\nimport {\n  InfoCircleFilledIcon,\n  CheckCircleFilledIcon,\n  ErrorCircleFilledIcon,\n  HelpCircleFilledIcon,\n  CloseIcon,\n} from 'tdesign-icons-vue';\nimport Loading from '../loading';\nimport { prefix } from '../config';\nimport { THEME_LIST } from './const';\nimport { renderTNodeJSX, renderContent } from '../utils/render-tnode';\nimport props from './props';\nimport { ClassName } from '../common';\nimport { fadeIn, fadeOut } from './animation';\n\nconst name = `${prefix}-message`;\n\nexport default Vue.extend({\n  name: 'TMessage',\n\n  components: {\n    InfoCircleFilledIcon,\n    CheckCircleFilledIcon,\n    ErrorCircleFilledIcon,\n    HelpCircleFilledIcon,\n    CloseIcon,\n    Loading,\n  },\n\n  props: {\n    ...props,\n    placement: String, // just for animation\n  },\n\n  data() {\n    return {\n      timer: null,\n    };\n  },\n\n  computed: {\n    classes(): ClassName {\n      const status = {};\n      THEME_LIST.forEach((t) => {\n        status[`${prefix}-is-${t}`] = this.theme === t;\n      });\n      return [\n        name,\n        status,\n        {\n          [`${prefix}-is-closable`]: this.closeBtn || this.$scopedSlots.closeBtn,\n        },\n      ];\n    },\n  },\n\n  created() {\n    this.duration && this.setTimer();\n  },\n\n  mounted() {\n    const msgDom = this.$refs.msg as HTMLElement;\n    fadeIn(msgDom, this.$props.placement);\n  },\n\n  methods: {\n    setTimer() {\n      if (!this.duration) {\n        return;\n      }\n      this.timer = Number(\n        setTimeout(() => {\n          this.clearTimer();\n          const msgDom = this.$refs.msg as HTMLElement;\n          fadeOut(msgDom, this.$props.placement, () => {\n            this.$emit('duration-end');\n          });\n          if (this.onDurationEnd) {\n            this.onDurationEnd();\n          }\n        }, this.duration),\n      );\n    },\n    clearTimer() {\n      this.duration && clearTimeout(this.timer);\n    },\n    close(e?: MouseEvent) {\n      this.$emit('close-btn-click', { e });\n      if (this.onCloseBtnClick) {\n        this.onCloseBtnClick({ e });\n      }\n    },\n    renderClose() {\n      const defaultClose = <close-icon />;\n      return (\n        <span class={`${name}__close`} onClick={this.close}>\n          {renderTNodeJSX(this, 'closeBtn', defaultClose)}\n        </span>\n      );\n    },\n    renderIcon() {\n      if (this.icon === false) return;\n      if (typeof this.icon === 'function') return this.icon(this.$createElement);\n      if (this.$scopedSlots.icon) {\n        return this.$scopedSlots.icon(null);\n      }\n      const component = {\n        info: InfoCircleFilledIcon,\n        success: CheckCircleFilledIcon,\n        warning: ErrorCircleFilledIcon,\n        error: ErrorCircleFilledIcon,\n        question: HelpCircleFilledIcon,\n        loading: Loading,\n      }[this.theme];\n      return <component></component>;\n    },\n  },\n\n  render() {\n    return (\n      <div ref=\"msg\" class={this.classes} onMouseenter={this.clearTimer} onMouseleave={this.setTimer}>\n        {this.renderIcon()}\n        {renderContent(this, 'default', 'content')}\n        {this.renderClose()}\n      </div>\n    );\n  },\n});\n"],"names":["name","prefix","Vue","extend","components","InfoCircleFilledIcon","CheckCircleFilledIcon","ErrorCircleFilledIcon","HelpCircleFilledIcon","CloseIcon","Loading","props","placement","String","data","timer","computed","classes","status","THEME_LIST","forEach","t","theme","closeBtn","$scopedSlots","created","duration","setTimer","mounted","msgDom","$refs","msg","fadeIn","$props","methods","Number","setTimeout","clearTimer","fadeOut","$emit","onDurationEnd","clearTimeout","close","e","onCloseBtnClick","renderClose","defaultClose","renderTNodeJSX","renderIcon","icon","$createElement","component","info","success","warning","error","question","loading","render","renderContent"],"mappings":"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"}