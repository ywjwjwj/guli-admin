{"version":3,"file":"withInstall.js","sources":["../../src/utils/withInstall.ts"],"sourcesContent":["import { VueConstructor, PluginObject } from 'vue';\nimport capitalize from 'lodash/capitalize';\n\nexport function withInstall<T>(comp: T, dep?: PluginObject<any>) {\n  const c = comp as any;\n\n  const name = c?.options?.name || c.name;\n\n  c.install = function (Vue: VueConstructor, config?: object) {\n    const defaults = { prefix: 't' };\n    const installConfig = { ...defaults, ...config };\n    /// 为保证组件名称简洁，前缀保持为一个单词，首字母大写\n    const defaultPrefix = capitalize(defaults.prefix);\n    // mapprops component is original component\n    let componentName = name.replace(defaultPrefix, '').replace('-mapprops', '');\n    componentName = capitalize(installConfig.prefix) + componentName;\n\n    Vue.component(componentName, comp);\n\n    if (dep && Vue?._installedPlugins.indexOf(dep) === -1) {\n      Vue.use(dep);\n    }\n  };\n\n  return comp as T & PluginObject<T>;\n}\n\nexport default withInstall;\n"],"names":["withInstall","comp","dep","c","name","options","install","Vue","config","defaults","prefix","installConfig","defaultPrefix","capitalize","componentName","replace","component","_installedPlugins","indexOf","use"],"mappings":";;;;;;;;;;;;;;;;;;;;;AACO,SAASA,WAAT,CAAqBC,IAArB,EAA2BC,GAA3B,EAAgC;AAAA,EAAA,IAAA,UAAA,CAAA;;AACrC,EAAMC,IAAAA,CAAC,GAAGF,IAAV,CAAA;AACA,EAAA,IAAMG,IAAI,GAAG,CAAAD,CAAC,KAAA,IAAD,IAAAA,CAAC,KAAA,KAAA,CAAD,GAAAA,KAAAA,CAAAA,GAAAA,CAAAA,UAAAA,GAAAA,CAAC,CAAEE,OAAH,MAAA,IAAA,IAAA,UAAA,KAAA,KAAA,CAAA,GAAA,KAAA,CAAA,GAAA,UAAA,CAAYD,IAAZ,KAAoBD,CAAC,CAACC,IAAnC,CAAA;;AACAD,EAAAA,CAAC,CAACG,OAAF,GAAY,UAASC,GAAT,EAAcC,MAAd,EAAsB;AAChC,IAAA,IAAMC,QAAQ,GAAG;AAAEC,MAAAA,MAAM,EAAE,GAAA;AAAV,KAAjB,CAAA;;AACA,IAAA,IAAMC,aAAa,GAAA,aAAA,CAAA,aAAA,CAAA,EAAA,EAAQF,QAAR,CAAA,EAAqBD,MAArB,CAAnB,CAAA;;AACA,IAAA,IAAMI,aAAa,GAAGC,8BAAU,CAACJ,QAAQ,CAACC,MAAV,CAAhC,CAAA;AACA,IAAA,IAAII,aAAa,GAAGV,IAAI,CAACW,OAAL,CAAaH,aAAb,EAA4B,EAA5B,EAAgCG,OAAhC,CAAwC,WAAxC,EAAqD,EAArD,CAApB,CAAA;AACAD,IAAAA,aAAa,GAAGD,8BAAU,CAACF,aAAa,CAACD,MAAf,CAAV,GAAmCI,aAAnD,CAAA;AACAP,IAAAA,GAAG,CAACS,SAAJ,CAAcF,aAAd,EAA6Bb,IAA7B,CAAA,CAAA;;AACA,IAAA,IAAIC,GAAG,IAAI,CAAAK,GAAG,KAAH,IAAA,IAAAA,GAAG,KAAH,KAAA,CAAA,GAAA,KAAA,CAAA,GAAAA,GAAG,CAAEU,iBAAL,CAAuBC,OAAvB,CAA+BhB,GAA/B,CAAwC,MAAA,CAAC,CAApD,EAAuD;AACrDK,MAAAA,GAAG,CAACY,GAAJ,CAAQjB,GAAR,CAAA,CAAA;AACD,KAAA;AACF,GAVD,CAAA;;AAWA,EAAA,OAAOD,IAAP,CAAA;AACD;;;;;"}