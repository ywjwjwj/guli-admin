/**
 * tdesign v0.38.1
 * (c) 2022 tdesign
 * @license MIT
 */

'use strict';

Object.defineProperty(exports, '__esModule', { value: true });

var _defineProperty = require('@babel/runtime/helpers/defineProperty');
var _typeof = require('@babel/runtime/helpers/typeof');
var Vue = require('vue');
var isObject = require('lodash/isObject');

function _interopDefaultLegacy (e) { return e && typeof e === 'object' && 'default' in e ? e : { 'default': e }; }

var _defineProperty__default = /*#__PURE__*/_interopDefaultLegacy(_defineProperty);
var _typeof__default = /*#__PURE__*/_interopDefaultLegacy(_typeof);
var Vue__default = /*#__PURE__*/_interopDefaultLegacy(Vue);
var isObject__default = /*#__PURE__*/_interopDefaultLegacy(isObject);

var RenderJsTypes = [Function, String, Number, Boolean, Object, Array];

var getValueRenderWay = function getValueRenderWay(value) {
  if (["string", "number", "boolean"].includes(_typeof__default["default"](value))) return "text"
  /* Text */
  ;

  if (_typeof__default["default"](value) === "object") {
    if (!(value instanceof Array) && value && value.context instanceof Vue__default["default"]) {
      return "vnode"
      /* VNode */
      ;
    }

    return "jsonstring"
    /* JsonString */
    ;
  }

  return "unknown"
  /* Unknown */
  ;
};

var RenderTNodeTemplate = Vue__default["default"].extend({
  name: "render-tnode-template",
  functional: true,
  props: {
    render: RenderJsTypes,
    params: null
  },
  render: function render(h, ctx) {
    var _renderMap;

    var _ctx$props = ctx.props,
        render = _ctx$props.render,
        params = _ctx$props.params;
    var renderResult = typeof render === "function" ? render(h, params) : render;
    var renderWay = getValueRenderWay(renderResult);

    var renderText = function renderText(c) {
      return ctx.__proto__._v(c);
    };

    var renderMap = (_renderMap = {}, _defineProperty__default["default"](_renderMap, "text"
    /* Text */
    , function text(c) {
      return renderText(c);
    }), _defineProperty__default["default"](_renderMap, "jsonstring"
    /* JsonString */
    , function jsonstring(c) {
      return renderText(JSON.stringify(c, null, 2));
    }), _defineProperty__default["default"](_renderMap, "vnode"
    /* VNode */
    , function vnode(c) {
      return c;
    }), _renderMap);
    return renderMap[renderWay] ? renderMap[renderWay](renderResult) : h();
  }
});
var renderTNodeJSX = function renderTNodeJSX(vm, name, options) {
  var isSilent = Boolean(isObject__default["default"](options) && "silent" in options && options.silent);

  if (vm.$scopedSlots[name] && vm[name] && vm[name] !== true && !isSilent) {
    console.warn("Both $scopedSlots.".concat(name, " and $props.").concat(name, " exist, $props.").concat(name, " is preferred"));
  }

  var params = _typeof__default["default"](options) === "object" && "params" in options ? options.params : null;
  var defaultNode = _typeof__default["default"](options) === "object" && "defaultNode" in options ? options.defaultNode : options;
  var propsNode = vm[name];
  if (propsNode === false) return;

  if (propsNode === true && defaultNode) {
    return vm.$scopedSlots[name] ? vm.$scopedSlots[name](params) : defaultNode;
  }

  if (typeof propsNode === "function") return propsNode(vm.$createElement, params);
  var isPropsEmpty = [void 0, params, ""].includes(propsNode);
  if (isPropsEmpty && vm.$scopedSlots[name]) return vm.$scopedSlots[name](params);
  return propsNode;
};
var renderTNodeJSXDefault = function renderTNodeJSXDefault(vm, name, options) {
  var defaultNode = _typeof__default["default"](options) === "object" && "defaultNode" in options ? options.defaultNode : options;
  return renderTNodeJSX(vm, name, options) || defaultNode;
};
var renderContent = function renderContent(vm, name1, name2, options) {
  var params = _typeof__default["default"](options) === "object" && "params" in options ? options.params : null;
  var defaultNode = _typeof__default["default"](options) === "object" && "defaultNode" in options && options.defaultNode;
  defaultNode = _typeof__default["default"](options) === "object" && "context" in options && options;
  var toParams = params ? {
    params: params
  } : void 0;
  var node1 = renderTNodeJSX(vm, name1, toParams);
  var node2 = renderTNodeJSX(vm, name2, toParams);
  var r = [void 0, null, ""].includes(node1) ? node2 : node1;
  return [void 0, null, ""].includes(r) ? defaultNode : r;
};

exports.RenderTNodeTemplate = RenderTNodeTemplate;
exports.renderContent = renderContent;
exports.renderTNodeJSX = renderTNodeJSX;
exports.renderTNodeJSXDefault = renderTNodeJSXDefault;
//# sourceMappingURL=render-tnode.js.map
