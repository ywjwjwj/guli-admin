{"version":3,"file":"list.js","sources":["../../src/list/list.tsx"],"sourcesContent":["import Vue, { VNode } from 'vue';\nimport { ScopedSlotReturnValue } from 'vue/types/vnode';\nimport Loading from '../loading';\nimport { prefix } from '../config';\nimport props from './props';\nimport { renderTNodeJSX } from '../utils/render-tnode';\nimport CLASSNAMES from '../utils/classnames';\nimport { LOAD_MORE, LOADING } from './const';\nimport { ClassName } from '../common';\n\nconst name = `${prefix}-list`;\n\nexport default Vue.extend({\n  name: 'TList',\n  props: {\n    ...props,\n  },\n  computed: {\n    listClass(): ClassName {\n      return [\n        `${name}`,\n        CLASSNAMES.SIZE[this.size],\n        {\n          [`${name}--split`]: this.split,\n          [`${name}--stripe`]: this.stripe,\n          [`${name}--vertical-action`]: this.layout === 'vertical',\n        },\n      ];\n    },\n    loadingClass(): ClassName {\n      if (this.asyncLoading === 'loading') return CLASSNAMES.STATUS.loading;\n      if (this.asyncLoading === 'load-more') return CLASSNAMES.STATUS.loadMore;\n      return '';\n    },\n  },\n  components: {\n    Loading,\n  },\n  methods: {\n    renderLoading() {\n      if (this.asyncLoading && typeof this.asyncLoading === 'string') {\n        const text = {\n          [LOADING]: '正在加载中，请稍后',\n          [LOAD_MORE]: '点击加载更多',\n        }[this.asyncLoading];\n        const loading = this.asyncLoading === LOADING;\n        return <Loading class={this.loadingClass} loading={loading} text={text} />;\n      }\n      return renderTNodeJSX(this, 'asyncLoading');\n    },\n    handleScroll(e: WheelEvent | Event) {\n      const listElement = this.$el as HTMLElement;\n      const { scrollTop, scrollHeight, clientHeight } = listElement;\n      this.$emit('scroll', {\n        $event: e,\n        scrollTop,\n        scrollBottom: scrollHeight - clientHeight - scrollTop,\n      });\n      if (this.onScroll) {\n        this.onScroll({\n          e,\n          scrollTop,\n          scrollBottom: scrollHeight - clientHeight - scrollTop,\n        });\n      }\n    },\n    handleLoadMore(e: MouseEvent) {\n      if (typeof this.asyncLoading === 'string' && this.asyncLoading !== LOAD_MORE) return;\n      this.$emit('load-more', { e });\n      if (this.onLoadMore) {\n        this.onLoadMore({\n          e,\n        });\n      }\n    },\n    renderContent() {\n      const propsHeaderContent = renderTNodeJSX(this, 'header');\n      const propsFooterContent = renderTNodeJSX(this, 'footer');\n\n      return [\n        propsHeaderContent && <div class={`${name}__header`}>{propsHeaderContent}</div>,\n        <ul class={`${name}__inner`}>{renderTNodeJSX(this, 'default')}</ul>,\n        propsFooterContent && <div class={`${name}__footer`}>{propsFooterContent}</div>,\n      ];\n    },\n  },\n  render(): VNode {\n    let listContent: ScopedSlotReturnValue = this.renderContent();\n\n    listContent = [\n      listContent,\n      <div class={`${name}__load`} onClick={this.handleLoadMore}>\n        {this.renderLoading()}\n      </div>,\n    ];\n\n    return (\n      <div class={this.listClass} onScroll={this.handleScroll}>\n        {listContent}\n      </div>\n    );\n  },\n});\n"],"names":["name","prefix","Vue","extend","props","computed","listClass","CLASSNAMES","SIZE","size","_defineProperty","split","stripe","layout","loadingClass","asyncLoading","STATUS","loading","loadMore","components","Loading","methods","renderLoading","text","LOADING","LOAD_MORE","renderTNodeJSX","handleScroll","e","listElement","$el","scrollTop","scrollHeight","clientHeight","$emit","$event","scrollBottom","onScroll","handleLoadMore","onLoadMore","renderContent","propsHeaderContent","propsFooterContent","render","listContent"],"mappings":"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"}