{"version":3,"file":"popconfirm.js","sources":["../../src/popconfirm/popconfirm.tsx"],"sourcesContent":["import Vue from 'vue';\nimport { InfoCircleFilledIcon, ErrorCircleFilledIcon } from 'tdesign-icons-vue';\nimport mixins from '../utils/mixins';\nimport getConfigReceiverMixins, { PopconfirmConfig } from '../config-provider/config-receiver';\nimport { prefix } from '../config';\nimport Popup, { PopupProps } from '../popup/index';\nimport props from './props';\nimport { renderTNodeJSX, renderContent, renderTNodeJSXDefault } from '../utils/render-tnode';\nimport { PopconfirmVisibleChangeContext, TdPopconfirmProps } from './type';\nimport { emitEvent } from '../utils/event';\nimport ActionMixin from '../dialog/actions';\n\nconst name = `${prefix}-popconfirm`;\nconst popupName = `${prefix}-popup`;\n\ntype IconConstructor = typeof InfoCircleFilledIcon;\n\nexport default mixins(ActionMixin, getConfigReceiverMixins<Vue, PopconfirmConfig>('popconfirm')).extend({\n  name: 'TPopconfirm',\n  props: { ...props },\n  model: {\n    prop: 'visible',\n    event: 'visible-change',\n  },\n  data() {\n    return {\n      name,\n      popupName,\n    };\n  },\n  computed: {\n    themeIcon(): IconConstructor {\n      const iconMap = {\n        default: InfoCircleFilledIcon,\n        warning: ErrorCircleFilledIcon,\n        danger: ErrorCircleFilledIcon,\n      };\n      return iconMap[this.theme];\n    },\n    iconCls(): string {\n      const theme = this.theme || 'default';\n      return `${name}__icon--${theme}`;\n    },\n    innerPopupProps(): PopupProps {\n      return {\n        showArrow: this.showArrow,\n        overlayClassName: [name, `${name}__popup--${this.theme || 'default'}`],\n        trigger: 'click',\n        destroyOnClose: this.destroyOnClose,\n        placement: this.placement,\n        ...this.popupProps,\n      };\n    },\n  },\n  methods: {\n    // used in ActionMixin, do not Delete\n    cancelBtnAction(e: MouseEvent) {\n      emitEvent<Parameters<TdPopconfirmProps['onCancel']>>(this, 'cancel', { e });\n      const cancelContext: PopconfirmVisibleChangeContext = { e, trigger: 'cancel' };\n      emitEvent<Parameters<TdPopconfirmProps['onVisibleChange']>>(this, 'visible-change', false, cancelContext);\n    },\n    // used in ActionMixin, do not Delete\n    confirmBtnAction(e: MouseEvent) {\n      emitEvent<Parameters<TdPopconfirmProps['onConfirm']>>(this, 'confirm', { e });\n      const confirmContext: PopconfirmVisibleChangeContext = { e, trigger: 'confirm' };\n      emitEvent<Parameters<TdPopconfirmProps['onVisibleChange']>>(this, 'visible-change', false, confirmContext);\n    },\n    renderIcon() {\n      const Icon = this.themeIcon;\n      return renderTNodeJSXDefault(this, 'icon', <Icon class={this.iconCls} />);\n    },\n    onPopupVisibleChange(val: boolean, context: PopconfirmVisibleChangeContext) {\n      this.$emit('visible-change', val, context);\n      this.onVisibleChange && this.onVisibleChange(val, context);\n    },\n  },\n  render() {\n    const triggerElement = renderContent(this, 'default', 'triggerElement');\n    // this.getCancelBtn is a function of ActionMixin\n    const cancelBtn = this.getCancelBtn({\n      cancelBtn: this.cancelBtn,\n      globalCancel: this.global.cancel,\n      className: `${name}__cancel`,\n    });\n    // this.getConfirmBtn is a function of ActionMixin\n    const confirmBtn = this.getConfirmBtn({\n      theme: this.theme,\n      confirmBtn: this.confirmBtn,\n      globalConfirm: this.global.confirm,\n      globalConfirmBtnTheme: this.global.confirmBtnTheme,\n      className: `${name}__confirm`,\n    });\n    return (\n      <Popup\n        ref=\"popup\"\n        visible={this.visible}\n        props={this.innerPopupProps}\n        on={{ 'visible-change': this.onPopupVisibleChange }}\n      >\n        <template slot=\"content\" role=\"poppconfirm\">\n          <div class={`${name}__content`}>\n            <div class={`${name}__body`}>\n              {this.renderIcon()}\n              <div class={`${name}__inner`}>{renderTNodeJSX(this, 'content')}</div>\n            </div>\n            {Boolean(cancelBtn || confirmBtn) && (\n              <div class={`${name}__buttons`}>\n                {cancelBtn}\n                {confirmBtn}\n              </div>\n            )}\n          </div>\n        </template>\n        {triggerElement}\n      </Popup>\n    );\n  },\n});\n"],"names":["name","prefix","popupName","mixins","ActionMixin","getConfigReceiverMixins","extend","props","model","prop","event","data","computed","themeIcon","iconMap","InfoCircleFilledIcon","warning","ErrorCircleFilledIcon","danger","theme","iconCls","innerPopupProps","showArrow","overlayClassName","trigger","destroyOnClose","placement","popupProps","methods","cancelBtnAction","e","emitEvent","cancelContext","confirmBtnAction","confirmContext","renderIcon","Icon","renderTNodeJSXDefault","onPopupVisibleChange","val","context","$emit","onVisibleChange","render","triggerElement","renderContent","cancelBtn","getCancelBtn","globalCancel","global","cancel","className","confirmBtn","getConfirmBtn","globalConfirm","confirm","globalConfirmBtnTheme","confirmBtnTheme","Popup","_mergeJSXProps","visible","renderTNodeJSX","Boolean"],"mappings":"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"}