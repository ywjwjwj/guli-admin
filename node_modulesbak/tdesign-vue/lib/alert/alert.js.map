{"version":3,"file":"alert.js","sources":["../../src/alert/alert.tsx"],"sourcesContent":["import Vue, { VNode } from 'vue';\nimport { ScopedSlotReturnValue } from 'vue/types/vnode';\nimport {\n  InfoCircleFilledIcon, CheckCircleFilledIcon, ErrorCircleFilledIcon, CloseIcon,\n} from 'tdesign-icons-vue';\n\nimport { prefix } from '../config';\nimport { on, off, addClass } from '../utils/dom';\nimport props from './props';\nimport { renderTNodeJSX } from '../utils/render-tnode';\n\nconst name = `${prefix}-alert`;\n\nexport default Vue.extend({\n  name: 'TAlert',\n  data() {\n    return {\n      // 是否可见，关闭后置为false\n      visible: true,\n      // 是否已收起，使用折叠功能时有效，用于表示是否已折叠；默认折叠\n      collapsed: true,\n    };\n  },\n  props: { ...props },\n  render(): VNode {\n    const compClass = [\n      name,\n      `${name}--${this.theme}`,\n      {\n        [`${prefix}-is-hidden`]: !this.visible,\n      },\n    ];\n    return (\n      <div class={compClass}>\n        {this.renderIcon()}\n        {this.renderContent()}\n        {this.renderClose()}\n      </div>\n    );\n  },\n  mounted() {\n    on(this.$el, 'transitionend', this.handleCloseEnd);\n  },\n  beforeDestroy() {\n    off(this.$el, 'transitionend', this.handleCloseEnd);\n  },\n  methods: {\n    renderIcon(): VNode {\n      let iconContent;\n      if (typeof this.icon === 'function') {\n        iconContent = this.icon(this.$createElement);\n      } else if (this.$scopedSlots.icon) {\n        iconContent = this.$scopedSlots.icon && this.$scopedSlots.icon(null)[0];\n      } else {\n        const component = {\n          info: InfoCircleFilledIcon,\n          success: CheckCircleFilledIcon,\n          warning: ErrorCircleFilledIcon,\n          error: ErrorCircleFilledIcon,\n        }[this.theme];\n        iconContent = <component></component>;\n      }\n      return iconContent ? <div class={`${name}__icon`}>{iconContent}</div> : null;\n    },\n\n    renderClose(): VNode {\n      let closeContent: ScopedSlotReturnValue = null;\n      if (this.close === true || this.close === '') {\n        closeContent = <CloseIcon />;\n      } else if (typeof this.close === 'string') {\n        closeContent = this.close;\n      } else if (typeof this.close === 'function') {\n        closeContent = this.close(this.$createElement);\n      } else {\n        closeContent = this.$scopedSlots.close && this.$scopedSlots.close(null)[0];\n      }\n\n      return closeContent ? (\n        <div class={`${name}__close`} onClick={this.handleClose}>\n          {closeContent}\n        </div>\n      ) : null;\n    },\n\n    renderContent(): VNode {\n      return (\n        <div class={`${name}__content`}>\n          {this.renderTitle()}\n          {this.renderMessage()}\n        </div>\n      );\n    },\n\n    renderTitle(): VNode {\n      const titleContent: ScopedSlotReturnValue = renderTNodeJSX(this, 'title');\n      return titleContent ? <div class={`${name}__title`}> {titleContent}</div> : null;\n    },\n\n    renderMessage(): VNode {\n      const operationContent: ScopedSlotReturnValue = renderTNodeJSX(this, 'operation');\n      return (\n        <div class={`${name}__message`}>\n          {this.renderDescription()}\n          {operationContent ? <div class={`${name}__operation`}>{operationContent}</div> : null}\n        </div>\n      );\n    },\n\n    renderDescription(): VNode {\n      let messageContent: ScopedSlotReturnValue;\n\n      messageContent = renderTNodeJSX(this, 'default');\n      if (!messageContent) {\n        messageContent = renderTNodeJSX(this, 'message');\n      }\n\n      const contentLength = Object.prototype.toString.call(messageContent) === '[object Array]'\n        ? (messageContent as Array<ScopedSlotReturnValue>).length\n        : 1;\n      const hasCollapse = this.maxLine > 0 && this.maxLine < contentLength;\n      if (hasCollapse && this.collapsed) {\n        messageContent = (messageContent as Array<ScopedSlotReturnValue>).slice(0, this.maxLine);\n      }\n\n      // 如果需要折叠，则元素之间补<br/>；否则不补\n      return (\n        <div class={`${name}__description`}>\n          {hasCollapse\n            ? (messageContent as Array<string | VNode>).map((content) => <div>{content}</div>)\n            : messageContent}\n          {hasCollapse ? (\n            <div\n              class={`${name}__collapse`}\n              onClick={() => {\n                this.collapsed = !this.collapsed;\n              }}\n            >\n              {this.collapsed ? '展开全部' : '收起'}\n            </div>\n          ) : null}\n        </div>\n      );\n    },\n\n    handleClose(e: MouseEvent) {\n      this.$emit('close', { e });\n      if (this.onClose) {\n        this.onClose({ e });\n      }\n      addClass(this.$el, `${name}--closing`);\n    },\n\n    handleCloseEnd(e: TransitionEvent) {\n      if (e.propertyName === 'opacity') {\n        this.visible = false;\n        this.$emit('closed', { e });\n        if (this.onClosed) {\n          this.onClosed({ e });\n        }\n      }\n    },\n  },\n});\n"],"names":["name","prefix","Vue","extend","data","visible","collapsed","props","render","compClass","theme","renderIcon","renderContent","renderClose","mounted","on","$el","handleCloseEnd","beforeDestroy","off","methods","iconContent","icon","$createElement","$scopedSlots","component","info","InfoCircleFilledIcon","success","CheckCircleFilledIcon","warning","ErrorCircleFilledIcon","error","closeContent","close","CloseIcon","handleClose","renderTitle","renderMessage","titleContent","renderTNodeJSX","operationContent","renderDescription","messageContent","contentLength","Object","prototype","toString","call","length","hasCollapse","maxLine","slice","map","content","e","$emit","onClose","addClass","propertyName","onClosed"],"mappings":"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"}