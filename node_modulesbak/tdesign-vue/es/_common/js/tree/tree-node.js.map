{"version":3,"file":"tree-node.js","sources":["../../../../src/_common/js/tree/tree-node.ts"],"sourcesContent":["import uniqueId from 'lodash/uniqueId';\nimport get from 'lodash/get';\nimport { TreeStore } from './tree-store';\nimport {\n  TreeNodeValue,\n  TreeNodeState,\n  TypeIdMap,\n  TypeTreeItem,\n  TypeSettingOptions,\n  TypeTreeNodeModel,\n  TypeTreeNodeData,\n} from './types';\nimport {\n  createNodeModel,\n  updateNodeModel,\n} from './tree-node-model';\n\nconst { hasOwnProperty } = Object.prototype;\n\nconst defaultStatus = {\n  expandMutex: false,\n  activable: false,\n  checkable: false,\n  disabled: false,\n  draggable: false,\n  loading: false,\n};\n\n// vm 开头为视图属性，不可以外部设置\n// 用于触发视图更新\nexport class TreeNode {\n  // 节点隶属的树实例\n  public tree: TreeStore;\n\n  // 节点 id ，唯一标志\n  public value: string;\n\n  // 节点文本\n  public label: string;\n\n  // 节点数据\n  public data: TypeTreeNodeData;\n\n  // 父节点\n  public parent: TreeNode;\n\n  // 子节点列表\n  public children: TreeNode[] | boolean;\n\n  // 暴露的 treeNodeModel，这个对象的属性和 api 提供给用户使用\n  public model: TypeTreeNodeModel;\n\n  // 是否为叶节点\n  public vmIsLeaf: boolean;\n\n  // 是否为子节点中的第一个\n  public vmIsFirst: boolean;\n\n  // 是否为子节点中的最后\n  public vmIsLast: boolean;\n\n  // 节点是否是经过过滤剩下的\n  public vmIsRest: boolean;\n\n  // 节点是否展示为锁定状态\n  public vmIsLocked: boolean;\n\n  // 节点在视图上实际的展开状态\n  public expanded: boolean;\n\n  // 展开时是否收起同级节点，对子节点生效\n  public expandMutex: boolean;\n\n  // 节点在视图上实际的激活状态\n  public actived: boolean;\n\n  // 是否可激活\n  public activable: boolean;\n\n  // 是否可选中\n  public checkable: boolean;\n\n  // 是否可选中的视图呈现\n  public vmCheckable: boolean;\n\n  // 节点在视图上实际的选中态\n  public checked: boolean;\n\n  // 节点实际是否为半选状态\n  public indeterminate: boolean;\n\n  // 节点是否已禁用\n  public disabled: boolean;\n\n  // 节点是否可拖动\n  public draggable: boolean;\n\n  // 节点是否可视\n  public visible: boolean;\n\n  // 节点在树中的层级\n  public level: number;\n\n  // 节点是否正在加载数据\n  public loading: boolean;\n\n  public constructor(\n    tree: TreeStore,\n    data?: TypeTreeNodeData,\n    parent?: TreeNode,\n  ) {\n    this.data = data;\n    this.tree = tree;\n\n    const config = tree.config || {};\n    const prefix = config.prefix || 't';\n    const keys = get(tree, 'config.keys') || {};\n    const propChildren = keys.children || 'children';\n    const propLabel = keys.label || 'label';\n    const propValue = keys.value || 'value';\n\n    this.model = null;\n    this.children = null;\n    this.vmCheckable = false;\n    this.vmIsLeaf = false;\n    this.vmIsFirst = false;\n    this.vmIsLast = false;\n    this.vmIsRest = true;\n    this.vmIsLocked = false;\n\n    const spec = {\n      ...defaultStatus,\n      actived: false,\n      expanded: false,\n      checked: false,\n      ...data,\n    };\n    const children = spec[propChildren];\n\n    this.set(spec);\n    this.label = spec[propLabel] || '';\n    this.value = spec[propValue] || uniqueId(prefix);\n    this.tree.nodeMap.set(this.value, this);\n\n    if (parent && parent instanceof TreeNode) {\n      this.parent = parent;\n    } else {\n      this.parent = null;\n    }\n\n    // 子节点为 true 的状态逻辑需要放到状态计算之前\n    // 初始化加载逻辑需要依据这个来进行\n    if (children === true) {\n      this.children = children;\n    }\n\n    // 初始化状态计算\n    this.level = 0;\n    this.visible = true;\n\n    this.actived = spec.actived;\n    this.initActived();\n\n    this.expanded = spec.expanded;\n    this.initExpanded();\n\n    this.checked = spec.checked;\n    this.initChecked();\n\n    this.update();\n    tree.reflow(this);\n\n    // 这里的子节点加载逻辑不能放到状态计算之前\n    // 因为子节点状态计算依赖父节点状态\n    if (Array.isArray(children)) {\n      this.append(children);\n    } else if (children === true && !config.lazy) {\n      this.loadChildren();\n    }\n\n    // checked 状态依赖于子节点状态\n    // 因此初始化状态放到子节点插入之后\n    this.checked = false;\n    this.indeterminate = false;\n    this.updateChecked();\n  }\n\n  /* ------ 状态初始化 ------ */\n\n  // 初始化选中态\n  public initChecked() {\n    const { tree, value, parent } = this;\n    const { checkStrictly } = tree.config;\n    let { checked } = this;\n    checked = parent?.isChecked();\n    if (checked && !checkStrictly) {\n      tree.checkedMap.set(value, true);\n    }\n    this.checked = checked;\n  }\n\n  // 初始化节点展开状态\n  public initExpanded(): void {\n    const { tree } = this;\n    let { expanded } = this;\n    const { config } = tree;\n    if (\n      typeof config.expandLevel === 'number'\n      && this.getLevel() < config.expandLevel\n    ) {\n      tree.expandedMap.set(this.value, true);\n      expanded = true;\n    }\n    if (config.expandAll) {\n      expanded = true;\n    }\n    if (this.children === true && config.lazy) {\n      expanded = false;\n    }\n    if (expanded) {\n      tree.expandedMap.set(this.value, true);\n    } else {\n      tree.expandedMap.delete(this.value);\n    }\n    this.expanded = expanded;\n  }\n\n  // 初始化高亮状态\n  public initActived(): void {\n    const { tree, actived } = this;\n    if (actived) {\n      tree.activedMap.set(this.value, true);\n    }\n  }\n\n  /* ------ 节点操作 ------ */\n\n  // 追加数据\n  public append(data: TypeTreeNodeData | TypeTreeNodeData[]): void {\n    const list = [];\n    if (!Array.isArray(data)) {\n      list.push(data);\n    } else {\n      list.push(...data);\n    }\n    if (list.length <= 0) {\n      return;\n    }\n    if (!Array.isArray(this.children)) {\n      this.children = [];\n    }\n    const { children, tree } = this;\n    list.forEach((item) => {\n      let node = null;\n      if (item instanceof TreeNode) {\n        node = item;\n        node.appendTo(this.tree, this);\n      } else {\n        node = new TreeNode(this.tree, item, this);\n        children.push(node);\n      }\n    });\n    tree.reflow(this);\n    this.updateRelated();\n  }\n\n  // 将当前节点追加到某个父节点的子节点列表中\n  public appendTo(\n    tree: TreeStore,\n    parent?: TreeNode,\n    index?: number,\n  ): void {\n    const parentNode = parent;\n    if (!parentNode) return;\n\n    const targetParents = parentNode.getParents();\n    const includeCurrent = targetParents.some((node) => node.value === this.value);\n    if (includeCurrent) {\n      // 不能将父节点插入到子节点\n      return;\n    }\n\n    if (Array.isArray(parentNode.children)) {\n      let targetIndex = 0;\n      if (typeof index === 'number') {\n        targetIndex = index;\n      }\n      const targetPosNode = parentNode.children[targetIndex];\n      if (targetPosNode.value === this.value) {\n        // 无需将节点插入到原位置\n        return;\n      }\n    }\n\n    this.remove();\n    this.parent = parentNode;\n\n    let siblings = null;\n    if (parentNode instanceof TreeNode) {\n      if (!Array.isArray(parentNode.children)) {\n        parentNode.children = [];\n      }\n      siblings = parent.children;\n    } else {\n      siblings = tree.children;\n    }\n    if (Array.isArray(siblings)) {\n      if (typeof index === 'number') {\n        siblings.splice(index, 0, this);\n      } else {\n        siblings.push(this);\n      }\n    }\n\n    // 插入节点应当继承展开状态\n    // 但建议不要继承选中状态和高亮状态\n    const nodes = this.walk();\n    nodes.forEach((item) => {\n      const node = item;\n      node.tree = tree;\n      tree.nodeMap.set(node.value, node);\n      if (node.expanded) {\n        tree.expandedMap.set(node.value, true);\n      }\n    });\n\n    const updateNodes = parentNode.walk();\n    updateNodes.forEach((node) => {\n      node.update();\n      node.updateChecked();\n    });\n\n    tree.reflow();\n  }\n\n  // 插入一个同级节点数据\n  public insert(\n    item: TypeTreeItem,\n    index?: number,\n  ): void {\n    const { tree, parent } = this;\n    const siblings = this.getSiblings();\n    let node = null;\n    if (item instanceof TreeNode) {\n      node = item;\n      node.appendTo(tree, parent, index);\n    } else if (item) {\n      node = new TreeNode(tree, item, parent);\n      if (typeof index === 'number') {\n        siblings.splice(index, 0, node);\n      }\n      siblings.forEach((sibling) => {\n        sibling.update();\n      });\n    }\n    tree.reflow();\n  }\n\n  // 在当前节点之前插入节点\n  public insertBefore(newData: TypeTreeItem): void {\n    const index = this.getIndex();\n    this.insert(newData, index);\n  }\n\n  // 在当前节点之后插入节点\n  public insertAfter(newData: TypeTreeItem): void {\n    const index = this.getIndex();\n    this.insert(newData, index + 1);\n  }\n\n  // 从一个树移除本节点\n  public remove(): void {\n    const { tree } = this;\n\n    const nodes = this.walk();\n    const siblings = this.getSiblings();\n    const index = this.getIndex();\n    // 从父节点的子节点列表中移除自己\n    // 但不要将自己的父节点移除，避免渲染与判断失败\n    if (Array.isArray(siblings)) {\n      siblings.splice(index, 1);\n    }\n    // 清理与树的关系，但不清理自身状态\n    nodes.forEach((node) => {\n      node.clean();\n    });\n    // 同级节点的连线状态会受到影响\n    siblings.forEach((node) => {\n      node.update();\n    });\n    // 父节点选中态会受到影响\n    this.updateParents();\n    tree.reflow();\n  }\n\n  // 清除本节点与一个树的关系\n  public clean(): void {\n    const { tree, value } = this;\n    tree.activedMap.delete(value);\n    tree.checkedMap.delete(value);\n    tree.expandedMap.delete(value);\n    tree.nodeMap.delete(value);\n  }\n\n  // 异步加载子节点数据\n  public async loadChildren(): Promise<void> {\n    const config = get(this, 'tree.config') || {};\n    if (this.children === true && !this.loading) {\n      if (typeof config.load === 'function') {\n        this.loading = true;\n        this.update();\n        let list = [];\n        list = await config.load(this);\n        this.tree.emit('load', {\n          node: this,\n          data: list,\n        });\n        this.loading = false;\n        if (Array.isArray(list) && list.length > 0) {\n          this.append(list);\n        } else {\n          this.children = false;\n        }\n        this.update();\n      }\n    }\n  }\n\n  // 设置状态\n  public set(item: TreeNodeState): void {\n    const { tree } = this;\n    const keys = Object.keys(item);\n    keys.forEach((key) => {\n      if (hasOwnProperty.call(defaultStatus, key) || key === 'label') {\n        this[key] = item[key];\n      }\n    });\n    tree.updated(this);\n  }\n\n  /* ------ 节点获取 ------- */\n\n  // 获取单个父节点\n  public getParent(): TreeNode {\n    return this.parent;\n  }\n\n  // 获取所有父节点\n  public getParents(): TreeNode[] {\n    const parents = [];\n    let node = this.parent;\n    while (node) {\n      parents.push(node);\n      node = node.parent;\n    }\n    return parents;\n  }\n\n  // 获取兄弟节点，包含自己在内\n  public getSiblings(): TreeNode[] {\n    const { parent, tree } = this;\n    let list: TreeNode[] = [];\n    if (parent) {\n      if (Array.isArray(parent.children)) {\n        list = parent.children;\n      }\n    } else if (tree) {\n      list = tree.children;\n    }\n    return list;\n  }\n\n  // 获取根节点\n  public getRoot(): TreeNode {\n    const parents = this.getParents();\n    return parents[parents.length - 1] || null;\n  }\n\n  // 获取节点在父节点的子节点列表中的位置\n  // 如果没有父节点，则获取节点在根节点列表的位置\n  public getIndex(): number {\n    const list = this.getSiblings();\n    return list.indexOf(this);\n  }\n\n  // 返回路径节点\n  public getPath(): TreeNode[] {\n    const nodes = this.getParents();\n    nodes.unshift(this);\n    return nodes.reverse();\n  }\n\n  // 获取节点所在层级\n  public getLevel(): number {\n    const parents = this.getParents();\n    return parents.length;\n  }\n\n  /* ------ 节点状态判断 ------ */\n\n  // 判断节点是否被过滤\n  public isRest(): boolean {\n    const {\n      config,\n      filterMap,\n    } = this.tree;\n\n    let rest = true;\n    if (typeof config.filter === 'function') {\n      const nodeModel = this.getModel();\n      rest = config.filter(nodeModel);\n    }\n\n    if (rest) {\n      filterMap.set(this.value, true);\n    } else if (filterMap.get(this.value)) {\n      filterMap.delete(this.value);\n    }\n\n    return rest;\n  }\n\n  // 判断节点是否可视\n  public isVisible(): boolean {\n    const {\n      nodeMap,\n    } = this.tree;\n\n    let visible = true;\n\n    // 锁定状态，直接呈现\n    if (this.vmIsLocked) {\n      return true;\n    }\n\n    // 在当前树上，未被移除\n    if (nodeMap.get(this.value)) {\n      // 节点未被过滤\n      const filterVisible = this.isRest();\n\n      // 所有父节点展开\n      let expandVisible = true;\n      const parents = this.getParents();\n      if (parents.length > 0) {\n        expandVisible = parents.every((node: TreeNode) => node.isExpanded());\n      }\n\n      // 节点为未被过滤节点的父节点\n      visible = expandVisible && filterVisible;\n    } else {\n      visible = false;\n    }\n    return visible;\n  }\n\n  // 判断节点是否被禁用\n  public isDisabled() {\n    if (this.vmIsLocked) return true;\n    const treeDisabled = get(this, 'tree.config.disabled');\n    return !!(treeDisabled || this.disabled);\n  }\n\n  // 判断节点是否支持互斥展开\n  public isExpandMutex() {\n    return !!(get(this, 'tree.config.expandMutex') || this.expandMutex);\n  }\n\n  // 节点可高亮\n  public isActivable() {\n    return !!(get(this, 'tree.config.activable') || this.activable);\n  }\n\n  // 是否可选\n  public isCheckable() {\n    return !!(get(this, 'tree.config.checkable') || this.checkable);\n  }\n\n  // 检查节点是否被激活\n  public isActived(map?: Map<string, boolean>): boolean {\n    const { tree, value } = this;\n    const activedMap = map || tree.activedMap;\n    return !!(tree.nodeMap.get(value) && activedMap.get(value));\n  }\n\n  // 检查节点是否已展开\n  public isExpanded(map?: Map<string, boolean>): boolean {\n    const { tree, value, vmIsLocked } = this;\n    if (vmIsLocked) return true;\n    const expandedMap = map || tree.expandedMap;\n    return !!(tree.nodeMap.get(value) && expandedMap.get(value));\n  }\n\n  // 计算属性，判断节点是否被选中\n  // map: 预期选中项map，用于计算节点在预期环境中的选中态\n  public isChecked(map?: TypeIdMap): boolean {\n    const { children, tree } = this;\n    const { checkStrictly } = tree.config;\n    let checked = false;\n    const checkedMap = map || tree.checkedMap;\n    if (tree.nodeMap.get(this.value)) {\n      if (checkedMap.get(this.value)) {\n        // 如果在 checked 节点列表中，则直接为 true\n        checked = true;\n      } else if (\n        Array.isArray(children)\n        && children.length > 0\n        && !checkStrictly\n      ) {\n        // 如果是父节点，需检查所有子节点状态\n        checked = children.every((node) => {\n          const childIsChecked = node.isChecked(checkedMap);\n          return childIsChecked;\n        });\n      } else if (!checkStrictly) {\n        // 从父节点状态推断子节点状态\n        // 这里再调用 isChecked 会导致死循环\n        const parents = this.getParents();\n        checked = parents.some((node) => checkedMap.get(node.value));\n      }\n    }\n    return !!checked;\n  }\n\n  // 是否为半选状态\n  public isIndeterminate(): boolean {\n    const { children, tree } = this;\n    const { checkStrictly } = tree.config;\n    if (checkStrictly) {\n      return false;\n    }\n    let indeterminate = false;\n    if (Array.isArray(children)) {\n      // 叶节点不存在半选状态\n      let childChecked: null | boolean = null;\n      indeterminate = children.some((node: TreeNode) => {\n        if (node.isIndeterminate()) {\n          // 子节点有任意一个半选，则其为半选状态\n          return true;\n        }\n        if (childChecked === null) {\n          childChecked = node.isChecked();\n        }\n        if (childChecked !== node.isChecked()) {\n          // 子节点选中状态不一致，则其为半选状态\n          return true;\n        }\n        return false;\n      });\n    }\n    return indeterminate;\n  }\n\n  public isFirst(): boolean {\n    const siblings = this.getSiblings();\n    return siblings[0] === this;\n  }\n\n  public isLast(): boolean {\n    const siblings = this.getSiblings();\n    return siblings[siblings.length - 1] === this;\n  }\n\n  // 是叶节点\n  public isLeaf(): boolean {\n    let isLeaf = false;\n    if (Array.isArray(this.children)) {\n      isLeaf = this.children.length <= 0;\n    } else {\n      isLeaf = !this.children;\n    }\n    return isLeaf;\n  }\n\n  /* ------ 节点状态切换 ------ */\n\n  // 锁定节点\n  // 搜索过滤节点时，路径节点需要固定呈现，视其为锁定态\n  public lock(lockState: boolean): void {\n    this.vmIsLocked = lockState;\n    this.expanded = this.isExpanded();\n    this.visible = this.isVisible();\n  }\n\n  // 节点展开关闭后需要调用的状态检查函数\n  public afterExpanded(): void {\n    this.update();\n    // 节点展开时检查延迟加载的数据\n    if (this.expanded && this.children === true) {\n      this.loadChildren();\n    }\n  }\n\n  // 展开或者关闭节点\n  public toggleExpanded(): TreeNodeValue[] {\n    return this.setExpanded(!this.isExpanded());\n  }\n\n  // 设置节点展开状态\n  public setExpanded(expanded: boolean, opts?: TypeSettingOptions): TreeNodeValue[] {\n    const { tree } = this;\n    const options = {\n      directly: false,\n      ...opts,\n    };\n\n    let map = tree.expandedMap;\n    if (!options.directly) {\n      map = new Map(tree.expandedMap);\n    }\n\n    // 手风琴效果，先折叠同级节点\n    if (expanded) {\n      const shouldExpandNodes = [];\n      shouldExpandNodes.push(this);\n      if (get(tree, 'config.expandParent')) {\n        this.getParents().forEach((node) => {\n          shouldExpandNodes.push(node);\n        });\n      }\n      shouldExpandNodes.forEach((node) => {\n        let isExpandMutex = false;\n        if (node.parent) {\n          isExpandMutex = node.parent.isExpandMutex();\n        } else {\n          isExpandMutex = tree?.config?.expandMutex;\n        }\n        if (isExpandMutex) {\n          const siblings = node.getSiblings();\n          siblings.forEach((snode) => {\n            map.delete(snode.value);\n          });\n        }\n        map.set(node.value, true);\n      });\n    } else {\n      map.delete(this.value);\n    }\n\n    if (options.directly) {\n      this.afterExpanded();\n      this.update();\n      this.updateChildren();\n    }\n\n    return tree.getExpanded(map);\n  }\n\n  // 切换节点激活态\n  public toggleActived(): TreeNodeValue[] {\n    return this.setActived(!this.isActived());\n  }\n\n  // 设置节点激活态\n  public setActived(actived: boolean, opts?: TypeSettingOptions): TreeNodeValue[] {\n    const { tree } = this;\n    const options = {\n      directly: false,\n      ...opts,\n    };\n    const config = tree.config || {};\n    let map = tree.activedMap;\n    if (!options.directly) {\n      map = new Map(tree.activedMap);\n    }\n    if (this.isActivable()) {\n      if (actived) {\n        if (!config.activeMultiple) {\n          map.clear();\n        }\n        map.set(this.value, true);\n      } else {\n        map.delete(this.value);\n      }\n    }\n    if (options.directly) {\n      this.update();\n    }\n    return tree.getActived(map);\n  }\n\n  // 切换选中态\n  public toggleChecked(): TreeNodeValue[] {\n    return this.setChecked(!this.isChecked());\n  }\n\n  // 更新单个节点的选中态\n  // 返回树选中列表\n  public setChecked(checked: boolean, opts?: TypeSettingOptions): TreeNodeValue[] {\n    const { tree } = this;\n    const config = tree.config || {};\n    const options = {\n      directly: false,\n      ...opts,\n    };\n    let map = tree.checkedMap;\n    if (!options.directly) {\n      map = new Map(tree.checkedMap);\n    }\n    if (this.isCheckable() && checked !== this.isChecked()) {\n      if (config.checkStrictly) {\n        if (checked) {\n          map.set(this.value, true);\n        } else {\n          map.delete(this.value);\n        }\n      } else {\n        const children = this.walk();\n        // 子节点的预期选中态与当前节点同步\n        children.forEach((node) => {\n          if (checked) {\n            map.set(node.value, true);\n          } else {\n            map.delete(node.value);\n          }\n        });\n        // 消除全部父节点的预期选中态\n        // 父节点的预期选中态将通过计算得出\n        const parents = this.getParents();\n        parents.forEach((node) => {\n          map.delete(node.value);\n        });\n      }\n    }\n    if (options.directly) {\n      if (config.checkStrictly) {\n        this.updateChecked();\n      } else {\n        const relatedNodes = tree.getRelatedNodes([this.value]);\n        relatedNodes.forEach((node) => {\n          node.updateChecked();\n        });\n      }\n    }\n    return tree.getChecked(map);\n  }\n\n  /* ------ 节点状态更新 ------ */\n\n  // 更新节点状态\n  public update(): void {\n    this.level = this.getLevel();\n    this.actived = this.isActived();\n    this.expanded = this.isExpanded();\n    this.vmCheckable = this.isCheckable();\n    this.visible = this.isVisible();\n    this.vmIsRest = this.isRest();\n    this.vmIsFirst = this.isFirst();\n    this.vmIsLast = this.isLast();\n    this.vmIsLeaf = this.isLeaf();\n    this.tree.updated(this);\n  }\n\n  // 更新选中态属性值\n  public updateChecked(): void {\n    const { tree } = this;\n    this.vmCheckable = this.isCheckable();\n    if (this.vmCheckable && !this.disabled) {\n      this.checked = this.isChecked();\n      if (this.checked) {\n        tree.checkedMap.set(this.value, true);\n      }\n      this.indeterminate = this.isIndeterminate();\n      tree.updated(this);\n    }\n  }\n\n  // 更新所有子节点状态\n  // 注意:不包含自己\n  public updateChildren(): void {\n    const { children } = this;\n    if (Array.isArray(children)) {\n      children.forEach((node) => {\n        node.update();\n        node.updateChecked();\n        node.updateChildren();\n      });\n    }\n  }\n\n  // 父节点状态更新\n  // 注意:不包含自己\n  public updateParents(): void {\n    const { parent } = this;\n    if (parent) {\n      parent.update();\n      parent.updateChecked();\n      parent.updateParents();\n    }\n  }\n\n  // 更新上下游相关节点\n  public updateRelated() {\n    const { tree } = this;\n    const relatedNodes = tree.getRelatedNodes([this.value]);\n    relatedNodes.forEach((node) => {\n      node.update();\n      node.updateChecked();\n    });\n    tree.reflow();\n  }\n\n  /* ------ 节点遍历 ------ */\n\n  // 获取包含自己在内所有的子节点\n  public walk(): TreeNode[] {\n    const { children } = this;\n    let list: TreeNode[] = [];\n    list.push(this);\n    if (Array.isArray(children) && children.length > 0) {\n      children.forEach((node) => {\n        list = list.concat(node.walk());\n      });\n    }\n    return list;\n  }\n\n  // TreeNode 对象 => TypeTreeNodeModel 对象\n  // 用于 treeNode 对外暴露的 api\n  // 经过封装的对象，减少了对外暴露的 api，利于代码重构\n  public getModel(): TypeTreeNodeModel {\n    let { model } = this;\n    if (!model) {\n      model = createNodeModel(this);\n      this.model = model;\n    }\n    updateNodeModel(model, this);\n    return model;\n  }\n}\n\nexport default TreeNode;\n"],"names":["hasOwnProperty","Object","prototype","defaultStatus","expandMutex","activable","checkable","disabled","draggable","loading","TreeNode","tree","data","parent","config","prefix","keys","get","propChildren","children","propLabel","label","propValue","value","model","vmCheckable","vmIsLeaf","vmIsFirst","vmIsLast","vmIsRest","vmIsLocked","spec","actived","expanded","checked","set","uniqueId","nodeMap","level","visible","initActived","initExpanded","initChecked","update","reflow","Array","isArray","append","lazy","loadChildren","indeterminate","updateChecked","checkStrictly","isChecked","checkedMap","expandLevel","getLevel","expandedMap","expandAll","activedMap","list","push","length","forEach","item","node","appendTo","updateRelated","index","parentNode","targetParents","getParents","includeCurrent","some","targetIndex","targetPosNode","remove","siblings","splice","nodes","walk","updateNodes","getSiblings","sibling","newData","getIndex","insert","clean","updateParents","load","emit","key","call","updated","parents","indexOf","unshift","reverse","filterMap","rest","filter","nodeModel","getModel","filterVisible","isRest","expandVisible","every","isExpanded","treeDisabled","map","childIsChecked","childChecked","isIndeterminate","isLeaf","lockState","isVisible","setExpanded","opts","options","directly","Map","shouldExpandNodes","isExpandMutex","snode","afterExpanded","updateChildren","getExpanded","setActived","isActived","isActivable","activeMultiple","clear","getActived","setChecked","isCheckable","relatedNodes","getRelatedNodes","getChecked","isFirst","isLast","concat","createNodeModel","updateNodeModel"],"mappings":";;;;;;;;;;;;;;;;;;;;;AAMA,IAAQA,cAAR,GAA2BC,MAAM,CAACC,SAAlC,CAAQF,cAAR,CAAA;AACA,IAAMG,aAAa,GAAG;AACpBC,EAAAA,WAAW,EAAE,KADO;AAEpBC,EAAAA,SAAS,EAAE,KAFS;AAGpBC,EAAAA,SAAS,EAAE,KAHS;AAIpBC,EAAAA,QAAQ,EAAE,KAJU;AAKpBC,EAAAA,SAAS,EAAE,KALS;AAMpBC,EAAAA,OAAO,EAAE,KAAA;AANW,CAAtB,CAAA;AAQA,IAAaC,QAAb,gBAAA,YAAA;AA0BE,EAAA,SAAA,QAAA,CAAYC,IAAZ,EAAkBC,IAAlB,EAAwBC,MAAxB,EAAgC;AAAA,IAAA,eAAA,CAAA,IAAA,EAAA,QAAA,CAAA,CAAA;;AAAA,IAAA,eAAA,CAAA,IAAA,EAAA,MAAA,EAAA,KAAA,CAAA,CAAA,CAAA;;AAAA,IAAA,eAAA,CAAA,IAAA,EAAA,OAAA,EAAA,KAAA,CAAA,CAAA,CAAA;;AAAA,IAAA,eAAA,CAAA,IAAA,EAAA,OAAA,EAAA,KAAA,CAAA,CAAA,CAAA;;AAAA,IAAA,eAAA,CAAA,IAAA,EAAA,MAAA,EAAA,KAAA,CAAA,CAAA,CAAA;;AAAA,IAAA,eAAA,CAAA,IAAA,EAAA,QAAA,EAAA,KAAA,CAAA,CAAA,CAAA;;AAAA,IAAA,eAAA,CAAA,IAAA,EAAA,UAAA,EAAA,KAAA,CAAA,CAAA,CAAA;;AAAA,IAAA,eAAA,CAAA,IAAA,EAAA,OAAA,EAAA,KAAA,CAAA,CAAA,CAAA;;AAAA,IAAA,eAAA,CAAA,IAAA,EAAA,UAAA,EAAA,KAAA,CAAA,CAAA,CAAA;;AAAA,IAAA,eAAA,CAAA,IAAA,EAAA,WAAA,EAAA,KAAA,CAAA,CAAA,CAAA;;AAAA,IAAA,eAAA,CAAA,IAAA,EAAA,UAAA,EAAA,KAAA,CAAA,CAAA,CAAA;;AAAA,IAAA,eAAA,CAAA,IAAA,EAAA,UAAA,EAAA,KAAA,CAAA,CAAA,CAAA;;AAAA,IAAA,eAAA,CAAA,IAAA,EAAA,YAAA,EAAA,KAAA,CAAA,CAAA,CAAA;;AAAA,IAAA,eAAA,CAAA,IAAA,EAAA,UAAA,EAAA,KAAA,CAAA,CAAA,CAAA;;AAAA,IAAA,eAAA,CAAA,IAAA,EAAA,aAAA,EAAA,KAAA,CAAA,CAAA,CAAA;;AAAA,IAAA,eAAA,CAAA,IAAA,EAAA,SAAA,EAAA,KAAA,CAAA,CAAA,CAAA;;AAAA,IAAA,eAAA,CAAA,IAAA,EAAA,WAAA,EAAA,KAAA,CAAA,CAAA,CAAA;;AAAA,IAAA,eAAA,CAAA,IAAA,EAAA,WAAA,EAAA,KAAA,CAAA,CAAA,CAAA;;AAAA,IAAA,eAAA,CAAA,IAAA,EAAA,aAAA,EAAA,KAAA,CAAA,CAAA,CAAA;;AAAA,IAAA,eAAA,CAAA,IAAA,EAAA,SAAA,EAAA,KAAA,CAAA,CAAA,CAAA;;AAAA,IAAA,eAAA,CAAA,IAAA,EAAA,eAAA,EAAA,KAAA,CAAA,CAAA,CAAA;;AAAA,IAAA,eAAA,CAAA,IAAA,EAAA,UAAA,EAAA,KAAA,CAAA,CAAA,CAAA;;AAAA,IAAA,eAAA,CAAA,IAAA,EAAA,WAAA,EAAA,KAAA,CAAA,CAAA,CAAA;;AAAA,IAAA,eAAA,CAAA,IAAA,EAAA,SAAA,EAAA,KAAA,CAAA,CAAA,CAAA;;AAAA,IAAA,eAAA,CAAA,IAAA,EAAA,OAAA,EAAA,KAAA,CAAA,CAAA,CAAA;;AAAA,IAAA,eAAA,CAAA,IAAA,EAAA,SAAA,EAAA,KAAA,CAAA,CAAA,CAAA;;AAC9B,IAAKD,IAAAA,CAAAA,IAAL,GAAYA,IAAZ,CAAA;AACA,IAAKD,IAAAA,CAAAA,IAAL,GAAYA,IAAZ,CAAA;AACA,IAAA,IAAMG,MAAM,GAAGH,IAAI,CAACG,MAAL,IAAe,EAA9B,CAAA;AACA,IAAA,IAAMC,MAAM,GAAGD,MAAM,CAACC,MAAP,IAAiB,GAAhC,CAAA;AACA,IAAMC,IAAAA,IAAI,GAAGC,GAAG,CAACN,IAAD,EAAO,aAAP,CAAH,IAA4B,EAAzC,CAAA;AACA,IAAA,IAAMO,YAAY,GAAGF,IAAI,CAACG,QAAL,IAAiB,UAAtC,CAAA;AACA,IAAA,IAAMC,SAAS,GAAGJ,IAAI,CAACK,KAAL,IAAc,OAAhC,CAAA;AACA,IAAA,IAAMC,SAAS,GAAGN,IAAI,CAACO,KAAL,IAAc,OAAhC,CAAA;AACA,IAAKC,IAAAA,CAAAA,KAAL,GAAa,IAAb,CAAA;AACA,IAAKL,IAAAA,CAAAA,QAAL,GAAgB,IAAhB,CAAA;AACA,IAAKM,IAAAA,CAAAA,WAAL,GAAmB,KAAnB,CAAA;AACA,IAAKC,IAAAA,CAAAA,QAAL,GAAgB,KAAhB,CAAA;AACA,IAAKC,IAAAA,CAAAA,SAAL,GAAiB,KAAjB,CAAA;AACA,IAAKC,IAAAA,CAAAA,QAAL,GAAgB,KAAhB,CAAA;AACA,IAAKC,IAAAA,CAAAA,QAAL,GAAgB,IAAhB,CAAA;AACA,IAAKC,IAAAA,CAAAA,UAAL,GAAkB,KAAlB,CAAA;;AACA,IAAMC,IAAAA,IAAI,mCACL5B,aADK,CAAA,EAAA,EAAA,EAAA;AAER6B,MAAAA,OAAO,EAAE,KAFD;AAGRC,MAAAA,QAAQ,EAAE,KAHF;AAIRC,MAAAA,OAAO,EAAE,KAAA;AAJD,KAAA,EAKLtB,IALK,CAAV,CAAA;;AAOA,IAAA,IAAMO,QAAQ,GAAGY,IAAI,CAACb,YAAD,CAArB,CAAA;AACA,IAAKiB,IAAAA,CAAAA,GAAL,CAASJ,IAAT,CAAA,CAAA;AACA,IAAA,IAAA,CAAKV,KAAL,GAAaU,IAAI,CAACX,SAAD,CAAJ,IAAmB,EAAhC,CAAA;AACA,IAAKG,IAAAA,CAAAA,KAAL,GAAaQ,IAAI,CAACT,SAAD,CAAJ,IAAmBc,QAAQ,CAACrB,MAAD,CAAxC,CAAA;AACA,IAAKJ,IAAAA,CAAAA,IAAL,CAAU0B,OAAV,CAAkBF,GAAlB,CAAsB,IAAA,CAAKZ,KAA3B,EAAkC,IAAlC,CAAA,CAAA;;AACA,IAAA,IAAIV,MAAM,IAAIA,MAAM,YAAYH,QAAhC,EAA0C;AACxC,MAAKG,IAAAA,CAAAA,MAAL,GAAcA,MAAd,CAAA;AACD,KAFD,MAEO;AACL,MAAKA,IAAAA,CAAAA,MAAL,GAAc,IAAd,CAAA;AACD,KAAA;;AACD,IAAIM,IAAAA,QAAQ,KAAK,IAAjB,EAAuB;AACrB,MAAKA,IAAAA,CAAAA,QAAL,GAAgBA,QAAhB,CAAA;AACD,KAAA;;AACD,IAAKmB,IAAAA,CAAAA,KAAL,GAAa,CAAb,CAAA;AACA,IAAKC,IAAAA,CAAAA,OAAL,GAAe,IAAf,CAAA;AACA,IAAA,IAAA,CAAKP,OAAL,GAAeD,IAAI,CAACC,OAApB,CAAA;AACA,IAAA,IAAA,CAAKQ,WAAL,EAAA,CAAA;AACA,IAAA,IAAA,CAAKP,QAAL,GAAgBF,IAAI,CAACE,QAArB,CAAA;AACA,IAAA,IAAA,CAAKQ,YAAL,EAAA,CAAA;AACA,IAAA,IAAA,CAAKP,OAAL,GAAeH,IAAI,CAACG,OAApB,CAAA;AACA,IAAA,IAAA,CAAKQ,WAAL,EAAA,CAAA;AACA,IAAA,IAAA,CAAKC,MAAL,EAAA,CAAA;AACAhC,IAAAA,IAAI,CAACiC,MAAL,CAAY,IAAZ,CAAA,CAAA;;AACA,IAAA,IAAIC,KAAK,CAACC,OAAN,CAAc3B,QAAd,CAAJ,EAA6B;AAC3B,MAAK4B,IAAAA,CAAAA,MAAL,CAAY5B,QAAZ,CAAA,CAAA;AACD,KAFD,MAEO,IAAIA,QAAQ,KAAK,IAAb,IAAqB,CAACL,MAAM,CAACkC,IAAjC,EAAuC;AAC5C,MAAA,IAAA,CAAKC,YAAL,EAAA,CAAA;AACD,KAAA;;AACD,IAAKf,IAAAA,CAAAA,OAAL,GAAe,KAAf,CAAA;AACA,IAAKgB,IAAAA,CAAAA,aAAL,GAAqB,KAArB,CAAA;AACA,IAAA,IAAA,CAAKC,aAAL,EAAA,CAAA;AACD,GAAA;;AAjFH,EAAA,YAAA,CAAA,QAAA,EAAA,CAAA;AAAA,IAAA,GAAA,EAAA,aAAA;AAAA,IAAA,KAAA,EAkFE,SAAc,WAAA,GAAA;AACZ,MAAA,IAAQxC,IAAR,GAAgC,IAAhC,CAAQA,IAAR;AAAA,UAAcY,KAAd,GAAgC,IAAhC,CAAcA,KAAd;AAAA,UAAqBV,MAArB,GAAgC,IAAhC,CAAqBA,MAArB,CAAA;AACA,MAAA,IAAQuC,aAAR,GAA0BzC,IAAI,CAACG,MAA/B,CAAQsC,aAAR,CAAA;AACA,MAAA,IAAMlB,OAAN,GAAkB,IAAlB,CAAMA,OAAN,CAAA;AACAA,MAAAA,OAAO,GAAGrB,MAAH,KAAA,IAAA,IAAGA,MAAH,KAAGA,KAAAA,CAAAA,GAAAA,KAAAA,CAAAA,GAAAA,MAAM,CAAEwC,SAAR,EAAV,CAAA;;AACA,MAAA,IAAInB,OAAO,IAAI,CAACkB,aAAhB,EAA+B;AAC7BzC,QAAAA,IAAI,CAAC2C,UAAL,CAAgBnB,GAAhB,CAAoBZ,KAApB,EAA2B,IAA3B,CAAA,CAAA;AACD,OAAA;;AACD,MAAKW,IAAAA,CAAAA,OAAL,GAAeA,OAAf,CAAA;AACD,KAAA;AA3FH,GAAA,EAAA;AAAA,IAAA,GAAA,EAAA,cAAA;AAAA,IAAA,KAAA,EA4FE,SAAe,YAAA,GAAA;AACb,MAAA,IAAQvB,IAAR,GAAiB,IAAjB,CAAQA,IAAR,CAAA;AACA,MAAA,IAAMsB,QAAN,GAAmB,IAAnB,CAAMA,QAAN,CAAA;AACA,MAAA,IAAQnB,MAAR,GAAmBH,IAAnB,CAAQG,MAAR,CAAA;;AACA,MAAA,IAAI,OAAOA,MAAM,CAACyC,WAAd,KAA8B,QAA9B,IAA0C,IAAA,CAAKC,QAAL,EAAA,GAAkB1C,MAAM,CAACyC,WAAvE,EAAoF;AAClF5C,QAAAA,IAAI,CAAC8C,WAAL,CAAiBtB,GAAjB,CAAqB,IAAA,CAAKZ,KAA1B,EAAiC,IAAjC,CAAA,CAAA;AACAU,QAAAA,QAAQ,GAAG,IAAX,CAAA;AACD,OAAA;;AACD,MAAInB,IAAAA,MAAM,CAAC4C,SAAX,EAAsB;AACpBzB,QAAAA,QAAQ,GAAG,IAAX,CAAA;AACD,OAAA;;AACD,MAAI,IAAA,IAAA,CAAKd,QAAL,KAAkB,IAAlB,IAA0BL,MAAM,CAACkC,IAArC,EAA2C;AACzCf,QAAAA,QAAQ,GAAG,KAAX,CAAA;AACD,OAAA;;AACD,MAAA,IAAIA,QAAJ,EAAc;AACZtB,QAAAA,IAAI,CAAC8C,WAAL,CAAiBtB,GAAjB,CAAqB,IAAA,CAAKZ,KAA1B,EAAiC,IAAjC,CAAA,CAAA;AACD,OAFD,MAEO;AACLZ,QAAAA,IAAI,CAAC8C,WAAL,CAAA,QAAA,CAAA,CAAwB,KAAKlC,KAA7B,CAAA,CAAA;AACD,OAAA;;AACD,MAAKU,IAAAA,CAAAA,QAAL,GAAgBA,QAAhB,CAAA;AACD,KAAA;AAhHH,GAAA,EAAA;AAAA,IAAA,GAAA,EAAA,aAAA;AAAA,IAAA,KAAA,EAiHE,SAAc,WAAA,GAAA;AACZ,MAAA,IAAQtB,IAAR,GAA0B,IAA1B,CAAQA,IAAR;AAAA,UAAcqB,OAAd,GAA0B,IAA1B,CAAcA,OAAd,CAAA;;AACA,MAAA,IAAIA,OAAJ,EAAa;AACXrB,QAAAA,IAAI,CAACgD,UAAL,CAAgBxB,GAAhB,CAAoB,IAAA,CAAKZ,KAAzB,EAAgC,IAAhC,CAAA,CAAA;AACD,OAAA;AACF,KAAA;AAtHH,GAAA,EAAA;AAAA,IAAA,GAAA,EAAA,QAAA;AAAA,IAuHE,KAAA,EAAA,SAAA,MAAA,CAAOX,IAAP,EAAa;AAAA,MAAA,IAAA,KAAA,GAAA,IAAA,CAAA;;AACX,MAAMgD,IAAAA,IAAI,GAAG,EAAb,CAAA;;AACA,MAAA,IAAI,CAACf,KAAK,CAACC,OAAN,CAAclC,IAAd,CAAL,EAA0B;AACxBgD,QAAAA,IAAI,CAACC,IAAL,CAAUjD,IAAV,CAAA,CAAA;AACD,OAFD,MAEO;AACLgD,QAAAA,IAAI,CAACC,IAAL,OAAAD,IAAI,EAAA,kBAAA,CAAShD,IAAT,CAAJ,CAAA,CAAA;AACD,OAAA;;AACD,MAAA,IAAIgD,IAAI,CAACE,MAAL,IAAe,CAAnB,EAAsB;AACpB,QAAA,OAAA;AACD,OAAA;;AACD,MAAI,IAAA,CAACjB,KAAK,CAACC,OAAN,CAAc,IAAK3B,CAAAA,QAAnB,CAAL,EAAmC;AACjC,QAAKA,IAAAA,CAAAA,QAAL,GAAgB,EAAhB,CAAA;AACD,OAAA;;AACD,MAAA,IAAQA,QAAR,GAA2B,IAA3B,CAAQA,QAAR;AAAA,UAAkBR,IAAlB,GAA2B,IAA3B,CAAkBA,IAAlB,CAAA;AACAiD,MAAAA,IAAI,CAACG,OAAL,CAAa,UAACC,IAAD,EAAU;AACrB,QAAIC,IAAAA,IAAI,GAAG,IAAX,CAAA;;AACA,QAAID,IAAAA,IAAI,YAAYtD,QAApB,EAA8B;AAC5BuD,UAAAA,IAAI,GAAGD,IAAP,CAAA;AACAC,UAAAA,IAAI,CAACC,QAAL,CAAc,KAAI,CAACvD,IAAnB,EAAyB,KAAzB,CAAA,CAAA;AACD,SAHD,MAGO;AACLsD,UAAAA,IAAI,GAAG,IAAIvD,QAAJ,CAAa,KAAI,CAACC,IAAlB,EAAwBqD,IAAxB,EAA8B,KAA9B,CAAP,CAAA;AACA7C,UAAAA,QAAQ,CAAC0C,IAAT,CAAcI,IAAd,CAAA,CAAA;AACD,SAAA;AACF,OATD,CAAA,CAAA;AAUAtD,MAAAA,IAAI,CAACiC,MAAL,CAAY,IAAZ,CAAA,CAAA;AACA,MAAA,IAAA,CAAKuB,aAAL,EAAA,CAAA;AACD,KAAA;AAjJH,GAAA,EAAA;AAAA,IAAA,GAAA,EAAA,UAAA;AAAA,IAAA,KAAA,EAkJE,kBAASxD,IAAT,EAAeE,MAAf,EAAuBuD,KAAvB,EAA8B;AAAA,MAAA,IAAA,MAAA,GAAA,IAAA,CAAA;;AAC5B,MAAMC,IAAAA,UAAU,GAAGxD,MAAnB,CAAA;AACA,MAAI,IAAA,CAACwD,UAAL,EACE,OAAA;AACF,MAAA,IAAMC,aAAa,GAAGD,UAAU,CAACE,UAAX,EAAtB,CAAA;AACA,MAAA,IAAMC,cAAc,GAAGF,aAAa,CAACG,IAAd,CAAmB,UAACR,IAAD,EAAA;AAAA,QAAA,OAAUA,IAAI,CAAC1C,KAAL,KAAe,MAAI,CAACA,KAA9B,CAAA;AAAA,OAAnB,CAAvB,CAAA;;AACA,MAAA,IAAIiD,cAAJ,EAAoB;AAClB,QAAA,OAAA;AACD,OAAA;;AACD,MAAI3B,IAAAA,KAAK,CAACC,OAAN,CAAcuB,UAAU,CAAClD,QAAzB,CAAJ,EAAwC;AACtC,QAAIuD,IAAAA,WAAW,GAAG,CAAlB,CAAA;;AACA,QAAA,IAAI,OAAON,KAAP,KAAiB,QAArB,EAA+B;AAC7BM,UAAAA,WAAW,GAAGN,KAAd,CAAA;AACD,SAAA;;AACD,QAAA,IAAMO,aAAa,GAAGN,UAAU,CAAClD,QAAX,CAAoBuD,WAApB,CAAtB,CAAA;;AACA,QAAA,IAAIC,aAAa,CAACpD,KAAd,KAAwB,IAAA,CAAKA,KAAjC,EAAwC;AACtC,UAAA,OAAA;AACD,SAAA;AACF,OAAA;;AACD,MAAA,IAAA,CAAKqD,MAAL,EAAA,CAAA;AACA,MAAK/D,IAAAA,CAAAA,MAAL,GAAcwD,UAAd,CAAA;AACA,MAAIQ,IAAAA,QAAQ,GAAG,IAAf,CAAA;;AACA,MAAIR,IAAAA,UAAU,YAAY3D,QAA1B,EAAoC;AAClC,QAAI,IAAA,CAACmC,KAAK,CAACC,OAAN,CAAcuB,UAAU,CAAClD,QAAzB,CAAL,EAAyC;AACvCkD,UAAAA,UAAU,CAAClD,QAAX,GAAsB,EAAtB,CAAA;AACD,SAAA;;AACD0D,QAAAA,QAAQ,GAAGhE,MAAM,CAACM,QAAlB,CAAA;AACD,OALD,MAKO;AACL0D,QAAAA,QAAQ,GAAGlE,IAAI,CAACQ,QAAhB,CAAA;AACD,OAAA;;AACD,MAAA,IAAI0B,KAAK,CAACC,OAAN,CAAc+B,QAAd,CAAJ,EAA6B;AAC3B,QAAA,IAAI,OAAOT,KAAP,KAAiB,QAArB,EAA+B;AAC7BS,UAAAA,QAAQ,CAACC,MAAT,CAAgBV,KAAhB,EAAuB,CAAvB,EAA0B,IAA1B,CAAA,CAAA;AACD,SAFD,MAEO;AACLS,UAAAA,QAAQ,CAAChB,IAAT,CAAc,IAAd,CAAA,CAAA;AACD,SAAA;AACF,OAAA;;AACD,MAAA,IAAMkB,KAAK,GAAG,IAAKC,CAAAA,IAAL,EAAd,CAAA;AACAD,MAAAA,KAAK,CAAChB,OAAN,CAAc,UAACC,IAAD,EAAU;AACtB,QAAMC,IAAAA,IAAI,GAAGD,IAAb,CAAA;AACAC,QAAAA,IAAI,CAACtD,IAAL,GAAYA,IAAZ,CAAA;AACAA,QAAAA,IAAI,CAAC0B,OAAL,CAAaF,GAAb,CAAiB8B,IAAI,CAAC1C,KAAtB,EAA6B0C,IAA7B,CAAA,CAAA;;AACA,QAAIA,IAAAA,IAAI,CAAChC,QAAT,EAAmB;AACjBtB,UAAAA,IAAI,CAAC8C,WAAL,CAAiBtB,GAAjB,CAAqB8B,IAAI,CAAC1C,KAA1B,EAAiC,IAAjC,CAAA,CAAA;AACD,SAAA;AACF,OAPD,CAAA,CAAA;AAQA,MAAA,IAAM0D,WAAW,GAAGZ,UAAU,CAACW,IAAX,EAApB,CAAA;AACAC,MAAAA,WAAW,CAAClB,OAAZ,CAAoB,UAACE,IAAD,EAAU;AAC5BA,QAAAA,IAAI,CAACtB,MAAL,EAAA,CAAA;AACAsB,QAAAA,IAAI,CAACd,aAAL,EAAA,CAAA;AACD,OAHD,CAAA,CAAA;AAIAxC,MAAAA,IAAI,CAACiC,MAAL,EAAA,CAAA;AACD,KAAA;AAtMH,GAAA,EAAA;AAAA,IAAA,GAAA,EAAA,QAAA;AAAA,IAAA,KAAA,EAuME,SAAOoB,MAAAA,CAAAA,IAAP,EAAaI,KAAb,EAAoB;AAClB,MAAA,IAAQzD,IAAR,GAAyB,IAAzB,CAAQA,IAAR;AAAA,UAAcE,MAAd,GAAyB,IAAzB,CAAcA,MAAd,CAAA;AACA,MAAA,IAAMgE,QAAQ,GAAG,IAAKK,CAAAA,WAAL,EAAjB,CAAA;AACA,MAAIjB,IAAAA,IAAI,GAAG,IAAX,CAAA;;AACA,MAAID,IAAAA,IAAI,YAAYtD,QAApB,EAA8B;AAC5BuD,QAAAA,IAAI,GAAGD,IAAP,CAAA;AACAC,QAAAA,IAAI,CAACC,QAAL,CAAcvD,IAAd,EAAoBE,MAApB,EAA4BuD,KAA5B,CAAA,CAAA;AACD,OAHD,MAGO,IAAIJ,IAAJ,EAAU;AACfC,QAAAA,IAAI,GAAG,IAAIvD,QAAJ,CAAaC,IAAb,EAAmBqD,IAAnB,EAAyBnD,MAAzB,CAAP,CAAA;;AACA,QAAA,IAAI,OAAOuD,KAAP,KAAiB,QAArB,EAA+B;AAC7BS,UAAAA,QAAQ,CAACC,MAAT,CAAgBV,KAAhB,EAAuB,CAAvB,EAA0BH,IAA1B,CAAA,CAAA;AACD,SAAA;;AACDY,QAAAA,QAAQ,CAACd,OAAT,CAAiB,UAACoB,OAAD,EAAa;AAC5BA,UAAAA,OAAO,CAACxC,MAAR,EAAA,CAAA;AACD,SAFD,CAAA,CAAA;AAGD,OAAA;;AACDhC,MAAAA,IAAI,CAACiC,MAAL,EAAA,CAAA;AACD,KAAA;AAxNH,GAAA,EAAA;AAAA,IAAA,GAAA,EAAA,cAAA;AAAA,IAyNE,KAAA,EAAA,SAAA,YAAA,CAAawC,OAAb,EAAsB;AACpB,MAAA,IAAMhB,KAAK,GAAG,IAAKiB,CAAAA,QAAL,EAAd,CAAA;AACA,MAAA,IAAA,CAAKC,MAAL,CAAYF,OAAZ,EAAqBhB,KAArB,CAAA,CAAA;AACD,KAAA;AA5NH,GAAA,EAAA;AAAA,IAAA,GAAA,EAAA,aAAA;AAAA,IA6NE,KAAA,EAAA,SAAA,WAAA,CAAYgB,OAAZ,EAAqB;AACnB,MAAA,IAAMhB,KAAK,GAAG,IAAKiB,CAAAA,QAAL,EAAd,CAAA;AACA,MAAA,IAAA,CAAKC,MAAL,CAAYF,OAAZ,EAAqBhB,KAAK,GAAG,CAA7B,CAAA,CAAA;AACD,KAAA;AAhOH,GAAA,EAAA;AAAA,IAAA,GAAA,EAAA,QAAA;AAAA,IAAA,KAAA,EAiOE,SAAS,MAAA,GAAA;AACP,MAAA,IAAQzD,IAAR,GAAiB,IAAjB,CAAQA,IAAR,CAAA;AACA,MAAA,IAAMoE,KAAK,GAAG,IAAKC,CAAAA,IAAL,EAAd,CAAA;AACA,MAAA,IAAMH,QAAQ,GAAG,IAAKK,CAAAA,WAAL,EAAjB,CAAA;AACA,MAAA,IAAMd,KAAK,GAAG,IAAKiB,CAAAA,QAAL,EAAd,CAAA;;AACA,MAAA,IAAIxC,KAAK,CAACC,OAAN,CAAc+B,QAAd,CAAJ,EAA6B;AAC3BA,QAAAA,QAAQ,CAACC,MAAT,CAAgBV,KAAhB,EAAuB,CAAvB,CAAA,CAAA;AACD,OAAA;;AACDW,MAAAA,KAAK,CAAChB,OAAN,CAAc,UAACE,IAAD,EAAU;AACtBA,QAAAA,IAAI,CAACsB,KAAL,EAAA,CAAA;AACD,OAFD,CAAA,CAAA;AAGAV,MAAAA,QAAQ,CAACd,OAAT,CAAiB,UAACE,IAAD,EAAU;AACzBA,QAAAA,IAAI,CAACtB,MAAL,EAAA,CAAA;AACD,OAFD,CAAA,CAAA;AAGA,MAAA,IAAA,CAAK6C,aAAL,EAAA,CAAA;AACA7E,MAAAA,IAAI,CAACiC,MAAL,EAAA,CAAA;AACD,KAAA;AAjPH,GAAA,EAAA;AAAA,IAAA,GAAA,EAAA,OAAA;AAAA,IAAA,KAAA,EAkPE,SAAQ,KAAA,GAAA;AACN,MAAA,IAAQjC,IAAR,GAAwB,IAAxB,CAAQA,IAAR;AAAA,UAAcY,KAAd,GAAwB,IAAxB,CAAcA,KAAd,CAAA;AACAZ,MAAAA,IAAI,CAACgD,UAAL,CAAA,QAAA,CAAA,CAAuBpC,KAAvB,CAAA,CAAA;AACAZ,MAAAA,IAAI,CAAC2C,UAAL,CAAA,QAAA,CAAA,CAAuB/B,KAAvB,CAAA,CAAA;AACAZ,MAAAA,IAAI,CAAC8C,WAAL,CAAA,QAAA,CAAA,CAAwBlC,KAAxB,CAAA,CAAA;AACAZ,MAAAA,IAAI,CAAC0B,OAAL,CAAA,QAAA,CAAA,CAAoBd,KAApB,CAAA,CAAA;AACD,KAAA;AAxPH,GAAA,EAAA;AAAA,IAAA,GAAA,EAAA,cAAA;AAAA,IAAA,KAAA,EAAA,YAAA;AAAA,MAyPE,IAAA,aAAA,GAAA,iBAAA,eAAA,mBAAA,CAAA,IAAA,CAAA,SAAA,OAAA,GAAA;AAAA,QAAA,IAAA,MAAA,EAAA,IAAA,CAAA;AAAA,QAAA,OAAA,mBAAA,CAAA,IAAA,CAAA,SAAA,QAAA,CAAA,QAAA,EAAA;AAAA,UAAA,OAAA,CAAA,EAAA;AAAA,YAAA,QAAA,QAAA,CAAA,IAAA,GAAA,QAAA,CAAA,IAAA;AAAA,cAAA,KAAA,CAAA;AACQT,gBAAAA,MADR,GACiBG,GAAG,CAAC,IAAD,EAAO,aAAP,CAAH,IAA4B,EAD7C,CAAA;;AAAA,gBAAA,IAAA,EAEM,KAAKE,QAAL,KAAkB,IAAlB,IAA0B,CAAC,KAAKV,OAFtC,CAAA,EAAA;AAAA,kBAAA,QAAA,CAAA,IAAA,GAAA,EAAA,CAAA;AAAA,kBAAA,MAAA;AAAA,iBAAA;;AAAA,gBAAA,IAAA,EAGQ,OAAOK,MAAM,CAAC2E,IAAd,KAAuB,UAH/B,CAAA,EAAA;AAAA,kBAAA,QAAA,CAAA,IAAA,GAAA,EAAA,CAAA;AAAA,kBAAA,MAAA;AAAA,iBAAA;;AAIM,gBAAKhF,IAAAA,CAAAA,OAAL,GAAe,IAAf,CAAA;AACA,gBAAA,IAAA,CAAKkC,MAAL,EAAA,CAAA;AACIiB,gBAAAA,IANV,GAMiB,EANjB,CAAA;AAAA,gBAAA,QAAA,CAAA,IAAA,GAAA,CAAA,CAAA;AAAA,gBAAA,OAOmB9C,MAAM,CAAC2E,IAAP,CAAY,IAAZ,CAPnB,CAAA;;AAAA,cAAA,KAAA,CAAA;AAOM7B,gBAAAA,IAPN,GAAA,QAAA,CAAA,IAAA,CAAA;AAQM,gBAAA,IAAA,CAAKjD,IAAL,CAAU+E,IAAV,CAAe,MAAf,EAAuB;AACrBzB,kBAAAA,IAAI,EAAE,IADe;AAErBrD,kBAAAA,IAAI,EAAEgD,IAAAA;AAFe,iBAAvB,CAAA,CAAA;AAIA,gBAAKnD,IAAAA,CAAAA,OAAL,GAAe,KAAf,CAAA;;AACA,gBAAIoC,IAAAA,KAAK,CAACC,OAAN,CAAcc,IAAd,CAAuBA,IAAAA,IAAI,CAACE,MAAL,GAAc,CAAzC,EAA4C;AAC1C,kBAAKf,IAAAA,CAAAA,MAAL,CAAYa,IAAZ,CAAA,CAAA;AACD,iBAFD,MAEO;AACL,kBAAKzC,IAAAA,CAAAA,QAAL,GAAgB,KAAhB,CAAA;AACD,iBAAA;;AACD,gBAAA,IAAA,CAAKwB,MAAL,EAAA,CAAA;;AAlBN,cAAA,KAAA,EAAA,CAAA;AAAA,cAAA,KAAA,KAAA;AAAA,gBAAA,OAAA,QAAA,CAAA,IAAA,EAAA,CAAA;AAAA,aAAA;AAAA,WAAA;AAAA,SAAA,EAAA,OAAA,EAAA,IAAA,CAAA,CAAA;AAAA,OAzPF,CAAA,CAAA,CAAA;;AAAA,MAAA,SAAA,YAAA,GAAA;AAAA,QAAA,OAAA,aAAA,CAAA,KAAA,CAAA,IAAA,EAAA,SAAA,CAAA,CAAA;AAAA,OAAA;;AAAA,MAAA,OAAA,YAAA,CAAA;AAAA,KAAA,EAAA;AAAA,GAAA,EAAA;AAAA,IAAA,GAAA,EAAA,KAAA;AAAA,IA+QE,KAAA,EAAA,SAAA,GAAA,CAAIqB,IAAJ,EAAU;AAAA,MAAA,IAAA,MAAA,GAAA,IAAA,CAAA;;AACR,MAAA,IAAQrD,IAAR,GAAiB,IAAjB,CAAQA,IAAR,CAAA;AACA,MAAA,IAAMK,IAAI,GAAGf,MAAM,CAACe,IAAP,CAAYgD,IAAZ,CAAb,CAAA;AACAhD,MAAAA,IAAI,CAAC+C,OAAL,CAAa,UAAC4B,GAAD,EAAS;AACpB,QAAI3F,IAAAA,cAAc,CAAC4F,IAAf,CAAoBzF,aAApB,EAAmCwF,GAAnC,CAA2CA,IAAAA,GAAG,KAAK,OAAvD,EAAgE;AAC9D,UAAA,MAAI,CAACA,GAAD,CAAJ,GAAY3B,IAAI,CAAC2B,GAAD,CAAhB,CAAA;AACD,SAAA;AACF,OAJD,CAAA,CAAA;AAKAhF,MAAAA,IAAI,CAACkF,OAAL,CAAa,IAAb,CAAA,CAAA;AACD,KAAA;AAxRH,GAAA,EAAA;AAAA,IAAA,GAAA,EAAA,WAAA;AAAA,IAAA,KAAA,EAyRE,SAAY,SAAA,GAAA;AACV,MAAA,OAAO,KAAKhF,MAAZ,CAAA;AACD,KAAA;AA3RH,GAAA,EAAA;AAAA,IAAA,GAAA,EAAA,YAAA;AAAA,IAAA,KAAA,EA4RE,SAAa,UAAA,GAAA;AACX,MAAMiF,IAAAA,OAAO,GAAG,EAAhB,CAAA;AACA,MAAI7B,IAAAA,IAAI,GAAG,IAAA,CAAKpD,MAAhB,CAAA;;AACA,MAAA,OAAOoD,IAAP,EAAa;AACX6B,QAAAA,OAAO,CAACjC,IAAR,CAAaI,IAAb,CAAA,CAAA;AACAA,QAAAA,IAAI,GAAGA,IAAI,CAACpD,MAAZ,CAAA;AACD,OAAA;;AACD,MAAA,OAAOiF,OAAP,CAAA;AACD,KAAA;AApSH,GAAA,EAAA;AAAA,IAAA,GAAA,EAAA,aAAA;AAAA,IAAA,KAAA,EAqSE,SAAc,WAAA,GAAA;AACZ,MAAA,IAAQjF,MAAR,GAAyB,IAAzB,CAAQA,MAAR;AAAA,UAAgBF,IAAhB,GAAyB,IAAzB,CAAgBA,IAAhB,CAAA;AACA,MAAIiD,IAAAA,IAAI,GAAG,EAAX,CAAA;;AACA,MAAA,IAAI/C,MAAJ,EAAY;AACV,QAAIgC,IAAAA,KAAK,CAACC,OAAN,CAAcjC,MAAM,CAACM,QAArB,CAAJ,EAAoC;AAClCyC,UAAAA,IAAI,GAAG/C,MAAM,CAACM,QAAd,CAAA;AACD,SAAA;AACF,OAJD,MAIO,IAAIR,IAAJ,EAAU;AACfiD,QAAAA,IAAI,GAAGjD,IAAI,CAACQ,QAAZ,CAAA;AACD,OAAA;;AACD,MAAA,OAAOyC,IAAP,CAAA;AACD,KAAA;AAhTH,GAAA,EAAA;AAAA,IAAA,GAAA,EAAA,SAAA;AAAA,IAAA,KAAA,EAiTE,SAAU,OAAA,GAAA;AACR,MAAA,IAAMkC,OAAO,GAAG,IAAKvB,CAAAA,UAAL,EAAhB,CAAA;AACA,MAAOuB,OAAAA,OAAO,CAACA,OAAO,CAAChC,MAAR,GAAiB,CAAlB,CAAP,IAA+B,IAAtC,CAAA;AACD,KAAA;AApTH,GAAA,EAAA;AAAA,IAAA,GAAA,EAAA,UAAA;AAAA,IAAA,KAAA,EAqTE,SAAW,QAAA,GAAA;AACT,MAAA,IAAMF,IAAI,GAAG,IAAKsB,CAAAA,WAAL,EAAb,CAAA;AACA,MAAA,OAAOtB,IAAI,CAACmC,OAAL,CAAa,IAAb,CAAP,CAAA;AACD,KAAA;AAxTH,GAAA,EAAA;AAAA,IAAA,GAAA,EAAA,SAAA;AAAA,IAAA,KAAA,EAyTE,SAAU,OAAA,GAAA;AACR,MAAA,IAAMhB,KAAK,GAAG,IAAKR,CAAAA,UAAL,EAAd,CAAA;AACAQ,MAAAA,KAAK,CAACiB,OAAN,CAAc,IAAd,CAAA,CAAA;AACA,MAAOjB,OAAAA,KAAK,CAACkB,OAAN,EAAP,CAAA;AACD,KAAA;AA7TH,GAAA,EAAA;AAAA,IAAA,GAAA,EAAA,UAAA;AAAA,IAAA,KAAA,EA8TE,SAAW,QAAA,GAAA;AACT,MAAA,IAAMH,OAAO,GAAG,IAAKvB,CAAAA,UAAL,EAAhB,CAAA;AACA,MAAOuB,OAAAA,OAAO,CAAChC,MAAf,CAAA;AACD,KAAA;AAjUH,GAAA,EAAA;AAAA,IAAA,GAAA,EAAA,QAAA;AAAA,IAAA,KAAA,EAkUE,SAAS,MAAA,GAAA;AACP,MAAA,IAAA,UAAA,GAGI,KAAKnD,IAHT;AAAA,UACEG,MADF,cACEA,MADF;AAAA,UAEEoF,SAFF,cAEEA,SAFF,CAAA;AAIA,MAAIC,IAAAA,IAAI,GAAG,IAAX,CAAA;;AACA,MAAA,IAAI,OAAOrF,MAAM,CAACsF,MAAd,KAAyB,UAA7B,EAAyC;AACvC,QAAA,IAAMC,SAAS,GAAG,IAAKC,CAAAA,QAAL,EAAlB,CAAA;AACAH,QAAAA,IAAI,GAAGrF,MAAM,CAACsF,MAAP,CAAcC,SAAd,CAAP,CAAA;AACD,OAAA;;AACD,MAAA,IAAIF,IAAJ,EAAU;AACRD,QAAAA,SAAS,CAAC/D,GAAV,CAAc,IAAKZ,CAAAA,KAAnB,EAA0B,IAA1B,CAAA,CAAA;AACD,OAFD,MAEO,IAAI2E,SAAS,CAACjF,GAAV,CAAc,IAAA,CAAKM,KAAnB,CAAJ,EAA+B;AACpC2E,QAAAA,SAAS,CAAA,QAAA,CAAT,CAAiB,IAAA,CAAK3E,KAAtB,CAAA,CAAA;AACD,OAAA;;AACD,MAAA,OAAO4E,IAAP,CAAA;AACD,KAAA;AAlVH,GAAA,EAAA;AAAA,IAAA,GAAA,EAAA,WAAA;AAAA,IAAA,KAAA,EAmVE,SAAY,SAAA,GAAA;AACV,MAAA,IACE9D,OADF,GAEI,IAAK1B,CAAAA,IAFT,CACE0B,OADF,CAAA;AAGA,MAAIE,IAAAA,OAAO,GAAG,IAAd,CAAA;;AACA,MAAI,IAAA,IAAA,CAAKT,UAAT,EAAqB;AACnB,QAAA,OAAO,IAAP,CAAA;AACD,OAAA;;AACD,MAAA,IAAIO,OAAO,CAACpB,GAAR,CAAY,IAAKM,CAAAA,KAAjB,CAAJ,EAA6B;AAC3B,QAAA,IAAMgF,aAAa,GAAG,IAAKC,CAAAA,MAAL,EAAtB,CAAA;AACA,QAAIC,IAAAA,aAAa,GAAG,IAApB,CAAA;AACA,QAAA,IAAMX,OAAO,GAAG,IAAKvB,CAAAA,UAAL,EAAhB,CAAA;;AACA,QAAA,IAAIuB,OAAO,CAAChC,MAAR,GAAiB,CAArB,EAAwB;AACtB2C,UAAAA,aAAa,GAAGX,OAAO,CAACY,KAAR,CAAc,UAACzC,IAAD,EAAA;AAAA,YAAUA,OAAAA,IAAI,CAAC0C,UAAL,EAAV,CAAA;AAAA,WAAd,CAAhB,CAAA;AACD,SAAA;;AACDpE,QAAAA,OAAO,GAAGkE,aAAa,IAAIF,aAA3B,CAAA;AACD,OARD,MAQO;AACLhE,QAAAA,OAAO,GAAG,KAAV,CAAA;AACD,OAAA;;AACD,MAAA,OAAOA,OAAP,CAAA;AACD,KAAA;AAvWH,GAAA,EAAA;AAAA,IAAA,GAAA,EAAA,YAAA;AAAA,IAAA,KAAA,EAwWE,SAAa,UAAA,GAAA;AACX,MAAA,IAAI,IAAKT,CAAAA,UAAT,EACE,OAAO,IAAP,CAAA;AACF,MAAA,IAAM8E,YAAY,GAAG3F,GAAG,CAAC,IAAD,EAAO,sBAAP,CAAxB,CAAA;AACA,MAAA,OAAO,CAAC,EAAE2F,YAAY,IAAI,IAAA,CAAKrG,QAAvB,CAAR,CAAA;AACD,KAAA;AA7WH,GAAA,EAAA;AAAA,IAAA,GAAA,EAAA,eAAA;AAAA,IAAA,KAAA,EA8WE,SAAgB,aAAA,GAAA;AACd,MAAO,OAAA,CAAC,EAAEU,GAAG,CAAC,IAAD,EAAO,yBAAP,CAAH,IAAwC,IAAKb,CAAAA,WAA/C,CAAR,CAAA;AACD,KAAA;AAhXH,GAAA,EAAA;AAAA,IAAA,GAAA,EAAA,aAAA;AAAA,IAAA,KAAA,EAiXE,SAAc,WAAA,GAAA;AACZ,MAAO,OAAA,CAAC,EAAEa,GAAG,CAAC,IAAD,EAAO,uBAAP,CAAH,IAAsC,IAAKZ,CAAAA,SAA7C,CAAR,CAAA;AACD,KAAA;AAnXH,GAAA,EAAA;AAAA,IAAA,GAAA,EAAA,aAAA;AAAA,IAAA,KAAA,EAoXE,SAAc,WAAA,GAAA;AACZ,MAAO,OAAA,CAAC,EAAEY,GAAG,CAAC,IAAD,EAAO,uBAAP,CAAH,IAAsC,IAAKX,CAAAA,SAA7C,CAAR,CAAA;AACD,KAAA;AAtXH,GAAA,EAAA;AAAA,IAAA,GAAA,EAAA,WAAA;AAAA,IAuXE,KAAA,EAAA,SAAA,SAAA,CAAUuG,GAAV,EAAe;AACb,MAAA,IAAQlG,IAAR,GAAwB,IAAxB,CAAQA,IAAR;AAAA,UAAcY,KAAd,GAAwB,IAAxB,CAAcA,KAAd,CAAA;AACA,MAAA,IAAMoC,UAAU,GAAGkD,GAAG,IAAIlG,IAAI,CAACgD,UAA/B,CAAA;AACA,MAAA,OAAO,CAAC,EAAEhD,IAAI,CAAC0B,OAAL,CAAapB,GAAb,CAAiBM,KAAjB,CAAA,IAA2BoC,UAAU,CAAC1C,GAAX,CAAeM,KAAf,CAA7B,CAAR,CAAA;AACD,KAAA;AA3XH,GAAA,EAAA;AAAA,IAAA,GAAA,EAAA,YAAA;AAAA,IA4XE,KAAA,EAAA,SAAA,UAAA,CAAWsF,GAAX,EAAgB;AACd,MAAA,IAAQlG,IAAR,GAAoC,IAApC,CAAQA,IAAR;AAAA,UAAcY,KAAd,GAAoC,IAApC,CAAcA,KAAd;AAAA,UAAqBO,UAArB,GAAoC,IAApC,CAAqBA,UAArB,CAAA;AACA,MAAIA,IAAAA,UAAJ,EACE,OAAO,IAAP,CAAA;AACF,MAAA,IAAM2B,WAAW,GAAGoD,GAAG,IAAIlG,IAAI,CAAC8C,WAAhC,CAAA;AACA,MAAA,OAAO,CAAC,EAAE9C,IAAI,CAAC0B,OAAL,CAAapB,GAAb,CAAiBM,KAAjB,CAAA,IAA2BkC,WAAW,CAACxC,GAAZ,CAAgBM,KAAhB,CAA7B,CAAR,CAAA;AACD,KAAA;AAlYH,GAAA,EAAA;AAAA,IAAA,GAAA,EAAA,WAAA;AAAA,IAmYE,KAAA,EAAA,SAAA,SAAA,CAAUsF,GAAV,EAAe;AACb,MAAA,IAAQ1F,QAAR,GAA2B,IAA3B,CAAQA,QAAR;AAAA,UAAkBR,IAAlB,GAA2B,IAA3B,CAAkBA,IAAlB,CAAA;AACA,MAAA,IAAQyC,aAAR,GAA0BzC,IAAI,CAACG,MAA/B,CAAQsC,aAAR,CAAA;AACA,MAAIlB,IAAAA,OAAO,GAAG,KAAd,CAAA;AACA,MAAA,IAAMoB,UAAU,GAAGuD,GAAG,IAAIlG,IAAI,CAAC2C,UAA/B,CAAA;;AACA,MAAI3C,IAAAA,IAAI,CAAC0B,OAAL,CAAapB,GAAb,CAAiB,IAAA,CAAKM,KAAtB,CAAJ,EAAkC;AAChC,QAAA,IAAI+B,UAAU,CAACrC,GAAX,CAAe,IAAKM,CAAAA,KAApB,CAAJ,EAAgC;AAC9BW,UAAAA,OAAO,GAAG,IAAV,CAAA;AACD,SAFD,MAEO,IAAIW,KAAK,CAACC,OAAN,CAAc3B,QAAd,CAAA,IAA2BA,QAAQ,CAAC2C,MAAT,GAAkB,CAA7C,IAAkD,CAACV,aAAvD,EAAsE;AAC3ElB,UAAAA,OAAO,GAAGf,QAAQ,CAACuF,KAAT,CAAe,UAACzC,IAAD,EAAU;AACjC,YAAA,IAAM6C,cAAc,GAAG7C,IAAI,CAACZ,SAAL,CAAeC,UAAf,CAAvB,CAAA;AACA,YAAA,OAAOwD,cAAP,CAAA;AACD,WAHS,CAAV,CAAA;AAID,SALM,MAKA,IAAI,CAAC1D,aAAL,EAAoB;AACzB,UAAA,IAAM0C,OAAO,GAAG,IAAKvB,CAAAA,UAAL,EAAhB,CAAA;AACArC,UAAAA,OAAO,GAAG4D,OAAO,CAACrB,IAAR,CAAa,UAACR,IAAD,EAAA;AAAA,YAAA,OAAUX,UAAU,CAACrC,GAAX,CAAegD,IAAI,CAAC1C,KAApB,CAAV,CAAA;AAAA,WAAb,CAAV,CAAA;AACD,SAAA;AACF,OAAA;;AACD,MAAO,OAAA,CAAC,CAACW,OAAT,CAAA;AACD,KAAA;AAtZH,GAAA,EAAA;AAAA,IAAA,GAAA,EAAA,iBAAA;AAAA,IAAA,KAAA,EAuZE,SAAkB,eAAA,GAAA;AAChB,MAAA,IAAQf,QAAR,GAA2B,IAA3B,CAAQA,QAAR;AAAA,UAAkBR,IAAlB,GAA2B,IAA3B,CAAkBA,IAAlB,CAAA;AACA,MAAA,IAAQyC,aAAR,GAA0BzC,IAAI,CAACG,MAA/B,CAAQsC,aAAR,CAAA;;AACA,MAAA,IAAIA,aAAJ,EAAmB;AACjB,QAAA,OAAO,KAAP,CAAA;AACD,OAAA;;AACD,MAAIF,IAAAA,aAAa,GAAG,KAApB,CAAA;;AACA,MAAA,IAAIL,KAAK,CAACC,OAAN,CAAc3B,QAAd,CAAJ,EAA6B;AAC3B,QAAI4F,IAAAA,YAAY,GAAG,IAAnB,CAAA;AACA7D,QAAAA,aAAa,GAAG/B,QAAQ,CAACsD,IAAT,CAAc,UAACR,IAAD,EAAU;AACtC,UAAA,IAAIA,IAAI,CAAC+C,eAAL,EAAJ,EAA4B;AAC1B,YAAA,OAAO,IAAP,CAAA;AACD,WAAA;;AACD,UAAID,IAAAA,YAAY,KAAK,IAArB,EAA2B;AACzBA,YAAAA,YAAY,GAAG9C,IAAI,CAACZ,SAAL,EAAf,CAAA;AACD,WAAA;;AACD,UAAA,IAAI0D,YAAY,KAAK9C,IAAI,CAACZ,SAAL,EAArB,EAAuC;AACrC,YAAA,OAAO,IAAP,CAAA;AACD,WAAA;;AACD,UAAA,OAAO,KAAP,CAAA;AACD,SAXe,CAAhB,CAAA;AAYD,OAAA;;AACD,MAAA,OAAOH,aAAP,CAAA;AACD,KAAA;AA9aH,GAAA,EAAA;AAAA,IAAA,GAAA,EAAA,SAAA;AAAA,IAAA,KAAA,EA+aE,SAAU,OAAA,GAAA;AACR,MAAA,IAAM2B,QAAQ,GAAG,IAAKK,CAAAA,WAAL,EAAjB,CAAA;AACA,MAAA,OAAOL,QAAQ,CAAC,CAAD,CAAR,KAAgB,IAAvB,CAAA;AACD,KAAA;AAlbH,GAAA,EAAA;AAAA,IAAA,GAAA,EAAA,QAAA;AAAA,IAAA,KAAA,EAmbE,SAAS,MAAA,GAAA;AACP,MAAA,IAAMA,QAAQ,GAAG,IAAKK,CAAAA,WAAL,EAAjB,CAAA;AACA,MAAOL,OAAAA,QAAQ,CAACA,QAAQ,CAACf,MAAT,GAAkB,CAAnB,CAAR,KAAkC,IAAzC,CAAA;AACD,KAAA;AAtbH,GAAA,EAAA;AAAA,IAAA,GAAA,EAAA,QAAA;AAAA,IAAA,KAAA,EAubE,SAAS,MAAA,GAAA;AACP,MAAImD,IAAAA,MAAM,GAAG,KAAb,CAAA;;AACA,MAAA,IAAIpE,KAAK,CAACC,OAAN,CAAc,IAAK3B,CAAAA,QAAnB,CAAJ,EAAkC;AAChC8F,QAAAA,MAAM,GAAG,IAAA,CAAK9F,QAAL,CAAc2C,MAAd,IAAwB,CAAjC,CAAA;AACD,OAFD,MAEO;AACLmD,QAAAA,MAAM,GAAG,CAAC,IAAA,CAAK9F,QAAf,CAAA;AACD,OAAA;;AACD,MAAA,OAAO8F,MAAP,CAAA;AACD,KAAA;AA/bH,GAAA,EAAA;AAAA,IAAA,GAAA,EAAA,MAAA;AAAA,IAgcE,KAAA,EAAA,SAAA,IAAA,CAAKC,SAAL,EAAgB;AACd,MAAKpF,IAAAA,CAAAA,UAAL,GAAkBoF,SAAlB,CAAA;AACA,MAAA,IAAA,CAAKjF,QAAL,GAAgB,IAAK0E,CAAAA,UAAL,EAAhB,CAAA;AACA,MAAA,IAAA,CAAKpE,OAAL,GAAe,IAAK4E,CAAAA,SAAL,EAAf,CAAA;AACD,KAAA;AApcH,GAAA,EAAA;AAAA,IAAA,GAAA,EAAA,eAAA;AAAA,IAAA,KAAA,EAqcE,SAAgB,aAAA,GAAA;AACd,MAAA,IAAA,CAAKxE,MAAL,EAAA,CAAA;;AACA,MAAA,IAAI,KAAKV,QAAL,IAAiB,KAAKd,QAAL,KAAkB,IAAvC,EAA6C;AAC3C,QAAA,IAAA,CAAK8B,YAAL,EAAA,CAAA;AACD,OAAA;AACF,KAAA;AA1cH,GAAA,EAAA;AAAA,IAAA,GAAA,EAAA,gBAAA;AAAA,IAAA,KAAA,EA2cE,SAAiB,cAAA,GAAA;AACf,MAAA,OAAO,KAAKmE,WAAL,CAAiB,CAAC,IAAKT,CAAAA,UAAL,EAAlB,CAAP,CAAA;AACD,KAAA;AA7cH,GAAA,EAAA;AAAA,IAAA,GAAA,EAAA,aAAA;AAAA,IAAA,KAAA,EA8cE,SAAY1E,WAAAA,CAAAA,QAAZ,EAAsBoF,IAAtB,EAA4B;AAC1B,MAAA,IAAQ1G,IAAR,GAAiB,IAAjB,CAAQA,IAAR,CAAA;;AACA,MAAA,IAAM2G,OAAO,GAAA,aAAA,CAAA;AACXC,QAAAA,QAAQ,EAAE,KAAA;AADC,OAAA,EAERF,IAFQ,CAAb,CAAA;;AAIA,MAAA,IAAIR,GAAG,GAAGlG,IAAI,CAAC8C,WAAf,CAAA;;AACA,MAAA,IAAI,CAAC6D,OAAO,CAACC,QAAb,EAAuB;AACrBV,QAAAA,GAAG,GAAG,IAAIW,GAAJ,CAAQ7G,IAAI,CAAC8C,WAAb,CAAN,CAAA;AACD,OAAA;;AACD,MAAA,IAAIxB,QAAJ,EAAc;AACZ,QAAMwF,IAAAA,iBAAiB,GAAG,EAA1B,CAAA;AACAA,QAAAA,iBAAiB,CAAC5D,IAAlB,CAAuB,IAAvB,CAAA,CAAA;;AACA,QAAA,IAAI5C,GAAG,CAACN,IAAD,EAAO,qBAAP,CAAP,EAAsC;AACpC,UAAA,IAAA,CAAK4D,UAAL,EAAkBR,CAAAA,OAAlB,CAA0B,UAACE,IAAD,EAAU;AAClCwD,YAAAA,iBAAiB,CAAC5D,IAAlB,CAAuBI,IAAvB,CAAA,CAAA;AACD,WAFD,CAAA,CAAA;AAGD,SAAA;;AACDwD,QAAAA,iBAAiB,CAAC1D,OAAlB,CAA0B,UAACE,IAAD,EAAU;AAClC,UAAIyD,IAAAA,aAAa,GAAG,KAApB,CAAA;;AACA,UAAIzD,IAAAA,IAAI,CAACpD,MAAT,EAAiB;AACf6G,YAAAA,aAAa,GAAGzD,IAAI,CAACpD,MAAL,CAAY6G,aAAZ,EAAhB,CAAA;AACD,WAFD,MAEO;AAAA,YAAA,IAAA,YAAA,CAAA;;AACLA,YAAAA,aAAa,GAAG/G,IAAH,KAAGA,IAAAA,IAAAA,IAAH,KAAGA,KAAAA,CAAAA,GAAAA,KAAAA,CAAAA,GAAAA,CAAAA,YAAAA,GAAAA,IAAI,CAAEG,MAAT,MAAG,IAAA,IAAA,YAAA,KAAA,KAAA,CAAA,GAAA,KAAA,CAAA,GAAA,YAAA,CAAcV,WAA9B,CAAA;AACD,WAAA;;AACD,UAAA,IAAIsH,aAAJ,EAAmB;AACjB,YAAA,IAAM7C,QAAQ,GAAGZ,IAAI,CAACiB,WAAL,EAAjB,CAAA;AACAL,YAAAA,QAAQ,CAACd,OAAT,CAAiB,UAAC4D,KAAD,EAAW;AAC1Bd,cAAAA,GAAG,CAAA,QAAA,CAAH,CAAWc,KAAK,CAACpG,KAAjB,CAAA,CAAA;AACD,aAFD,CAAA,CAAA;AAGD,WAAA;;AACDsF,UAAAA,GAAG,CAAC1E,GAAJ,CAAQ8B,IAAI,CAAC1C,KAAb,EAAoB,IAApB,CAAA,CAAA;AACD,SAdD,CAAA,CAAA;AAeD,OAvBD,MAuBO;AACLsF,QAAAA,GAAG,CAAA,QAAA,CAAH,CAAW,IAAA,CAAKtF,KAAhB,CAAA,CAAA;AACD,OAAA;;AACD,MAAI+F,IAAAA,OAAO,CAACC,QAAZ,EAAsB;AACpB,QAAA,IAAA,CAAKK,aAAL,EAAA,CAAA;AACA,QAAA,IAAA,CAAKjF,MAAL,EAAA,CAAA;AACA,QAAA,IAAA,CAAKkF,cAAL,EAAA,CAAA;AACD,OAAA;;AACD,MAAA,OAAOlH,IAAI,CAACmH,WAAL,CAAiBjB,GAAjB,CAAP,CAAA;AACD,KAAA;AAxfH,GAAA,EAAA;AAAA,IAAA,GAAA,EAAA,eAAA;AAAA,IAAA,KAAA,EAyfE,SAAgB,aAAA,GAAA;AACd,MAAA,OAAO,KAAKkB,UAAL,CAAgB,CAAC,IAAKC,CAAAA,SAAL,EAAjB,CAAP,CAAA;AACD,KAAA;AA3fH,GAAA,EAAA;AAAA,IAAA,GAAA,EAAA,YAAA;AAAA,IAAA,KAAA,EA4fE,SAAWhG,UAAAA,CAAAA,OAAX,EAAoBqF,IAApB,EAA0B;AACxB,MAAA,IAAQ1G,IAAR,GAAiB,IAAjB,CAAQA,IAAR,CAAA;;AACA,MAAA,IAAM2G,OAAO,GAAA,aAAA,CAAA;AACXC,QAAAA,QAAQ,EAAE,KAAA;AADC,OAAA,EAERF,IAFQ,CAAb,CAAA;;AAIA,MAAA,IAAMvG,MAAM,GAAGH,IAAI,CAACG,MAAL,IAAe,EAA9B,CAAA;AACA,MAAA,IAAI+F,GAAG,GAAGlG,IAAI,CAACgD,UAAf,CAAA;;AACA,MAAA,IAAI,CAAC2D,OAAO,CAACC,QAAb,EAAuB;AACrBV,QAAAA,GAAG,GAAG,IAAIW,GAAJ,CAAQ7G,IAAI,CAACgD,UAAb,CAAN,CAAA;AACD,OAAA;;AACD,MAAI,IAAA,IAAA,CAAKsE,WAAL,EAAJ,EAAwB;AACtB,QAAA,IAAIjG,OAAJ,EAAa;AACX,UAAA,IAAI,CAAClB,MAAM,CAACoH,cAAZ,EAA4B;AAC1BrB,YAAAA,GAAG,CAACsB,KAAJ,EAAA,CAAA;AACD,WAAA;;AACDtB,UAAAA,GAAG,CAAC1E,GAAJ,CAAQ,IAAKZ,CAAAA,KAAb,EAAoB,IAApB,CAAA,CAAA;AACD,SALD,MAKO;AACLsF,UAAAA,GAAG,CAAA,QAAA,CAAH,CAAW,IAAA,CAAKtF,KAAhB,CAAA,CAAA;AACD,SAAA;AACF,OAAA;;AACD,MAAI+F,IAAAA,OAAO,CAACC,QAAZ,EAAsB;AACpB,QAAA,IAAA,CAAK5E,MAAL,EAAA,CAAA;AACD,OAAA;;AACD,MAAA,OAAOhC,IAAI,CAACyH,UAAL,CAAgBvB,GAAhB,CAAP,CAAA;AACD,KAAA;AArhBH,GAAA,EAAA;AAAA,IAAA,GAAA,EAAA,eAAA;AAAA,IAAA,KAAA,EAshBE,SAAgB,aAAA,GAAA;AACd,MAAA,OAAO,KAAKwB,UAAL,CAAgB,CAAC,IAAKhF,CAAAA,SAAL,EAAjB,CAAP,CAAA;AACD,KAAA;AAxhBH,GAAA,EAAA;AAAA,IAAA,GAAA,EAAA,YAAA;AAAA,IAAA,KAAA,EAyhBE,SAAWnB,UAAAA,CAAAA,OAAX,EAAoBmF,IAApB,EAA0B;AACxB,MAAA,IAAQ1G,IAAR,GAAiB,IAAjB,CAAQA,IAAR,CAAA;AACA,MAAA,IAAMG,MAAM,GAAGH,IAAI,CAACG,MAAL,IAAe,EAA9B,CAAA;;AACA,MAAA,IAAMwG,OAAO,GAAA,aAAA,CAAA;AACXC,QAAAA,QAAQ,EAAE,KAAA;AADC,OAAA,EAERF,IAFQ,CAAb,CAAA;;AAIA,MAAA,IAAIR,GAAG,GAAGlG,IAAI,CAAC2C,UAAf,CAAA;;AACA,MAAA,IAAI,CAACgE,OAAO,CAACC,QAAb,EAAuB;AACrBV,QAAAA,GAAG,GAAG,IAAIW,GAAJ,CAAQ7G,IAAI,CAAC2C,UAAb,CAAN,CAAA;AACD,OAAA;;AACD,MAAI,IAAA,IAAA,CAAKgF,WAAL,EAAsBpG,IAAAA,OAAO,KAAK,IAAKmB,CAAAA,SAAL,EAAtC,EAAwD;AACtD,QAAIvC,IAAAA,MAAM,CAACsC,aAAX,EAA0B;AACxB,UAAA,IAAIlB,OAAJ,EAAa;AACX2E,YAAAA,GAAG,CAAC1E,GAAJ,CAAQ,IAAKZ,CAAAA,KAAb,EAAoB,IAApB,CAAA,CAAA;AACD,WAFD,MAEO;AACLsF,YAAAA,GAAG,CAAA,QAAA,CAAH,CAAW,IAAA,CAAKtF,KAAhB,CAAA,CAAA;AACD,WAAA;AACF,SAND,MAMO;AACL,UAAA,IAAMJ,QAAQ,GAAG,IAAK6D,CAAAA,IAAL,EAAjB,CAAA;AACA7D,UAAAA,QAAQ,CAAC4C,OAAT,CAAiB,UAACE,IAAD,EAAU;AACzB,YAAA,IAAI/B,OAAJ,EAAa;AACX2E,cAAAA,GAAG,CAAC1E,GAAJ,CAAQ8B,IAAI,CAAC1C,KAAb,EAAoB,IAApB,CAAA,CAAA;AACD,aAFD,MAEO;AACLsF,cAAAA,GAAG,CAAA,QAAA,CAAH,CAAW5C,IAAI,CAAC1C,KAAhB,CAAA,CAAA;AACD,aAAA;AACF,WAND,CAAA,CAAA;AAOA,UAAA,IAAMuE,OAAO,GAAG,IAAKvB,CAAAA,UAAL,EAAhB,CAAA;AACAuB,UAAAA,OAAO,CAAC/B,OAAR,CAAgB,UAACE,IAAD,EAAU;AACxB4C,YAAAA,GAAG,CAAA,QAAA,CAAH,CAAW5C,IAAI,CAAC1C,KAAhB,CAAA,CAAA;AACD,WAFD,CAAA,CAAA;AAGD,SAAA;AACF,OAAA;;AACD,MAAI+F,IAAAA,OAAO,CAACC,QAAZ,EAAsB;AACpB,QAAIzG,IAAAA,MAAM,CAACsC,aAAX,EAA0B;AACxB,UAAA,IAAA,CAAKD,aAAL,EAAA,CAAA;AACD,SAFD,MAEO;AACL,UAAMoF,IAAAA,YAAY,GAAG5H,IAAI,CAAC6H,eAAL,CAAqB,CAAC,IAAA,CAAKjH,KAAN,CAArB,CAArB,CAAA;AACAgH,UAAAA,YAAY,CAACxE,OAAb,CAAqB,UAACE,IAAD,EAAU;AAC7BA,YAAAA,IAAI,CAACd,aAAL,EAAA,CAAA;AACD,WAFD,CAAA,CAAA;AAGD,SAAA;AACF,OAAA;;AACD,MAAA,OAAOxC,IAAI,CAAC8H,UAAL,CAAgB5B,GAAhB,CAAP,CAAA;AACD,KAAA;AArkBH,GAAA,EAAA;AAAA,IAAA,GAAA,EAAA,QAAA;AAAA,IAAA,KAAA,EAskBE,SAAS,MAAA,GAAA;AACP,MAAA,IAAA,CAAKvE,KAAL,GAAa,IAAKkB,CAAAA,QAAL,EAAb,CAAA;AACA,MAAA,IAAA,CAAKxB,OAAL,GAAe,IAAKgG,CAAAA,SAAL,EAAf,CAAA;AACA,MAAA,IAAA,CAAK/F,QAAL,GAAgB,IAAK0E,CAAAA,UAAL,EAAhB,CAAA;AACA,MAAA,IAAA,CAAKlF,WAAL,GAAmB,IAAK6G,CAAAA,WAAL,EAAnB,CAAA;AACA,MAAA,IAAA,CAAK/F,OAAL,GAAe,IAAK4E,CAAAA,SAAL,EAAf,CAAA;AACA,MAAA,IAAA,CAAKtF,QAAL,GAAgB,IAAK2E,CAAAA,MAAL,EAAhB,CAAA;AACA,MAAA,IAAA,CAAK7E,SAAL,GAAiB,IAAK+G,CAAAA,OAAL,EAAjB,CAAA;AACA,MAAA,IAAA,CAAK9G,QAAL,GAAgB,IAAK+G,CAAAA,MAAL,EAAhB,CAAA;AACA,MAAA,IAAA,CAAKjH,QAAL,GAAgB,IAAKuF,CAAAA,MAAL,EAAhB,CAAA;AACA,MAAA,IAAA,CAAKtG,IAAL,CAAUkF,OAAV,CAAkB,IAAlB,CAAA,CAAA;AACD,KAAA;AAjlBH,GAAA,EAAA;AAAA,IAAA,GAAA,EAAA,eAAA;AAAA,IAAA,KAAA,EAklBE,SAAgB,aAAA,GAAA;AACd,MAAA,IAAQlF,IAAR,GAAiB,IAAjB,CAAQA,IAAR,CAAA;AACA,MAAA,IAAA,CAAKc,WAAL,GAAmB,IAAK6G,CAAAA,WAAL,EAAnB,CAAA;;AACA,MAAA,IAAI,KAAK7G,WAAL,IAAoB,CAAC,IAAA,CAAKlB,QAA9B,EAAwC;AACtC,QAAA,IAAA,CAAK2B,OAAL,GAAe,IAAKmB,CAAAA,SAAL,EAAf,CAAA;;AACA,QAAI,IAAA,IAAA,CAAKnB,OAAT,EAAkB;AAChBvB,UAAAA,IAAI,CAAC2C,UAAL,CAAgBnB,GAAhB,CAAoB,IAAA,CAAKZ,KAAzB,EAAgC,IAAhC,CAAA,CAAA;AACD,SAAA;;AACD,QAAA,IAAA,CAAK2B,aAAL,GAAqB,IAAK8D,CAAAA,eAAL,EAArB,CAAA;AACArG,QAAAA,IAAI,CAACkF,OAAL,CAAa,IAAb,CAAA,CAAA;AACD,OAAA;AACF,KAAA;AA7lBH,GAAA,EAAA;AAAA,IAAA,GAAA,EAAA,gBAAA;AAAA,IAAA,KAAA,EA8lBE,SAAiB,cAAA,GAAA;AACf,MAAA,IAAQ1E,QAAR,GAAqB,IAArB,CAAQA,QAAR,CAAA;;AACA,MAAA,IAAI0B,KAAK,CAACC,OAAN,CAAc3B,QAAd,CAAJ,EAA6B;AAC3BA,QAAAA,QAAQ,CAAC4C,OAAT,CAAiB,UAACE,IAAD,EAAU;AACzBA,UAAAA,IAAI,CAACtB,MAAL,EAAA,CAAA;AACAsB,UAAAA,IAAI,CAACd,aAAL,EAAA,CAAA;AACAc,UAAAA,IAAI,CAAC4D,cAAL,EAAA,CAAA;AACD,SAJD,CAAA,CAAA;AAKD,OAAA;AACF,KAAA;AAvmBH,GAAA,EAAA;AAAA,IAAA,GAAA,EAAA,eAAA;AAAA,IAAA,KAAA,EAwmBE,SAAgB,aAAA,GAAA;AACd,MAAA,IAAQhH,MAAR,GAAmB,IAAnB,CAAQA,MAAR,CAAA;;AACA,MAAA,IAAIA,MAAJ,EAAY;AACVA,QAAAA,MAAM,CAAC8B,MAAP,EAAA,CAAA;AACA9B,QAAAA,MAAM,CAACsC,aAAP,EAAA,CAAA;AACAtC,QAAAA,MAAM,CAAC2E,aAAP,EAAA,CAAA;AACD,OAAA;AACF,KAAA;AA/mBH,GAAA,EAAA;AAAA,IAAA,GAAA,EAAA,eAAA;AAAA,IAAA,KAAA,EAgnBE,SAAgB,aAAA,GAAA;AACd,MAAA,IAAQ7E,IAAR,GAAiB,IAAjB,CAAQA,IAAR,CAAA;AACA,MAAM4H,IAAAA,YAAY,GAAG5H,IAAI,CAAC6H,eAAL,CAAqB,CAAC,IAAA,CAAKjH,KAAN,CAArB,CAArB,CAAA;AACAgH,MAAAA,YAAY,CAACxE,OAAb,CAAqB,UAACE,IAAD,EAAU;AAC7BA,QAAAA,IAAI,CAACtB,MAAL,EAAA,CAAA;AACAsB,QAAAA,IAAI,CAACd,aAAL,EAAA,CAAA;AACD,OAHD,CAAA,CAAA;AAIAxC,MAAAA,IAAI,CAACiC,MAAL,EAAA,CAAA;AACD,KAAA;AAxnBH,GAAA,EAAA;AAAA,IAAA,GAAA,EAAA,MAAA;AAAA,IAAA,KAAA,EAynBE,SAAO,IAAA,GAAA;AACL,MAAA,IAAQzB,QAAR,GAAqB,IAArB,CAAQA,QAAR,CAAA;AACA,MAAIyC,IAAAA,IAAI,GAAG,EAAX,CAAA;AACAA,MAAAA,IAAI,CAACC,IAAL,CAAU,IAAV,CAAA,CAAA;;AACA,MAAIhB,IAAAA,KAAK,CAACC,OAAN,CAAc3B,QAAd,CAA2BA,IAAAA,QAAQ,CAAC2C,MAAT,GAAkB,CAAjD,EAAoD;AAClD3C,QAAAA,QAAQ,CAAC4C,OAAT,CAAiB,UAACE,IAAD,EAAU;AACzBL,UAAAA,IAAI,GAAGA,IAAI,CAACgF,MAAL,CAAY3E,IAAI,CAACe,IAAL,EAAZ,CAAP,CAAA;AACD,SAFD,CAAA,CAAA;AAGD,OAAA;;AACD,MAAA,OAAOpB,IAAP,CAAA;AACD,KAAA;AAnoBH,GAAA,EAAA;AAAA,IAAA,GAAA,EAAA,UAAA;AAAA,IAAA,KAAA,EAooBE,SAAW,QAAA,GAAA;AACT,MAAA,IAAMpC,KAAN,GAAgB,IAAhB,CAAMA,KAAN,CAAA;;AACA,MAAI,IAAA,CAACA,KAAL,EAAY;AACVA,QAAAA,KAAK,GAAGqH,eAAe,CAAC,IAAD,CAAvB,CAAA;AACA,QAAKrH,IAAAA,CAAAA,KAAL,GAAaA,KAAb,CAAA;AACD,OAAA;;AACDsH,MAAAA,eAAe,CAACtH,KAAD,EAAQ,IAAR,CAAf,CAAA;AACA,MAAA,OAAOA,KAAP,CAAA;AACD,KAAA;AA5oBH,GAAA,CAAA,CAAA,CAAA;;AAAA,EAAA,OAAA,QAAA,CAAA;AAAA,CAAA;;;;"}