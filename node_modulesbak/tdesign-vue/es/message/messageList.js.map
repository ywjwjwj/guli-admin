{"version":3,"file":"messageList.js","sources":["../../src/message/messageList.tsx"],"sourcesContent":["import Vue, { VNode } from 'vue';\nimport { PLACEMENT_OFFSET } from './const';\nimport TMessage from './message';\nimport { prefix } from '../config';\nimport { MessageOptions } from './type';\nimport { Styles } from '../common';\n\nexport const DEFAULT_Z_INDEX = 6000;\n\nconst getUniqueId = (() => {\n  let id = 0;\n  return () => {\n    id += 1;\n    return id;\n  };\n})();\n\nconst name = `${prefix}-message__list`;\n\nexport const MessageList = Vue.extend({\n  name,\n  components: { TMessage },\n  props: {\n    zIndex: Number,\n    placement: String,\n  },\n  data() {\n    return {\n      list: [],\n    };\n  },\n  computed: {\n    styles(): Styles {\n      return {\n        ...PLACEMENT_OFFSET[this.placement],\n        zIndex: this.zIndex !== DEFAULT_Z_INDEX ? this.zIndex : DEFAULT_Z_INDEX,\n      };\n    },\n  },\n  methods: {\n    add(msg: MessageOptions): number {\n      const mg = {\n        ...msg,\n        key: getUniqueId(),\n        placement: this.placement,\n      };\n      this.list.push(mg);\n      return this.list.length - 1;\n    },\n    remove(index: number) {\n      this.list.splice(index, 1);\n    },\n    removeAll() {\n      this.list = [];\n    },\n    getOffset(val: string | number) {\n      if (!val) return;\n      return isNaN(Number(val)) ? val : `${val}px`;\n    },\n    msgStyles(item: { offset: object }) {\n      return (\n        item.offset && {\n          position: 'relative',\n          left: this.getOffset(item.offset[0]),\n          top: this.getOffset(item.offset[1]),\n        }\n      );\n    },\n    getListeners(index: number) {\n      return {\n        'close-btn-click': () => this.remove(index),\n        'duration-end': () => this.remove(index),\n      };\n    },\n  },\n  render(): VNode {\n    if (!this.list.length) return;\n    return (\n      <div class={name} style={this.styles}>\n        {this.list.map((item, index) => (\n          <t-message\n            key={item.key}\n            style={this.msgStyles(item)}\n            {...{ props: item }}\n            {...{ on: this.getListeners(index) }}\n          />\n        ))}\n      </div>\n    );\n  },\n});\n\nexport default MessageList;\n"],"names":["DEFAULT_Z_INDEX","getUniqueId","id","name","prefix","MessageList","Vue","extend","components","TMessage","props","zIndex","Number","placement","String","data","list","computed","styles","PLACEMENT_OFFSET","methods","add","msg","mg","key","push","length","remove","index","splice","removeAll","getOffset","val","isNaN","msgStyles","item","offset","position","left","top","getListeners","render","map"],"mappings":"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"}