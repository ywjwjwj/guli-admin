{"version":3,"file":"checkbox.js","sources":["../../src/checkbox/checkbox.tsx"],"sourcesContent":["import Vue, { VNode, VueConstructor } from 'vue';\nimport { renderContent } from '../utils/render-tnode';\nimport { prefix } from '../config';\nimport CLASSNAMES from '../utils/classnames';\nimport checkboxProps from './props';\nimport Group from './group';\nimport { omit } from '../utils/helper';\nimport { ClassName } from '../common';\nimport { emitEvent } from '../utils/event';\nimport { TdCheckboxProps } from './type';\n\nconst name = `${prefix}-checkbox`;\n\ninterface CheckboxInstance extends Vue {\n  checkboxGroup: InstanceType<typeof Group>;\n}\n\nexport default (Vue as VueConstructor<CheckboxInstance>).extend({\n  name: 'TCheckbox',\n\n  inheritAttrs: false,\n\n  props: { ...checkboxProps },\n\n  inject: {\n    checkboxGroup: { default: undefined },\n  },\n\n  data() {\n    return {\n      // 表单控制禁用态时的变量\n      formDisabled: undefined,\n    };\n  },\n\n  computed: {\n    labelClasses(): ClassName {\n      return [\n        `${name}`,\n        {\n          [CLASSNAMES.STATUS.checked]: this.checked$,\n          [CLASSNAMES.STATUS.disabled]: this.disabled$,\n          [CLASSNAMES.STATUS.indeterminate]: this.indeterminate$,\n        },\n      ];\n    },\n    disabled$(): boolean {\n      if (this.formDisabled) return this.formDisabled;\n      if (!this.checkAll && !this.checked$ && this.checkboxGroup?.maxExceeded) {\n        return true;\n      }\n      if (this.disabled !== undefined) return this.disabled;\n      return !!this.checkboxGroup?.disabled;\n    },\n    name$(): string {\n      return this.name || this.checkboxGroup?.name;\n    },\n    checked$(): boolean {\n      if (this.checkAll) return this.checkboxGroup?.isCheckAll;\n      return this.checkboxGroup ? !!this.checkboxGroup.checkedMap[this.value] : this.checked;\n    },\n    indeterminate$(): boolean {\n      if (this.checkAll) return this.checkboxGroup?.indeterminate;\n      return this.indeterminate;\n    },\n  },\n\n  render(): VNode {\n    return (\n      <label class={this.labelClasses}>\n        <input\n          type=\"checkbox\"\n          on={{ ...omit(this.$listeners, ['checked', 'change']) }}\n          class={`${name}__former`}\n          disabled={this.disabled$}\n          readonly={this.readonly}\n          indeterminate={this.indeterminate$}\n          name={this.name$}\n          value={this.value}\n          checked={this.checked$}\n          onChange={this.handleChange}\n        ></input>\n        <span class={`${name}__input`}></span>\n        <span class={`${name}__label`}>{renderContent(this, 'default', 'label')}</span>\n      </label>\n    );\n  },\n\n  methods: {\n    handleChange(e: Event) {\n      const value = !this.checked$;\n      emitEvent<Parameters<TdCheckboxProps['onChange']>>(this, 'change', value, { e });\n      e.stopPropagation();\n      this?.checkboxGroup?.$emit('checked-change', {\n        checked: value,\n        checkAll: this.checkAll,\n        e,\n        option: this.$props,\n      });\n    },\n  },\n});\n"],"names":["name","prefix","Vue","extend","inheritAttrs","props","checkboxProps","inject","checkboxGroup","data","formDisabled","computed","labelClasses","CLASSNAMES","STATUS","checked","checked$","disabled","disabled$","indeterminate","indeterminate$","checkAll","maxExceeded","name$","isCheckAll","checkedMap","value","render","_mergeJSXProps","omit","$listeners","readonly","handleChange","renderContent","methods","e","emitEvent","stopPropagation","$emit","option","$props"],"mappings":"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"}