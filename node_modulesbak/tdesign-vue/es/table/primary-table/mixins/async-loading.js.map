{"version":3,"file":"async-loading.js","sources":["../../../../src/table/primary-table/mixins/async-loading.tsx"],"sourcesContent":["import Vue, { VNode } from 'vue';\nimport isString from 'lodash/isString';\nimport primaryTableProps from '../../primary-table-props';\nimport Loading from '../../../loading';\nimport { prefix } from '../../../config';\nimport { STATUS_CLASSNAMES } from '../../../utils/classnames';\nimport { emitEvent } from '../../../utils/event';\nimport { TdPrimaryTableProps } from '../../type';\nimport { ClassName } from '../../../common';\nimport { renderTNodeJSX } from '../../../utils/render-tnode';\n\ntype AsyncLoadingClickParams = Parameters<TdPrimaryTableProps['onAsyncLoadingClick']>;\n\nexport const ASYNC_LOADING_ROW = 'async-loading-row';\n\nexport default Vue.extend({\n  name: `${prefix}-primary-table-async-loading`,\n\n  props: {\n    asyncLoading: primaryTableProps.asyncLoading,\n  },\n\n  data() {\n    return {\n      pullDownLoading: false,\n    };\n  },\n\n  computed: {\n    classes(): ClassName {\n      return [\n        `${prefix}-table__async-loading`,\n        {\n          [STATUS_CLASSNAMES.loading]: this.asyncLoading === 'loading',\n          [STATUS_CLASSNAMES.loadMore]: this.asyncLoading === 'load-more',\n        },\n      ];\n    },\n  },\n\n  methods: {\n    onLoadClick() {\n      if (typeof this.asyncLoading !== 'string') return;\n      emitEvent<AsyncLoadingClickParams>(this, 'async-loading-click', { status: this.asyncLoading });\n    },\n    renderAsyncLoadingRow(): VNode {\n      const asyncLoadingNode = renderTNodeJSX(this, 'asyncLoading');\n      if (isString(asyncLoadingNode)) {\n        const { asyncLoading } = this;\n        const loadingText = {\n          'load-more': '点击加载更多',\n          loading: '正在加载中，请稍后',\n        }[String(asyncLoading)];\n        return (\n          <div class={this.classes} onClick={this.onLoadClick}>\n            {<Loading loading={asyncLoading === 'loading'} text={loadingText} />}\n          </div>\n        );\n      }\n      if (![null, false, undefined].includes(asyncLoadingNode)) {\n        return (\n          <div class={this.classes} onClick={this.onLoadClick}>\n            {asyncLoadingNode}\n          </div>\n        );\n      }\n      return null;\n    },\n  },\n});\n"],"names":["ASYNC_LOADING_ROW","Vue","extend","name","prefix","props","asyncLoading","primaryTableProps","data","pullDownLoading","computed","classes","STATUS_CLASSNAMES","loading","loadMore","methods","onLoadClick","emitEvent","status","renderAsyncLoadingRow","asyncLoadingNode","renderTNodeJSX","isString","loadingText","String","includes"],"mappings":"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"}