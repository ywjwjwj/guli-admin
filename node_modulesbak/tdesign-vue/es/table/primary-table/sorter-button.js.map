{"version":3,"file":"sorter-button.js","sources":["../../../src/table/primary-table/sorter-button.tsx"],"sourcesContent":["import Vue from 'vue';\nimport { PropType } from 'vue/types/umd';\nimport isFunction from 'lodash/isFunction';\nimport { ChevronDownIcon } from 'tdesign-icons-vue';\nimport mixins from '../../utils/mixins';\nimport getConfigReceiverMixins, { TableConfig } from '../../config-provider/config-receiver';\nimport { SortType } from '../type';\nimport { prefix } from '../../config';\nimport Tooltip from '../../tooltip';\nimport { Styles } from '../../common';\n\nconst tooltips = {\n  asc: '点击升序',\n  desc: '点击降序',\n  undefined: '点击取消排序',\n};\n\ntype SortTypeEnums = Array<'desc' | 'asc'>;\n\nexport default mixins(getConfigReceiverMixins<Vue, TableConfig>('table')).extend({\n  name: `${prefix}-sorter-button`,\n  props: {\n    sortType: {\n      type: String as PropType<SortType>,\n      default: null,\n    },\n    sortOrder: {\n      type: String,\n      default: (): string => '',\n    },\n    nextSortOrder: {\n      type: String,\n      required: false,\n    },\n  },\n  computed: {\n    allowSortTypes(): SortTypeEnums {\n      return this.sortType === 'all' ? ['asc', 'desc'] : [this.sortType];\n    },\n  },\n  methods: {\n    getSortIcon(direction: string, className: string) {\n      const icon = isFunction(this.global.sortIcon) ? (\n        this.global.sortIcon(this.$createElement)\n      ) : (\n        <ChevronDownIcon size=\"16px\" />\n      );\n      let style: Styles = {\n        left: '0px',\n      };\n      if (direction === 'asc') {\n        style = {\n          transform: 'rotate(-180deg)',\n          top: '-1px',\n          ...style,\n        };\n      } else {\n        style.bottom = '-1px';\n      }\n      const sortClassName = [`${prefix}-table__sort-icon`, className, `${prefix}-table-sort-${direction}`];\n      return (\n        <span style={style} class={sortClassName}>\n          {icon}\n        </span>\n      );\n    },\n  },\n  render() {\n    const {\n      $listeners, allowSortTypes, sortOrder, nextSortOrder,\n    } = this;\n    const buttonProps = {\n      on: { ...$listeners },\n      class: allowSortTypes.length > 1 ? `${prefix}-table__double-icons` : '',\n    };\n    const tips = tooltips[nextSortOrder];\n    const sortButton = allowSortTypes.map((direction: string) => {\n      const className = direction === sortOrder ? `${prefix}-table__sort-icon--active` : `${prefix}-icon-sort--default`;\n      return this.getSortIcon(direction, className);\n    });\n    return (\n      <div class={`${prefix}-table__cell--sort-trigger`} {...buttonProps}>\n        {tips ? (\n          <Tooltip style=\"line-height: 0px;position:relative;\" content={tips} showArrow={false}>\n            {sortButton}\n          </Tooltip>\n        ) : (\n          sortButton\n        )}\n      </div>\n    );\n  },\n});\n"],"names":["tooltips","asc","desc","undefined","mixins","getConfigReceiverMixins","extend","name","prefix","props","sortType","type","String","sortOrder","nextSortOrder","required","computed","allowSortTypes","methods","getSortIcon","direction","className","icon","isFunction","global","sortIcon","$createElement","style","left","transform","top","bottom","sortClassName","render","$listeners","buttonProps","on","length","tips","sortButton","map","_mergeJSXProps"],"mappings":"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"}