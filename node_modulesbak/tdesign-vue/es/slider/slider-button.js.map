{"version":3,"file":"slider-button.js","sources":["../../src/slider/slider-button.tsx"],"sourcesContent":["import Vue, { VNode, PropType, VueConstructor } from 'vue';\nimport { Styles } from '@src/common';\nimport { prefix } from '../config';\nimport Slider from './slider';\nimport Tooltip from '../tooltip/index';\nimport ITooltip from '../tooltip/tooltip';\nimport { getIEVersion } from '../_common/js/utils/helper';\nimport { TdSliderProps } from './type';\nimport { TdTooltipProps } from '../tooltip/type';\n\nconst name = `${prefix}-slider-button`;\ninterface SliderInstanceType extends Vue {\n  slider: InstanceType<typeof Slider>;\n}\n\ntype TooltipInstanceType = InstanceType<typeof ITooltip>;\n\nexport default (Vue as VueConstructor<SliderInstanceType>).extend({\n  name,\n  props: {\n    value: {\n      type: [Number, String] as PropType<TdSliderProps['value']>,\n      default: 0,\n    },\n    vertical: {\n      type: Boolean,\n      default: false,\n    },\n    popupClass: {\n      type: String,\n      default: '',\n    },\n    tooltipProps: {\n      type: [Boolean, Object] as PropType<TdSliderProps['tooltipProps']>,\n      default: true,\n    },\n  },\n  inject: {\n    slider: { default: undefined },\n  },\n  computed: {\n    placement(): string {\n      if (this.tooltipProps instanceof Object) {\n        const { placement } = this.tooltipProps;\n        if (placement) return placement;\n      }\n\n      return this.vertical ? 'right' : 'top';\n    },\n    rangeDiff(): number {\n      return this.max - this.min;\n    },\n    formatValue(): TdSliderProps['value'] {\n      return this.value;\n    },\n    disabled(): boolean {\n      return this.slider.disabled;\n    },\n    max(): number {\n      return this.slider.max;\n    },\n    min(): number {\n      return this.slider.min;\n    },\n    step(): number {\n      return this.slider.step;\n    },\n    precision(): number {\n      return this.slider.precision;\n    },\n    currentPos(): string {\n      return `${(((this.value as number) - this.min) / this.rangeDiff) * 100}%`;\n    },\n    wrapperStyle(): Styles {\n      return this.vertical ? { bottom: this.currentPos } : { left: this.currentPos };\n    },\n  },\n  data() {\n    return {\n      visible: false,\n      hovering: false,\n      dragging: false,\n      isClick: false,\n      clientX: 0,\n      clientY: 0,\n      startX: 0,\n      startY: 0,\n      currentX: 0,\n      currentY: 0,\n      startPos: 0,\n      newPos: null,\n      prevValue: this.value,\n      showTooltip: true,\n      trigger: 'hover',\n      showArrow: true,\n      overlayStyle: undefined,\n      overlayClassName: undefined,\n      attach: 'body',\n      destroyOnClose: null,\n    };\n  },\n  watch: {\n    disabled() {\n      this.handleIE();\n    },\n  },\n  mounted() {\n    this.showTooltip = !this.tooltipProps === false;\n    this.setTooltipProps();\n    this.handleIE();\n  },\n  methods: {\n    setTooltipProps() {\n      if (this.tooltipProps instanceof Object) {\n        const {\n          trigger, destroyOnClose, showArrow, overlayStyle, overlayClassName, attach,\n        } = this.tooltipProps;\n        if (!this.empty(trigger)) {\n          this.trigger = trigger;\n        }\n        this.destroyOnClose = destroyOnClose;\n        if (!this.empty(showArrow)) {\n          this.showArrow = showArrow;\n        }\n\n        this.overlayStyle = overlayStyle;\n        this.overlayClassName = overlayClassName;\n        if (!this.empty(attach)) {\n          this.attach = attach as string;\n        }\n      }\n    },\n    getTooltipProps(): TdTooltipProps {\n      if (this.tooltipProps instanceof Object) {\n        return this.tooltipProps;\n      }\n      return {};\n    },\n    handleIE() {\n      if (getIEVersion() <= 11) {\n        this.$nextTick(() => {\n          this.$el.removeAttribute('disabled');\n        });\n      }\n    },\n    showTooltipComponent() {\n      this.visible = true;\n    },\n    hideTooltipComponent() {\n      this.visible = false;\n    },\n\n    handleMouseEnter() {\n      this.hovering = true;\n      this.showTooltipComponent();\n      (this.$refs.button as HTMLElement).focus();\n    },\n    handleMouseLeave() {\n      this.hovering = false;\n      if (!this.dragging) {\n        this.hideTooltipComponent();\n      }\n    },\n    onButtonDown(event: MouseEvent) {\n      if (this.disabled) {\n        return;\n      }\n      event.preventDefault();\n      this.onDragStart(event);\n      window.addEventListener('mousemove', this.onDragging);\n      window.addEventListener('mouseup', this.onDragEnd);\n      window.addEventListener('touchmove', this.onDragging);\n      window.addEventListener('touchend', this.onDragEnd);\n      window.addEventListener('contextmenu', this.onDragEnd);\n    },\n    onNativeKeyDown(e: KeyboardEvent) {\n      const { code } = e;\n      e.preventDefault();\n      if (code === 'ArrowDown' || code === 'ArrowLeft') {\n        this.onKeyDown('sub');\n      }\n      if (code === 'ArrowUp' || code === 'ArrowRight') {\n        this.onKeyDown('add');\n      }\n    },\n    onLeftKeyDown() {\n      this.onKeyDown('sub');\n    },\n    onRightKeyDown() {\n      this.onKeyDown('add');\n    },\n    onKeyDown(state: string) {\n      if (this.disabled) {\n        return;\n      }\n      let stepLength = (this.step / this.rangeDiff) * 100;\n      if (state === 'sub') {\n        stepLength = -stepLength;\n      }\n      this.newPos = parseFloat(this.currentPos) + stepLength;\n      this.setPosition(this.newPos);\n    },\n    onDragStart(event: Event) {\n      this.dragging = true;\n      this.isClick = true;\n      const { type } = event;\n      let { clientY, clientX } = event as MouseEvent;\n      if (type === 'touchstart') {\n        const touch = (event as TouchEvent).touches;\n        [clientY, clientX] = [touch[0].clientY, touch[0].clientX];\n      }\n      if (this.vertical) {\n        this.startY = clientY;\n      } else {\n        this.startX = clientX;\n      }\n      this.startPos = parseFloat(this.currentPos);\n      this.newPos = this.startPos;\n    },\n    onDragging(e: Event) {\n      const event = e;\n      if (!this.dragging) {\n        return;\n      }\n\n      this.isClick = false;\n      this.showTooltipComponent();\n      this.slider.resetSize();\n      let diff = 0;\n\n      const parentSliderSize = this.slider.sliderSize;\n      if (this.vertical) {\n        this.currentY = (event as MouseEvent).clientY;\n        diff = this.startY - this.currentY;\n      } else {\n        this.currentX = (event as MouseEvent).clientX;\n        diff = this.currentX - this.startX;\n      }\n\n      if (event.type === 'touchmove') {\n        const touch = (event as TouchEvent).touches;\n        const [clientY, clientX] = [touch[0].clientY, touch[0].clientX];\n        this.clientY = clientY;\n        this.clientX = clientX;\n      }\n\n      diff = (diff / parentSliderSize) * 100;\n      this.newPos = this.startPos + diff;\n      this.setPosition(this.newPos);\n    },\n    onDragEnd() {\n      if (this.dragging) {\n        setTimeout(() => {\n          this.dragging = false;\n          this.hideTooltipComponent();\n        }, 0);\n        window.removeEventListener('mousemove', this.onDragging);\n        window.removeEventListener('touchmove', this.onDragging);\n        window.removeEventListener('mouseup', this.onDragEnd);\n        window.removeEventListener('touchend', this.onDragEnd);\n        window.removeEventListener('contextmenu', this.onDragEnd);\n      }\n    },\n    setPosition(pos: number) {\n      let newPos = pos;\n      if (newPos === null || isNaN(newPos)) {\n        return;\n      }\n\n      if (newPos > 100) {\n        newPos = 100;\n      } else if (newPos < 0) {\n        newPos = 0;\n      }\n      const perStepLen = (100 * this.step) / this.rangeDiff;\n      const steps = Math.round(newPos / perStepLen);\n      let value = steps * perStepLen * this.rangeDiff * 0.01;\n      value += this.min;\n      value = Number(parseFloat(`${value}`).toFixed(this.precision));\n      this.$emit('input', value);\n      this.$nextTick(() => {\n        this.showTooltipComponent();\n        this.$refs.tooltip && (this.$refs.tooltip as TooltipInstanceType).updatedTooltip();\n      });\n      if (!this.dragging && this.value !== this.prevValue) {\n        this.prevValue = this.value;\n      }\n    },\n    empty(str: any) {\n      return str === undefined || str === null;\n    },\n  },\n  render(): VNode {\n    return (\n      <div\n        ref=\"button\"\n        class={`${prefix}-slider__button-wrapper`}\n        style={this.wrapperStyle}\n        tabindex=\"0\"\n        show-tooltip={this.showTooltip}\n        onmouseenter={this.handleMouseEnter}\n        onmouseleave={this.handleMouseLeave}\n        onmousedown={this.onButtonDown}\n        ontouchstart={this.onButtonDown}\n        onfocus={this.handleMouseEnter}\n        onblur={this.handleMouseLeave}\n        onKeydown={this.onNativeKeyDown}\n      >\n        <Tooltip ref=\"tooltip\" props={this.getTooltipProps()} visible={this.visible} content={String(this.formatValue)}>\n          <div class={[`${prefix}-slider__button`, { [`${prefix}-slider__button--dragging`]: this.dragging }]} />\n        </Tooltip>\n      </div>\n    );\n  },\n});\n"],"names":["name","prefix","Vue","extend","props","value","type","Number","String","vertical","Boolean","popupClass","tooltipProps","Object","inject","slider","computed","placement","rangeDiff","max","min","formatValue","disabled","step","precision","currentPos","wrapperStyle","bottom","left","data","visible","hovering","dragging","isClick","clientX","clientY","startX","startY","currentX","currentY","startPos","newPos","prevValue","showTooltip","trigger","showArrow","overlayStyle","overlayClassName","attach","destroyOnClose","watch","handleIE","mounted","setTooltipProps","methods","empty","getTooltipProps","getIEVersion","$nextTick","$el","removeAttribute","showTooltipComponent","hideTooltipComponent","handleMouseEnter","$refs","button","focus","handleMouseLeave","onButtonDown","event","preventDefault","onDragStart","window","addEventListener","onDragging","onDragEnd","onNativeKeyDown","e","code","onKeyDown","onLeftKeyDown","onRightKeyDown","state","stepLength","parseFloat","setPosition","touch","touches","resetSize","diff","parentSliderSize","sliderSize","setTimeout","removeEventListener","pos","isNaN","perStepLen","steps","Math","round","toFixed","$emit","tooltip","updatedTooltip","str","render","_mergeJSXProps"],"mappings":";;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AAIA,IAAMA,IAAI,GAAMC,EAAAA,CAAAA,MAAAA,CAAAA,MAAN,EAAV,gBAAA,CAAA,CAAA;AACA,oBAAeC,GAAG,CAACC,MAAJ,CAAW;AACxBH,EAAAA,IAAI,EAAJA,IADwB;AAExBI,EAAAA,KAAK,EAAE;AACLC,IAAAA,KAAK,EAAE;AACLC,MAAAA,IAAI,EAAE,CAACC,MAAD,EAASC,MAAT,CADD;AAEL,MAAS,SAAA,EAAA,CAAA;AAFJ,KADF;AAKLC,IAAAA,QAAQ,EAAE;AACRH,MAAAA,IAAI,EAAEI,OADE;AAER,MAAS,SAAA,EAAA,KAAA;AAFD,KALL;AASLC,IAAAA,UAAU,EAAE;AACVL,MAAAA,IAAI,EAAEE,MADI;AAEV,MAAS,SAAA,EAAA,EAAA;AAFC,KATP;AAaLI,IAAAA,YAAY,EAAE;AACZN,MAAAA,IAAI,EAAE,CAACI,OAAD,EAAUG,MAAV,CADM;AAEZ,MAAS,SAAA,EAAA,IAAA;AAFG,KAAA;AAbT,GAFiB;AAoBxBC,EAAAA,MAAM,EAAE;AACNC,IAAAA,MAAM,EAAE;AAAE,MAAA,SAAA,EAAS,KAAK,CAAA;AAAhB,KAAA;AADF,GApBgB;AAuBxBC,EAAAA,QAAQ,EAAE;AACRC,IAAAA,SADQ,EACI,SAAA,SAAA,GAAA;AACV,MAAA,IAAI,IAAKL,CAAAA,YAAL,YAA6BC,MAAjC,EAAyC;AACvC,QAAA,IAAQI,SAAR,GAAsB,IAAKL,CAAAA,YAA3B,CAAQK,SAAR,CAAA;AACA,QAAIA,IAAAA,SAAJ,EACE,OAAOA,SAAP,CAAA;AACH,OAAA;;AACD,MAAA,OAAO,IAAKR,CAAAA,QAAL,GAAgB,OAAhB,GAA0B,KAAjC,CAAA;AACD,KARO;AASRS,IAAAA,SATQ,EASI,SAAA,SAAA,GAAA;AACV,MAAA,OAAO,IAAKC,CAAAA,GAAL,GAAW,IAAA,CAAKC,GAAvB,CAAA;AACD,KAXO;AAYRC,IAAAA,WAZQ,EAYM,SAAA,WAAA,GAAA;AACZ,MAAA,OAAO,KAAKhB,KAAZ,CAAA;AACD,KAdO;AAeRiB,IAAAA,QAfQ,EAeG,SAAA,QAAA,GAAA;AACT,MAAO,OAAA,IAAA,CAAKP,MAAL,CAAYO,QAAnB,CAAA;AACD,KAjBO;AAkBRH,IAAAA,GAlBQ,EAkBF,SAAA,GAAA,GAAA;AACJ,MAAO,OAAA,IAAA,CAAKJ,MAAL,CAAYI,GAAnB,CAAA;AACD,KApBO;AAqBRC,IAAAA,GArBQ,EAqBF,SAAA,GAAA,GAAA;AACJ,MAAO,OAAA,IAAA,CAAKL,MAAL,CAAYK,GAAnB,CAAA;AACD,KAvBO;AAwBRG,IAAAA,IAxBQ,EAwBD,SAAA,IAAA,GAAA;AACL,MAAO,OAAA,IAAA,CAAKR,MAAL,CAAYQ,IAAnB,CAAA;AACD,KA1BO;AA2BRC,IAAAA,SA3BQ,EA2BI,SAAA,SAAA,GAAA;AACV,MAAO,OAAA,IAAA,CAAKT,MAAL,CAAYS,SAAnB,CAAA;AACD,KA7BO;AA8BRC,IAAAA,UA9BQ,EA8BK,SAAA,UAAA,GAAA;AACX,MAAU,OAAA,EAAA,CAAA,MAAA,CAAA,CAAC,IAAKpB,CAAAA,KAAL,GAAa,IAAA,CAAKe,GAAnB,IAA0B,IAAA,CAAKF,SAA/B,GAA2C,GAArD,EAAA,GAAA,CAAA,CAAA;AACD,KAhCO;AAiCRQ,IAAAA,YAjCQ,EAiCO,SAAA,YAAA,GAAA;AACb,MAAO,OAAA,IAAA,CAAKjB,QAAL,GAAgB;AAAEkB,QAAAA,MAAM,EAAE,IAAKF,CAAAA,UAAAA;AAAf,OAAhB,GAA8C;AAAEG,QAAAA,IAAI,EAAE,IAAKH,CAAAA,UAAAA;AAAb,OAArD,CAAA;AACD,KAAA;AAnCO,GAvBc;AA4DxBI,EAAAA,IA5DwB,EA4DjB,SAAA,IAAA,GAAA;AACL,IAAO,OAAA;AACLC,MAAAA,OAAO,EAAE,KADJ;AAELC,MAAAA,QAAQ,EAAE,KAFL;AAGLC,MAAAA,QAAQ,EAAE,KAHL;AAILC,MAAAA,OAAO,EAAE,KAJJ;AAKLC,MAAAA,OAAO,EAAE,CALJ;AAMLC,MAAAA,OAAO,EAAE,CANJ;AAOLC,MAAAA,MAAM,EAAE,CAPH;AAQLC,MAAAA,MAAM,EAAE,CARH;AASLC,MAAAA,QAAQ,EAAE,CATL;AAULC,MAAAA,QAAQ,EAAE,CAVL;AAWLC,MAAAA,QAAQ,EAAE,CAXL;AAYLC,MAAAA,MAAM,EAAE,IAZH;AAaLC,MAAAA,SAAS,EAAE,IAAA,CAAKrC,KAbX;AAcLsC,MAAAA,WAAW,EAAE,IAdR;AAeLC,MAAAA,OAAO,EAAE,OAfJ;AAgBLC,MAAAA,SAAS,EAAE,IAhBN;AAiBLC,MAAAA,YAAY,EAAE,KAAK,CAjBd;AAkBLC,MAAAA,gBAAgB,EAAE,KAAK,CAlBlB;AAmBLC,MAAAA,MAAM,EAAE,MAnBH;AAoBLC,MAAAA,cAAc,EAAE,IAAA;AApBX,KAAP,CAAA;AAsBD,GAnFuB;AAoFxBC,EAAAA,KAAK,EAAE;AACL5B,IAAAA,QADK,EACM,SAAA,QAAA,GAAA;AACT,MAAA,IAAA,CAAK6B,QAAL,EAAA,CAAA;AACD,KAAA;AAHI,GApFiB;AAyFxBC,EAAAA,OAzFwB,EAyFd,SAAA,OAAA,GAAA;AACR,IAAA,IAAA,CAAKT,WAAL,GAAmB,CAAC,IAAK/B,CAAAA,YAAN,KAAuB,KAA1C,CAAA;AACA,IAAA,IAAA,CAAKyC,eAAL,EAAA,CAAA;AACA,IAAA,IAAA,CAAKF,QAAL,EAAA,CAAA;AACD,GA7FuB;AA8FxBG,EAAAA,OAAO,EAAE;AACPD,IAAAA,eADO,EACW,SAAA,eAAA,GAAA;AAChB,MAAA,IAAI,IAAKzC,CAAAA,YAAL,YAA6BC,MAAjC,EAAyC;AACvC,QAAA,IAAA,kBAAA,GAOI,KAAKD,YAPT;AAAA,YACEgC,OADF,sBACEA,OADF;AAAA,YAEEK,cAFF,sBAEEA,cAFF;AAAA,YAGEJ,SAHF,sBAGEA,SAHF;AAAA,YAIEC,YAJF,sBAIEA,YAJF;AAAA,YAKEC,gBALF,sBAKEA,gBALF;AAAA,YAMEC,MANF,sBAMEA,MANF,CAAA;;AAQA,QAAA,IAAI,CAAC,IAAKO,CAAAA,KAAL,CAAWX,OAAX,CAAL,EAA0B;AACxB,UAAKA,IAAAA,CAAAA,OAAL,GAAeA,OAAf,CAAA;AACD,SAAA;;AACD,QAAKK,IAAAA,CAAAA,cAAL,GAAsBA,cAAtB,CAAA;;AACA,QAAA,IAAI,CAAC,IAAKM,CAAAA,KAAL,CAAWV,SAAX,CAAL,EAA4B;AAC1B,UAAKA,IAAAA,CAAAA,SAAL,GAAiBA,SAAjB,CAAA;AACD,SAAA;;AACD,QAAKC,IAAAA,CAAAA,YAAL,GAAoBA,YAApB,CAAA;AACA,QAAKC,IAAAA,CAAAA,gBAAL,GAAwBA,gBAAxB,CAAA;;AACA,QAAA,IAAI,CAAC,IAAKQ,CAAAA,KAAL,CAAWP,MAAX,CAAL,EAAyB;AACvB,UAAKA,IAAAA,CAAAA,MAAL,GAAcA,MAAd,CAAA;AACD,SAAA;AACF,OAAA;AACF,KAxBM;AAyBPQ,IAAAA,eAzBO,EAyBW,SAAA,eAAA,GAAA;AAChB,MAAA,IAAI,IAAK5C,CAAAA,YAAL,YAA6BC,MAAjC,EAAyC;AACvC,QAAA,OAAO,KAAKD,YAAZ,CAAA;AACD,OAAA;;AACD,MAAA,OAAO,EAAP,CAAA;AACD,KA9BM;AA+BPuC,IAAAA,QA/BO,EA+BI,SAAA,QAAA,GAAA;AAAA,MAAA,IAAA,KAAA,GAAA,IAAA,CAAA;;AACT,MAAIM,IAAAA,YAAY,EAAM,IAAA,EAAtB,EAA0B;AACxB,QAAKC,IAAAA,CAAAA,SAAL,CAAe,YAAM;AACnB,UAAA,KAAI,CAACC,GAAL,CAASC,eAAT,CAAyB,UAAzB,CAAA,CAAA;AACD,SAFD,CAAA,CAAA;AAGD,OAAA;AACF,KArCM;AAsCPC,IAAAA,oBAtCO,EAsCgB,SAAA,oBAAA,GAAA;AACrB,MAAK/B,IAAAA,CAAAA,OAAL,GAAe,IAAf,CAAA;AACD,KAxCM;AAyCPgC,IAAAA,oBAzCO,EAyCgB,SAAA,oBAAA,GAAA;AACrB,MAAKhC,IAAAA,CAAAA,OAAL,GAAe,KAAf,CAAA;AACD,KA3CM;AA4CPiC,IAAAA,gBA5CO,EA4CY,SAAA,gBAAA,GAAA;AACjB,MAAKhC,IAAAA,CAAAA,QAAL,GAAgB,IAAhB,CAAA;AACA,MAAA,IAAA,CAAK8B,oBAAL,EAAA,CAAA;AACA,MAAA,IAAA,CAAKG,KAAL,CAAWC,MAAX,CAAkBC,KAAlB,EAAA,CAAA;AACD,KAhDM;AAiDPC,IAAAA,gBAjDO,EAiDY,SAAA,gBAAA,GAAA;AACjB,MAAKpC,IAAAA,CAAAA,QAAL,GAAgB,KAAhB,CAAA;;AACA,MAAI,IAAA,CAAC,IAAKC,CAAAA,QAAV,EAAoB;AAClB,QAAA,IAAA,CAAK8B,oBAAL,EAAA,CAAA;AACD,OAAA;AACF,KAtDM;AAuDPM,IAAAA,YAvDO,EAuDMC,SAAAA,YAAAA,CAAAA,KAvDN,EAuDa;AAClB,MAAI,IAAA,IAAA,CAAK/C,QAAT,EAAmB;AACjB,QAAA,OAAA;AACD,OAAA;;AACD+C,MAAAA,KAAK,CAACC,cAAN,EAAA,CAAA;AACA,MAAKC,IAAAA,CAAAA,WAAL,CAAiBF,KAAjB,CAAA,CAAA;AACAG,MAAAA,MAAM,CAACC,gBAAP,CAAwB,WAAxB,EAAqC,KAAKC,UAA1C,CAAA,CAAA;AACAF,MAAAA,MAAM,CAACC,gBAAP,CAAwB,SAAxB,EAAmC,KAAKE,SAAxC,CAAA,CAAA;AACAH,MAAAA,MAAM,CAACC,gBAAP,CAAwB,WAAxB,EAAqC,KAAKC,UAA1C,CAAA,CAAA;AACAF,MAAAA,MAAM,CAACC,gBAAP,CAAwB,UAAxB,EAAoC,KAAKE,SAAzC,CAAA,CAAA;AACAH,MAAAA,MAAM,CAACC,gBAAP,CAAwB,aAAxB,EAAuC,KAAKE,SAA5C,CAAA,CAAA;AACD,KAlEM;AAmEPC,IAAAA,eAnEO,EAmESC,SAAAA,eAAAA,CAAAA,CAnET,EAmEY;AACjB,MAAA,IAAQC,IAAR,GAAiBD,CAAjB,CAAQC,IAAR,CAAA;AACAD,MAAAA,CAAC,CAACP,cAAF,EAAA,CAAA;;AACA,MAAA,IAAIQ,IAAI,KAAK,WAAT,IAAwBA,IAAI,KAAK,WAArC,EAAkD;AAChD,QAAKC,IAAAA,CAAAA,SAAL,CAAe,KAAf,CAAA,CAAA;AACD,OAAA;;AACD,MAAA,IAAID,IAAI,KAAK,SAAT,IAAsBA,IAAI,KAAK,YAAnC,EAAiD;AAC/C,QAAKC,IAAAA,CAAAA,SAAL,CAAe,KAAf,CAAA,CAAA;AACD,OAAA;AACF,KA5EM;AA6EPC,IAAAA,aA7EO,EA6ES,SAAA,aAAA,GAAA;AACd,MAAKD,IAAAA,CAAAA,SAAL,CAAe,KAAf,CAAA,CAAA;AACD,KA/EM;AAgFPE,IAAAA,cAhFO,EAgFU,SAAA,cAAA,GAAA;AACf,MAAKF,IAAAA,CAAAA,SAAL,CAAe,KAAf,CAAA,CAAA;AACD,KAlFM;AAmFPA,IAAAA,SAnFO,EAmFGG,SAAAA,SAAAA,CAAAA,KAnFH,EAmFU;AACf,MAAI,IAAA,IAAA,CAAK5D,QAAT,EAAmB;AACjB,QAAA,OAAA;AACD,OAAA;;AACD,MAAI6D,IAAAA,UAAU,GAAG,IAAK5D,CAAAA,IAAL,GAAY,IAAKL,CAAAA,SAAjB,GAA6B,GAA9C,CAAA;;AACA,MAAIgE,IAAAA,KAAK,KAAK,KAAd,EAAqB;AACnBC,QAAAA,UAAU,GAAG,CAACA,UAAd,CAAA;AACD,OAAA;;AACD,MAAK1C,IAAAA,CAAAA,MAAL,GAAc2C,UAAU,CAAC,KAAK3D,UAAN,CAAV,GAA8B0D,UAA5C,CAAA;AACA,MAAKE,IAAAA,CAAAA,WAAL,CAAiB,IAAA,CAAK5C,MAAtB,CAAA,CAAA;AACD,KA7FM;AA8FP8B,IAAAA,WA9FO,EA8FKF,SAAAA,WAAAA,CAAAA,KA9FL,EA8FY;AACjB,MAAKrC,IAAAA,CAAAA,QAAL,GAAgB,IAAhB,CAAA;AACA,MAAKC,IAAAA,CAAAA,OAAL,GAAe,IAAf,CAAA;AACA,MAAA,IAAQ3B,IAAR,GAAiB+D,KAAjB,CAAQ/D,IAAR,CAAA;AACA,MAAA,IAAM6B,OAAN,GAA2BkC,KAA3B,CAAMlC,OAAN;AAAA,UAAeD,OAAf,GAA2BmC,KAA3B,CAAenC,OAAf,CAAA;;AACA,MAAI5B,IAAAA,IAAI,KAAK,YAAb,EAA2B;AACzB,QAAA,IAAMgF,KAAK,GAAGjB,KAAK,CAACkB,OAApB,CAAA;AADyB,QAAA,IAAA,IAAA,GAEJ,CAACD,KAAK,CAAC,CAAD,CAAL,CAASnD,OAAV,EAAmBmD,KAAK,CAAC,CAAD,CAAL,CAASpD,OAA5B,CAFI,CAAA;AAExBC,QAAAA,OAFwB,GAAA,IAAA,CAAA,CAAA,CAAA,CAAA;AAEfD,QAAAA,OAFe,GAAA,IAAA,CAAA,CAAA,CAAA,CAAA;AAG1B,OAAA;;AACD,MAAI,IAAA,IAAA,CAAKzB,QAAT,EAAmB;AACjB,QAAK4B,IAAAA,CAAAA,MAAL,GAAcF,OAAd,CAAA;AACD,OAFD,MAEO;AACL,QAAKC,IAAAA,CAAAA,MAAL,GAAcF,OAAd,CAAA;AACD,OAAA;;AACD,MAAA,IAAA,CAAKM,QAAL,GAAgB4C,UAAU,CAAC,IAAA,CAAK3D,UAAN,CAA1B,CAAA;AACA,MAAKgB,IAAAA,CAAAA,MAAL,GAAc,IAAA,CAAKD,QAAnB,CAAA;AACD,KA9GM;AA+GPkC,IAAAA,UA/GO,EA+GIG,SAAAA,UAAAA,CAAAA,CA/GJ,EA+GO;AACZ,MAAMR,IAAAA,KAAK,GAAGQ,CAAd,CAAA;;AACA,MAAI,IAAA,CAAC,IAAK7C,CAAAA,QAAV,EAAoB;AAClB,QAAA,OAAA;AACD,OAAA;;AACD,MAAKC,IAAAA,CAAAA,OAAL,GAAe,KAAf,CAAA;AACA,MAAA,IAAA,CAAK4B,oBAAL,EAAA,CAAA;AACA,MAAK9C,IAAAA,CAAAA,MAAL,CAAYyE,SAAZ,EAAA,CAAA;AACA,MAAIC,IAAAA,IAAI,GAAG,CAAX,CAAA;AACA,MAAA,IAAMC,gBAAgB,GAAG,IAAK3E,CAAAA,MAAL,CAAY4E,UAArC,CAAA;;AACA,MAAI,IAAA,IAAA,CAAKlF,QAAT,EAAmB;AACjB,QAAA,IAAA,CAAK8B,QAAL,GAAgB8B,KAAK,CAAClC,OAAtB,CAAA;AACAsD,QAAAA,IAAI,GAAG,IAAA,CAAKpD,MAAL,GAAc,KAAKE,QAA1B,CAAA;AACD,OAHD,MAGO;AACL,QAAA,IAAA,CAAKD,QAAL,GAAgB+B,KAAK,CAACnC,OAAtB,CAAA;AACAuD,QAAAA,IAAI,GAAG,IAAA,CAAKnD,QAAL,GAAgB,KAAKF,MAA5B,CAAA;AACD,OAAA;;AACD,MAAA,IAAIiC,KAAK,CAAC/D,IAAN,KAAe,WAAnB,EAAgC;AAC9B,QAAA,IAAMgF,KAAK,GAAGjB,KAAK,CAACkB,OAApB,CAAA;AACA,QAAA,IAAA,KAAA,GAA2B,CAACD,KAAK,CAAC,CAAD,CAAL,CAASnD,OAAV,EAAmBmD,KAAK,CAAC,CAAD,CAAL,CAASpD,OAA5B,CAA3B;AAAA,YAAOC,OAAP,GAAA,KAAA,CAAA,CAAA,CAAA;AAAA,YAAgBD,OAAhB,GAAA,KAAA,CAAA,CAAA,CAAA,CAAA;AACA,QAAKC,IAAAA,CAAAA,OAAL,GAAeA,OAAf,CAAA;AACA,QAAKD,IAAAA,CAAAA,OAAL,GAAeA,OAAf,CAAA;AACD,OAAA;;AACDuD,MAAAA,IAAI,GAAGA,IAAI,GAAGC,gBAAP,GAA0B,GAAjC,CAAA;AACA,MAAA,IAAA,CAAKjD,MAAL,GAAc,IAAKD,CAAAA,QAAL,GAAgBiD,IAA9B,CAAA;AACA,MAAKJ,IAAAA,CAAAA,WAAL,CAAiB,IAAA,CAAK5C,MAAtB,CAAA,CAAA;AACD,KAzIM;AA0IPkC,IAAAA,SA1IO,EA0IK,SAAA,SAAA,GAAA;AAAA,MAAA,IAAA,MAAA,GAAA,IAAA,CAAA;;AACV,MAAI,IAAA,IAAA,CAAK3C,QAAT,EAAmB;AACjB4D,QAAAA,UAAU,CAAC,YAAM;AACf,UAAA,MAAI,CAAC5D,QAAL,GAAgB,KAAhB,CAAA;;AACA,UAAA,MAAI,CAAC8B,oBAAL,EAAA,CAAA;AACD,SAHS,EAGP,CAHO,CAAV,CAAA;AAIAU,QAAAA,MAAM,CAACqB,mBAAP,CAA2B,WAA3B,EAAwC,KAAKnB,UAA7C,CAAA,CAAA;AACAF,QAAAA,MAAM,CAACqB,mBAAP,CAA2B,WAA3B,EAAwC,KAAKnB,UAA7C,CAAA,CAAA;AACAF,QAAAA,MAAM,CAACqB,mBAAP,CAA2B,SAA3B,EAAsC,KAAKlB,SAA3C,CAAA,CAAA;AACAH,QAAAA,MAAM,CAACqB,mBAAP,CAA2B,UAA3B,EAAuC,KAAKlB,SAA5C,CAAA,CAAA;AACAH,QAAAA,MAAM,CAACqB,mBAAP,CAA2B,aAA3B,EAA0C,KAAKlB,SAA/C,CAAA,CAAA;AACD,OAAA;AACF,KAtJM;AAuJPU,IAAAA,WAvJO,EAuJKS,SAAAA,WAAAA,CAAAA,GAvJL,EAuJU;AAAA,MAAA,IAAA,MAAA,GAAA,IAAA,CAAA;;AACf,MAAIrD,IAAAA,MAAM,GAAGqD,GAAb,CAAA;;AACA,MAAIrD,IAAAA,MAAM,KAAK,IAAX,IAAmBsD,KAAK,CAACtD,MAAD,CAA5B,EAAsC;AACpC,QAAA,OAAA;AACD,OAAA;;AACD,MAAIA,IAAAA,MAAM,GAAG,GAAb,EAAkB;AAChBA,QAAAA,MAAM,GAAG,GAAT,CAAA;AACD,OAFD,MAEO,IAAIA,MAAM,GAAG,CAAb,EAAgB;AACrBA,QAAAA,MAAM,GAAG,CAAT,CAAA;AACD,OAAA;;AACD,MAAA,IAAMuD,UAAU,GAAG,GAAA,GAAM,KAAKzE,IAAX,GAAkB,KAAKL,SAA1C,CAAA;AACA,MAAM+E,IAAAA,KAAK,GAAGC,IAAI,CAACC,KAAL,CAAW1D,MAAM,GAAGuD,UAApB,CAAd,CAAA;AACA,MAAI3F,IAAAA,KAAK,GAAG4F,KAAK,GAAGD,UAAR,GAAqB,IAAA,CAAK9E,SAA1B,GAAsC,IAAlD,CAAA;AACAb,MAAAA,KAAK,IAAI,IAAA,CAAKe,GAAd,CAAA;AACAf,MAAAA,KAAK,GAAGE,MAAM,CAAC6E,UAAU,CAAI/E,EAAAA,CAAAA,MAAAA,CAAAA,KAAJ,CAAV,CAAA,CAAuB+F,OAAvB,CAA+B,IAAK5E,CAAAA,SAApC,CAAD,CAAd,CAAA;AACA,MAAA,IAAA,CAAK6E,KAAL,CAAW,OAAX,EAAoBhG,KAApB,CAAA,CAAA;AACA,MAAKqD,IAAAA,CAAAA,SAAL,CAAe,YAAM;AACnB,QAAA,MAAI,CAACG,oBAAL,EAAA,CAAA;;AACA,QAAA,MAAI,CAACG,KAAL,CAAWsC,OAAX,IAAsB,MAAI,CAACtC,KAAL,CAAWsC,OAAX,CAAmBC,cAAnB,EAAtB,CAAA;AACD,OAHD,CAAA,CAAA;;AAIA,MAAI,IAAA,CAAC,KAAKvE,QAAN,IAAkB,KAAK3B,KAAL,KAAe,IAAKqC,CAAAA,SAA1C,EAAqD;AACnD,QAAKA,IAAAA,CAAAA,SAAL,GAAiB,IAAA,CAAKrC,KAAtB,CAAA;AACD,OAAA;AACF,KA9KM;AA+KPkD,IAAAA,KA/KO,EA+KDiD,SAAAA,KAAAA,CAAAA,GA/KC,EA+KI;AACT,MAAA,OAAOA,GAAG,KAAK,KAAK,CAAb,IAAkBA,GAAG,KAAK,IAAjC,CAAA;AACD,KAAA;AAjLM,GA9Fe;AAiRxBC,EAAAA,MAjRwB,EAiRf,SAAA,MAAA,GAAA;AAAA,IAAA,IAAA,CAAA,GAAA,SAAA,CAAA,CAAA,CAAA,CAAA;AACP,IAAA,OAAA,CAAA,CAAA,KAAA,EAAA;AAAA,MAAA,KAAA,EAAgB,QAAhB;AAAA,MAAA,OAAA,EAAA,EAAA,CAAA,MAAA,CAAmCxG,MAAnC,EAAA,yBAAA,CAAA;AAAA,MAAA,OAAA,EAA2E,KAAKyB,YAAhF;AAAA,MAAA,OAAA,EAAA;AAAA,QAAA,UAAA,EAAuG,GAAvG;AAAA,QAAA,cAAA,EAAyH,IAAKiB,CAAAA,WAAAA;AAA9H,OAAA;AAAA,MAAA,IAAA,EAAA;AAAA,QAAA,YAAA,EAAyJ,KAAKoB,gBAA9J;AAAA,QAAA,YAAA,EAA8L,KAAKI,gBAAnM;AAAA,QAAA,WAAA,EAAkO,KAAKC,YAAvO;AAAA,QAAA,YAAA,EAAmQ,KAAKA,YAAxQ;AAAA,QAAA,OAAA,EAA+R,KAAKL,gBAApS;AAAA,QAAA,MAAA,EAA8T,KAAKI,gBAAnU;AAAA,QAAA,SAAA,EAAgW,IAAKS,CAAAA,eAAAA;AAArW,OAAA;AAAA,KAAA,EAAA,CAAA,CAAA,CAAA,OAAA,EAAA8B,MAAA,CAAA,CAAA;AAAA,MAAmY,KAAA,EAAA,SAAA;AAAnY,KAAA,EAAA;AAAA,MAAA,OAAA,EAAoZ,KAAKlD,eAAL,EAAA;AAApZ,KAAA,EAAA;AAAA,MAAA,OAAA,EAAA;AAAA,QAAA,SAAA,EAAqb,KAAK1B,OAA1b;AAAA,QAA4ctB,SAAAA,EAAAA,MAAM,CAAC,IAAA,CAAKa,WAAN,CAAA;AAAld,OAAA;AAAA,KAAA,CAAA,CAAA,EAAA,CAAA,CAAA,CAAA,KAAA,EAAA;AAAA,MAAA,OAAA,EAAkf,WAAIpB,MAAJ,EAAA,iBAAA,CAAA,EAAA,eAAA,CAAA,EAAA,EAAA,EAAA,CAAA,MAAA,CAAmCA,MAAnC,EAAA,2BAAA,CAAA,EAAuE,KAAK+B,QAA5E,CAAA,CAAA;AAAlf,KAAA,CAAA,CAAA,CAAA,CAAA,CAAA,CAAA;AACD,GAAA;AAnRuB,CAAX,CAAf;;;;"}