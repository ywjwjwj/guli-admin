{"version":3,"file":"actions.js","sources":["../../src/dialog/actions.tsx"],"sourcesContent":["import Vue from 'vue';\nimport isString from 'lodash/isString';\nimport isObject from 'lodash/isObject';\nimport { renderTNodeJSX } from '../utils/render-tnode';\nimport TButton, { ButtonProps } from '../button';\nimport { PopconfirmConfig, DialogConfig, DrawerConfig } from '../config-provider';\nimport { ClassName, TNode } from '../common';\n\nexport type MixnsFooterButton = string | ButtonProps | TNode;\n\nexport interface MixinsConfirmBtn {\n  theme?: MixinsThemeType;\n  className?: ClassName;\n  confirmBtn: MixnsFooterButton;\n  globalConfirm: PopconfirmConfig['confirm'] | DrawerConfig['confirm'] | DialogConfig['confirm'];\n  globalConfirmBtnTheme?: PopconfirmConfig['confirmBtnTheme'] | DialogConfig['confirmBtnTheme'];\n}\n\nexport interface MixinsCancelBtn {\n  className?: ClassName;\n  cancelBtn: MixnsFooterButton;\n  globalCancel: PopconfirmConfig['cancel'] | DrawerConfig['cancel'] | DialogConfig['cancel'];\n}\n\nexport type MixinsThemeType = keyof (PopconfirmConfig['confirmBtnTheme'] & DialogConfig['confirmBtnTheme']);\n\nexport default Vue.extend({\n  methods: {\n    getConfirmBtn(options: MixinsConfirmBtn) {\n      const { confirmBtn, className } = options;\n      if (confirmBtn === null) return null;\n      if (confirmBtn && this.$scopedSlots.confirmBtn) {\n        console.warn('Both $props.confirmBtn and $scopedSlots.confirmBtn exist, $props.confirmBtn is preferred.');\n      }\n      const defaultButtonProps = this.getDefaultConfrimBtnProps(options);\n      // 属性和插槽都不存在，就返回全局默认配置\n      if (!confirmBtn && !this.$scopedSlots.confirmBtn) {\n        return <TButton class={className} props={{ ...defaultButtonProps }} />;\n      }\n      // 如果属性存在，优先返回属性配置\n      if (confirmBtn && ['string', 'object'].includes(typeof confirmBtn)) {\n        return this.getButtonByProps(confirmBtn as string | ButtonProps, defaultButtonProps, className);\n      }\n      // 渲染插槽 或 function 类型的 confirmBtn，属性优先级更高\n      return renderTNodeJSX(this, 'confirmBtn');\n    },\n\n    getCancelBtn(options: MixinsCancelBtn) {\n      const { cancelBtn, className } = options;\n      if (cancelBtn === null) return null;\n      if (cancelBtn && this.$scopedSlots.cancelBtn) {\n        console.warn('Both $props.cancelBtn and $scopedSlots.cancelBtn exist, $props.cancelBtn is preferred.');\n      }\n      const defaultButtonProps: ButtonProps = this.getDefaultCancelBtnProps(options);\n      // 属性和插槽都不存在，就返回全局默认配置\n      if (!cancelBtn && !this.$scopedSlots.cancelBtn) {\n        return <TButton class={className} props={{ ...defaultButtonProps }} />;\n      }\n      // 如果属性存在，优先返回属性配置\n      if (cancelBtn && ['string', 'object'].includes(typeof cancelBtn)) {\n        return this.getButtonByProps(cancelBtn as string | ButtonProps, defaultButtonProps);\n      }\n      // 渲染插槽 或 function 类型的 confirmBtn，属性优先级更高\n      return renderTNodeJSX(this, 'cancelBtn');\n    },\n\n    getButtonByProps(button: string | ButtonProps, defaultButton: ButtonProps, className?: ClassName) {\n      let newOptions = defaultButton;\n      if (isString(button)) {\n        newOptions.content = button;\n      } else if (isObject(button)) {\n        newOptions = { ...newOptions, ...button };\n      }\n      return (\n        <TButton class={className} props={newOptions}/>\n      );\n    },\n\n    // eslint-disable-next-line @typescript-eslint/no-unused-vars\n    confirmBtnAction(e: MouseEvent) {},\n    // eslint-disable-next-line @typescript-eslint/no-unused-vars\n    cancelBtnAction(e: MouseEvent) {},\n\n    // 全局配置属性综合\n    getDefaultConfrimBtnProps(options: MixinsConfirmBtn): ButtonProps {\n      const { globalConfirm, theme, globalConfirmBtnTheme } = options;\n      const defaultTheme = globalConfirmBtnTheme?.[theme] || 'primary';\n      let props: ButtonProps = {\n        theme: defaultTheme,\n        content: '确定',\n        onClick: (e) => {\n          this.confirmBtnAction(e);\n        },\n      };\n      if (isString(globalConfirm)) {\n        props.content = globalConfirm;\n      } else if (isObject(globalConfirm)) {\n        props = { ...props, ...globalConfirm };\n      }\n      return props;\n    },\n\n    // 全局配置属性综合\n    getDefaultCancelBtnProps(options: MixinsCancelBtn): ButtonProps {\n      const { globalCancel } = options;\n      let props: ButtonProps = {\n        theme: 'default',\n        content: '取消',\n        onClick: (e) => {\n          this.cancelBtnAction(e);\n        },\n      };\n      if (isString(globalCancel)) {\n        props.content = globalCancel;\n      } else if (isObject(globalCancel)) {\n        props = { ...props, ...globalCancel };\n      }\n      return props;\n    },\n  },\n\n});\n"],"names":["Vue","extend","methods","getConfirmBtn","options","confirmBtn","className","$scopedSlots","console","warn","defaultButtonProps","getDefaultConfrimBtnProps","TButton","_mergeJSXProps","includes","getButtonByProps","renderTNodeJSX","getCancelBtn","cancelBtn","getDefaultCancelBtnProps","_mergeJSXProps2","button","defaultButton","newOptions","isString","content","isObject","_mergeJSXProps3","confirmBtnAction","e","cancelBtnAction","globalConfirm","theme","globalConfirmBtnTheme","defaultTheme","props","onClick","globalCancel"],"mappings":"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"}