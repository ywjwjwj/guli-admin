{"version":3,"file":"row.js","sources":["../../src/grid/row.tsx"],"sourcesContent":["import Vue, { VNode } from 'vue';\nimport isObject from 'lodash/isObject';\nimport { prefix } from '../config';\nimport props from './row-props';\nimport { ClassName, Styles } from '../common';\nimport { calcSize } from '../utils/responsive';\nimport { TdRowProps } from './type';\nimport { getIEVersion } from '../_common/js/utils/helper';\n\nconst name = `${prefix}-row`;\n\nexport interface RowHTMLTagAttributes {\n  class: ClassName;\n  style: Styles;\n  attrs?: {\n    'row-gap'?: number;\n  };\n}\n\nexport default Vue.extend({\n  name: 'TRow',\n\n  props: { ...props },\n\n  data() {\n    return {\n      size: 'md',\n    };\n  },\n\n  provide(): { rowContext: any } {\n    return {\n      rowContext: {\n        gutter: this.gutter,\n      },\n    };\n  },\n\n  computed: {\n    classes(): ClassName {\n      const { justify, align } = this;\n      return [\n        name,\n        {\n          [`${name}--${justify}`]: justify,\n          [`${name}--${align}`]: align,\n        },\n      ];\n    },\n  },\n\n  mounted() {\n    this.updateSize();\n    this.handleIE();\n    window.addEventListener('resize', this.updateSize);\n  },\n\n  watch: {\n    gutter() {\n      this.handleIE();\n    },\n\n    size() {\n      this.handleIE();\n    },\n  },\n\n  beforeDestroy() {\n    window.removeEventListener('resize', this.updateSize);\n  },\n\n  methods: {\n    updateSize() {\n      this.size = calcSize(window.innerWidth);\n    },\n\n    handleIE() {\n      if (getIEVersion() <= 11) {\n        const rowGap = this.rowGap(this.gutter, this.size);\n        if (rowGap) {\n          this.$el.setAttribute('row-gap', `${rowGap}`);\n        }\n      }\n    },\n\n    calcRowStyle(gutter: TdRowProps['gutter'], currentSize: string): Styles {\n      const rowStyle = {};\n      if (typeof gutter === 'number') {\n        Object.assign(rowStyle, {\n          marginLeft: `${gutter / -2}px`,\n          marginRight: `${gutter / -2}px`,\n        });\n      } else if (Array.isArray(gutter) && gutter.length) {\n        if (typeof gutter[0] === 'number') {\n          Object.assign(rowStyle, {\n            marginLeft: `${gutter[0] / -2}px`,\n            marginRight: `${gutter[0] / -2}px`,\n          });\n        }\n        if (typeof gutter[1] === 'number') {\n          Object.assign(rowStyle, { rowGap: `${gutter[1]}px` });\n        }\n\n        if (isObject(gutter[0]) && gutter[0][currentSize] !== undefined) {\n          Object.assign(rowStyle, {\n            marginLeft: `${gutter[0][currentSize] / -2}px`,\n            marginRight: `${gutter[0][currentSize] / -2}px`,\n          });\n        }\n        if (isObject(gutter[1]) && gutter[1][currentSize] !== undefined) {\n          Object.assign(rowStyle, { rowGap: `${gutter[1][currentSize]}px` });\n        }\n      } else if (isObject(gutter) && gutter[currentSize]) {\n        if (Array.isArray(gutter[currentSize]) && gutter[currentSize].length) {\n          Object.assign(rowStyle, {\n            marginLeft: `${gutter[currentSize][0] / -2}px`,\n            marginRight: `${gutter[currentSize][0] / -2}px`,\n          });\n          Object.assign(rowStyle, { rowGap: `${gutter[currentSize][1]}px` });\n        } else {\n          Object.assign(rowStyle, {\n            marginLeft: `${gutter[currentSize] / -2}px`,\n            marginRight: `${gutter[currentSize] / -2}px`,\n          });\n        }\n      }\n      return rowStyle;\n    },\n\n    rowGap(gutter: TdRowProps['gutter'], currentSize: string): number {\n      let rowGap;\n      if (Array.isArray(gutter) && gutter.length) {\n        if (typeof gutter[1] === 'number') {\n          [, rowGap] = gutter;\n        }\n        if (isObject(gutter[1]) && gutter[1][currentSize] !== undefined) {\n          rowGap = gutter[1][currentSize];\n        }\n      } else if (isObject(gutter) && gutter[currentSize]) {\n        if (Array.isArray(gutter[currentSize]) && gutter[currentSize].length) {\n          [, rowGap] = gutter[currentSize];\n        }\n      }\n      return rowGap;\n    },\n  },\n\n  render(): VNode {\n    const { tag, classes } = this;\n\n    const rowStyle = this.calcRowStyle(this.gutter, this.size);\n\n    const attributes: RowHTMLTagAttributes = {\n      class: classes,\n      style: rowStyle,\n      attrs: {},\n    };\n    return <tag {...attributes}>{this.$slots.default}</tag>;\n  },\n});\n"],"names":["name","prefix","Vue","extend","props","data","size","provide","rowContext","gutter","computed","classes","justify","align","mounted","updateSize","handleIE","window","addEventListener","watch","beforeDestroy","removeEventListener","methods","calcSize","innerWidth","getIEVersion","rowGap","$el","setAttribute","calcRowStyle","currentSize","rowStyle","Object","assign","marginLeft","marginRight","Array","isArray","length","isObject","render","tag","attributes","style","attrs","_mergeJSXProps","$slots"],"mappings":"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"}