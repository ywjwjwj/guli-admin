{"version":3,"file":"select-input.js","sources":["../../src/select-input/select-input.tsx"],"sourcesContent":["import {\n  computed, defineComponent, ref, SetupContext, toRefs,\n} from '@vue/composition-api';\nimport Popup from '../popup';\nimport { prefix } from '../config';\nimport props from './props';\nimport { TdSelectInputProps } from './type';\nimport useSingle from './useSingle';\nimport useMultiple from './useMultiple';\nimport useOverlayStyle from './useOverlayStyle';\n\nconst BASE_CLASS_BORDERLESS = `${prefix}-select-input--borderless`;\nconst BASE_CLASS_MULTIPLE = `${prefix}-select-input--multiple`;\nconst BASE_CLASS_POPUP_VISIBLE = `${prefix}-select-input--popup-visible`;\nconst BASE_CLASS_EMPTY = `${prefix}-select-input--empty`;\n\nexport default defineComponent({\n  name: 'TSelectInput',\n\n  props: { ...props },\n\n  setup(props: TdSelectInputProps, context: SetupContext) {\n    const selectInputRef = ref();\n    const selectInputWrapRef = ref();\n    const {\n      multiple, value, popupVisible, borderless,\n    } = toRefs(props);\n\n    const { commonInputProps, onInnerClear, renderSelectSingle } = useSingle(props, context);\n    const { renderSelectMultiple } = useMultiple(props, context);\n    const { tOverlayStyle, innerPopupVisible, onInnerPopupVisibleChange } = useOverlayStyle(props);\n\n    const popupClasses = computed(() => [\n      {\n        [BASE_CLASS_BORDERLESS]: borderless.value,\n        [BASE_CLASS_MULTIPLE]: multiple.value,\n        [BASE_CLASS_POPUP_VISIBLE]: popupVisible.value ?? innerPopupVisible.value,\n        [BASE_CLASS_EMPTY]: value.value instanceof Array ? !value.value.length : !value.value,\n      },\n    ]);\n\n    return {\n      selectInputWrapRef,\n      innerPopupVisible,\n      commonInputProps,\n      tOverlayStyle,\n      selectInputRef,\n      popupClasses,\n      onInnerClear,\n      renderSelectSingle,\n      renderSelectMultiple,\n      onInnerPopupVisibleChange,\n    };\n  },\n\n  render(h) {\n    // 浮层显示的受控与非受控\n    // 浮层显示的受控与非受控\n    const visibleProps = { visible: this.popupVisible ?? this.innerPopupVisible };\n\n    const mainContent = (\n      <Popup\n        ref=\"selectInputRef\"\n        class={this.popupClasses}\n        trigger={this.popupProps?.trigger || 'click'}\n        placement=\"bottom-left\"\n        visible={this.popupVisible ?? this.innerPopupVisible}\n        content={this.panel}\n        scopedSlots={{ ...this.$scopedSlots, content: this.$scopedSlots.panel }}\n        hideEmptyPopup={true}\n        on={{\n          'visible-change': this.onInnerPopupVisibleChange,\n        }}\n        props={{ ...this.popupProps, overlayStyle: this.tOverlayStyle }}\n      >\n        {this.multiple\n          ? this.renderSelectMultiple(\n            {\n              commonInputProps: this.commonInputProps,\n              onInnerClear: this.onInnerClear,\n              popupVisible: visibleProps.visible,\n            },\n            h,\n          )\n          : this.renderSelectSingle(h, visibleProps.visible)}\n      </Popup>\n    );\n\n    if (!this.tips) return mainContent;\n\n    return (\n      <div ref=\"selectInputWrapRef\" class={`${prefix}-select-input__wrap`}>\n        {mainContent}\n        <div class={`${prefix}-input__tips ${prefix}-input__tips--${this.status || 'normal'}`}>{this.tips}</div>\n      </div>\n    );\n  },\n});\n"],"names":["BASE_CLASS_BORDERLESS","prefix","BASE_CLASS_MULTIPLE","BASE_CLASS_POPUP_VISIBLE","BASE_CLASS_EMPTY","defineComponent","name","props","setup","props2","context","selectInputRef","ref","selectInputWrapRef","toRefs","multiple","value","popupVisible","borderless","useSingle","commonInputProps","onInnerClear","renderSelectSingle","useMultiple","renderSelectMultiple","useOverlayStyle","tOverlayStyle","innerPopupVisible","onInnerPopupVisibleChange","popupClasses","computed","Array","length","render","h","visibleProps","visible","mainContent","_mergeJSXProps","popupProps","trigger","panel","$scopedSlots","content","overlayStyle","tips","status"],"mappings":"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"}