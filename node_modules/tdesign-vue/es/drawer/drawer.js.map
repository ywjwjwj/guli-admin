{"version":3,"file":"drawer.js","sources":["../../src/drawer/drawer.tsx"],"sourcesContent":["import Vue from 'vue';\nimport { CloseIcon } from 'tdesign-icons-vue';\n\nimport { prefix } from '../config';\nimport { Button as TButton } from '../button';\nimport props from './props';\nimport { FooterButton, DrawerCloseContext, TdDrawerProps } from './type';\nimport { renderTNodeJSX, renderContent } from '../utils/render-tnode';\nimport mixins from '../utils/mixins';\nimport getConfigReceiverMixins, { DrawerConfig } from '../config-provider/config-receiver';\nimport TransferDom from '../utils/transfer-dom';\nimport { emitEvent } from '../utils/event';\nimport { addClass, removeClass } from '../utils/dom';\nimport { ClassName, Styles } from '../common';\nimport ActionMixin from '../dialog/actions';\n\ntype FooterButtonType = 'confirm' | 'cancel';\n\nconst name = `${prefix}-drawer`;\nconst lockClass = `${prefix}-drawer--lock`;\n\nexport default mixins(ActionMixin, getConfigReceiverMixins<Vue, DrawerConfig>('drawer')).extend({\n  name: 'TDrawer',\n\n  components: {\n    CloseIcon,\n    TButton,\n  },\n\n  props,\n\n  directives: {\n    TransferDom,\n  },\n  data() {\n    return {\n      isSizeDragging: false,\n      draggedSizeValue: null,\n    };\n  },\n  computed: {\n    drawerClasses(): ClassName {\n      return [\n        name,\n        `${name}--${this.placement}`,\n        {\n          [`${name}--open`]: this.visible,\n          [`${name}--attach`]: this.showInAttachedElement,\n          [`${name}--without-mask`]: !this.showOverlay,\n        },\n      ];\n    },\n    sizeValue(): string {\n      if (this.draggedSizeValue) return this.draggedSizeValue;\n      const defaultSize = isNaN(Number(this.size)) ? this.size : `${this.size}px`;\n      return (\n        {\n          small: '300px',\n          medium: '500px',\n          large: '760px',\n        }[this.size] || defaultSize\n      );\n    },\n    wrapperStyles(): Styles {\n      return {\n        // 用于抵消动画效果：transform: translateX(100%); 等\n        transform: this.visible ? 'translateX(0)' : undefined,\n        width: this.isHorizontal ? this.sizeValue : '',\n        height: this.isVertical ? this.sizeValue : '',\n      };\n    },\n    wrapperClasses(): ClassName {\n      return [`${name}__content-wrapper`, `${name}__content-wrapper--${this.placement}`];\n    },\n    parentNode(): HTMLElement {\n      return this.$el && (this.$el.parentNode as HTMLElement);\n    },\n    modeAndPlacement(): string {\n      return [this.mode, this.placement].join();\n    },\n    footerStyle(): Styles {\n      return {\n        display: 'flex',\n        justifyContent: this.placement === 'right' ? 'flex-start' : 'flex-end',\n      };\n    },\n    isHorizontal(): boolean {\n      return ['right', 'left'].includes(this.placement);\n    },\n    isVertical(): boolean {\n      return ['top', 'bottom'].includes(this.placement);\n    },\n    draggableLineStyles(): Styles {\n      const oppositeMap = {\n        left: 'right',\n        right: 'left',\n        top: 'bottom',\n        bottom: 'top',\n      };\n      return {\n        zIndex: 1,\n        position: 'absolute',\n        background: 'transparent',\n        [oppositeMap[this.placement]]: 0,\n        width: this.isHorizontal ? '16px' : '100%',\n        height: this.isHorizontal ? '100%' : '16px',\n        cursor: this.isHorizontal ? 'col-resize' : 'row-resize',\n      };\n    },\n  },\n\n  watch: {\n    modeAndPlacement: {\n      handler() {\n        this.handlePushMode();\n      },\n      immediate: true,\n    },\n    visible: {\n      handler(val) {\n        if (val) {\n          (this.$refs.drawerContainer as HTMLDivElement)?.focus?.();\n        }\n\n        this.handleScrollThrough(val);\n      },\n    },\n  },\n\n  updated() {\n    this.updatePushMode();\n  },\n\n  mounted() {\n    this.handleScrollThrough(this.visible);\n  },\n\n  render() {\n    if (this.destroyOnClose && !this.visible) return;\n    const defaultCloseBtn = <close-icon class={`${prefix}-submenu-icon`}></close-icon>;\n    const body = renderContent(this, 'default', 'body');\n    const defaultFooter = this.getDefaultFooter();\n    return (\n      <div\n        class={this.drawerClasses}\n        style={{ zIndex: this.zIndex }}\n        onkeydown={this.onKeyDown}\n        v-transfer-dom={this.attach}\n        ref=\"drawerContainer\"\n        tabindex={0}\n      >\n        {this.showOverlay && <div class={`${name}__mask`} onClick={this.handleWrapperClick} />}\n        <div class={this.wrapperClasses} style={this.wrapperStyles}>\n          {this.header !== false ? <div class={`${name}__header`}>{renderTNodeJSX(this, 'header')}</div> : null}\n          {this.closeBtn !== false ? (\n            <div class={`${name}__close-btn`} onClick={this.handleCloseBtnClick}>\n              {renderTNodeJSX(this, 'closeBtn', defaultCloseBtn)}\n            </div>\n          ) : null}\n          <div class={`${name}__body`}>{body}</div>\n          {this.footer !== false ? (\n            <div class={`${name}__footer`}>{renderTNodeJSX(this, 'footer', defaultFooter)}</div>\n          ) : null}\n          {this.sizeDraggable && (\n            <div\n              style={this.draggableLineStyles}\n              onMousedown={this.enableDrag}\n              onMousemove={this.handleMousemove}\n              onMouseup={this.disableDrag}\n              onMouseleave={this.disableDrag}\n            ></div>\n          )}\n        </div>\n      </div>\n    );\n  },\n\n  methods: {\n    enableDrag() {\n      this.isSizeDragging = true;\n    },\n    handleMousemove(e: MouseEvent) {\n      const { x, y } = e;\n      if (this.isSizeDragging && this.sizeDraggable) {\n        if (this.placement === 'right') {\n          this.draggedSizeValue = `${document.documentElement.clientWidth - x + 8}px`;\n        }\n        if (this.placement === 'left') {\n          this.draggedSizeValue = `${x + 8}px`;\n        }\n        if (this.placement === 'top') {\n          this.draggedSizeValue = `${y + 8}px`;\n        }\n        if (this.placement === 'bottom') {\n          this.draggedSizeValue = `${document.documentElement.clientHeight - y + 8}px`;\n        }\n      }\n    },\n    disableDrag() {\n      this.isSizeDragging = false;\n    },\n    handleScrollThrough(visible: boolean) {\n      if (!document || !document.body || !this.preventScrollThrough) return;\n      if (visible && !this.showInAttachedElement) {\n        this.preventScrollThrough && addClass(document.body, lockClass);\n      } else {\n        this.preventScrollThrough && removeClass(document.body, lockClass);\n      }\n    },\n    handlePushMode() {\n      if (this.mode !== 'push') return;\n      this.$nextTick(() => {\n        if (!this.parentNode) return;\n        this.parentNode.style.cssText = 'transition: margin 300ms cubic-bezier(0.7, 0.3, 0.1, 1) 0s;';\n      });\n    },\n    // push 动画效果处理\n    updatePushMode() {\n      if (!this.parentNode) return;\n      if (this.mode !== 'push' || !this.parentNode) return;\n      const marginStr = {\n        left: `margin: 0 0 0 ${this.sizeValue}`,\n        right: `margin: 0 0 0 -${this.sizeValue}`,\n        top: `margin: ${this.sizeValue} 0 0 0`,\n        bottom: `margin: -${this.sizeValue} 0 0 0`,\n      }[this.placement];\n      if (this.visible) {\n        this.parentNode.style.cssText += marginStr;\n      } else {\n        this.parentNode.style.cssText = this.parentNode.style.cssText.replace(/margin:.+;/, '');\n      }\n    },\n    getDefaultBtn(btnType: FooterButtonType, btnApi: FooterButton) {\n      const isCancel = btnType === 'cancel';\n      const clickAction = isCancel ? this.cancelBtnAction : this.confirmBtnAction;\n      const theme = isCancel ? 'default' : 'primary';\n      const isApiObject = typeof btnApi === 'object';\n      return (\n        <t-button theme={theme} onClick={clickAction} props={isApiObject ? btnApi : {}} class={`${name}-${btnType}`}>\n          {btnApi && typeof btnApi === 'object' ? btnApi.content : btnApi}\n        </t-button>\n      );\n    },\n    isUseDefault(btnApi: FooterButton) {\n      const baseTypes = ['string', 'object'];\n      return Boolean(btnApi && baseTypes.includes(typeof btnApi));\n    },\n    // locale 全局配置，插槽，props，默认值，决定了按钮最终呈现\n    getDefaultFooter() {\n      // this.getConfirmBtn is a function of ActionMixin\n      const confirmBtn = this.getConfirmBtn({\n        confirmBtn: this.confirmBtn,\n        globalConfirm: this.global.confirm,\n        className: `${prefix}-drawer__confirm`,\n      });\n      // this.getCancelBtn is a function of ActionMixin\n      const cancelBtn = this.getCancelBtn({\n        cancelBtn: this.cancelBtn,\n        globalCancel: this.global.cancel,\n        className: `${prefix}-drawer__cancel`,\n      });\n      return (\n        <div style={this.footerStyle}>\n          {this.placement === 'right' ? confirmBtn : null}\n          {cancelBtn}\n          {this.placement !== 'right' ? confirmBtn : null}\n        </div>\n      );\n    },\n    handleCloseBtnClick(e: MouseEvent) {\n      emitEvent<Parameters<TdDrawerProps['onCloseBtnClick']>>(this, 'close-btn-click', { e });\n      this.closeDrawer({ trigger: 'close-btn', e });\n    },\n    handleWrapperClick(e: MouseEvent) {\n      emitEvent<Parameters<TdDrawerProps['onOverlayClick']>>(this, 'overlay-click', { e });\n      if (this.closeOnOverlayClick) {\n        this.closeDrawer({ trigger: 'overlay', e });\n      }\n    },\n    onKeyDown(e: KeyboardEvent) {\n      if (e.key === 'Escape') {\n        emitEvent<Parameters<TdDrawerProps['onEscKeydown']>>(this, 'esc-keydown', { e });\n        if (this.closeOnEscKeydown) {\n          this.closeDrawer({ trigger: 'esc', e });\n        }\n      }\n    },\n    confirmBtnAction(e: MouseEvent) {\n      emitEvent<Parameters<TdDrawerProps['onConfirm']>>(this, 'confirm', { e });\n    },\n    cancelBtnAction(e: MouseEvent) {\n      emitEvent<Parameters<TdDrawerProps['onCancel']>>(this, 'cancel', { e });\n      this.closeDrawer({ trigger: 'cancel', e });\n    },\n    closeDrawer(params: DrawerCloseContext) {\n      emitEvent<Parameters<TdDrawerProps['onClose']>>(this, 'close', params);\n      this.$emit('update:visible', false);\n    },\n  },\n});\n"],"names":["name","prefix","lockClass","mixins","ActionMixin","getConfigReceiverMixins","extend","components","CloseIcon","TButton","props","directives","TransferDom","data","isSizeDragging","draggedSizeValue","computed","drawerClasses","placement","visible","showInAttachedElement","showOverlay","sizeValue","defaultSize","isNaN","Number","size","small","medium","large","wrapperStyles","transform","width","isHorizontal","height","isVertical","wrapperClasses","parentNode","$el","modeAndPlacement","mode","join","footerStyle","display","justifyContent","includes","draggableLineStyles","oppositeMap","left","right","top","bottom","zIndex","position","background","watch","handler","handlePushMode","immediate","val","$refs","drawerContainer","focus","handleScrollThrough","updated","updatePushMode","mounted","render","destroyOnClose","defaultCloseBtn","body","renderContent","defaultFooter","getDefaultFooter","onKeyDown","attach","handleWrapperClick","header","renderTNodeJSX","closeBtn","handleCloseBtnClick","footer","sizeDraggable","enableDrag","handleMousemove","disableDrag","methods","e","x","y","document","documentElement","clientWidth","clientHeight","preventScrollThrough","addClass","removeClass","$nextTick","style","cssText","marginStr","replace","getDefaultBtn","btnType","btnApi","isCancel","clickAction","cancelBtnAction","confirmBtnAction","theme","isApiObject","_mergeJSXProps","content","isUseDefault","baseTypes","Boolean","confirmBtn","getConfirmBtn","globalConfirm","global","confirm","className","cancelBtn","getCancelBtn","globalCancel","cancel","emitEvent","closeDrawer","trigger","closeOnOverlayClick","key","closeOnEscKeydown","params","$emit"],"mappings":"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"}