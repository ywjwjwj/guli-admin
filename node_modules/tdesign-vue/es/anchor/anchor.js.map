{"version":3,"file":"anchor.js","sources":["../../src/anchor/anchor.tsx"],"sourcesContent":["import Vue, { VueConstructor } from 'vue';\nimport { ScopedSlotReturnValue } from 'vue/types/vnode';\nimport CLASSNAMES from '../utils/classnames';\nimport { ANCHOR_SHARP_REGEXP, ANCHOR_CONTAINER, getOffsetTop } from './utils';\nimport {\n  on, off, getScroll, scrollTo, getScrollContainer,\n} from '../utils/dom';\nimport props from './props';\nimport { renderTNodeJSX } from '../utils/render-tnode';\n\nimport Affix from '../affix';\nimport { COMPONENT_NAME } from './constant';\n\nconst ANCHOR_LINE_CLASSNAME = `${COMPONENT_NAME}__line` as const;\nconst ANCHOR_LINE_CURSOR_CLASSNAME = `${COMPONENT_NAME}__line-cursor` as const;\n\nexport interface Anchor extends Vue {\n  scrollContainer: ANCHOR_CONTAINER;\n  // 执行scrollTo设置的flag, 用来禁止执行handleScroll\n  handleScrollLock: boolean;\n}\nexport default (Vue as VueConstructor<Anchor>).extend({\n  name: 'TAnchor',\n\n  props: {\n    ...props,\n  },\n  provide(): any {\n    return {\n      tAnchor: this,\n    };\n  },\n  data() {\n    return {\n      links: [] as string[],\n      active: '',\n      activeLineStyle: false as boolean | { top: string; height: string; opacity: number; },\n    };\n  },\n  watch: {\n    attach() {\n      // 清空上一个container的事件监听\n      if (this.scrollContainer) {\n        off(this.scrollContainer, 'scroll', this.handleScroll);\n      }\n      this.getScrollContainer();\n    },\n  },\n  methods: {\n    /**\n     * 获取滚动容器\n     * 1. 如果是string则通过id获取\n     * 2. 如果是method则获取方法返回值\n     */\n    getScrollContainer(): void {\n      const { container } = this;\n      this.scrollContainer = getScrollContainer(container) as HTMLElement;\n      on(this.scrollContainer, 'scroll', this.handleScroll);\n      this.handleScroll();\n    },\n    /**\n     * 获取锚点对应的target元素\n     *\n     * @param {string} link\n     */\n    getAnchorTarget(link: string): HTMLElement {\n      const matcher = link.match(ANCHOR_SHARP_REGEXP);\n      if (!matcher) {\n        return;\n      }\n      const anchor = document.getElementById(matcher[1]);\n      if (!anchor) {\n        return;\n      }\n      return anchor;\n    },\n    /**\n     * 注册锚点\n     *\n     * @param {string} link\n     */\n    registerLink(link: string): void {\n      const { links } = this;\n      if (!ANCHOR_SHARP_REGEXP.test(link) || links.indexOf(link) !== -1) {\n        return;\n      }\n      links.push(link);\n    },\n    /**\n     * 注销锚点\n     *\n     * @param {string} link\n     */\n    unregisterLink(link: string): void {\n      this.links = this.links.filter((each) => each !== link);\n    },\n    /**\n     * 设置当前激活状态锚点\n     *\n     * @param {string} link\n     */\n    async setCurrentActiveLink(link: string): Promise<void> {\n      const { active } = this;\n      if (active === link) {\n        return;\n      }\n      this.active = link;\n      this.emitChange(link, active);\n      await Vue.nextTick();\n      this.updateActiveLine();\n    },\n    /**\n     * 计算active-line所在的位置\n     * 当前active-item的top + height, 以及ANCHOR_ITEM_PADDING修正\n     */\n    updateActiveLine(): void {\n      const ele = this.$el.querySelector(`.${CLASSNAMES.STATUS.active}>a`) as HTMLAnchorElement;\n      if (!ele) {\n        this.activeLineStyle = false;\n        return;\n      }\n      const { offsetTop: top, offsetHeight: height } = ele;\n      this.activeLineStyle = {\n        top: `${top}px`,\n        height: `${height}px`,\n        opacity: 1,\n      };\n    },\n    /**\n     * 触发onchange事件或者props\n     *\n     * @param {string} currentLink\n     * @param {string} prevLink\n     */\n    emitChange(currentLink: string, prevLink: string) {\n      this.$emit('change', currentLink, prevLink);\n      if (this.onChange) {\n        this.onChange(currentLink, prevLink);\n      }\n    },\n    /**\n     * 监听AnchorLink点击事件\n     * @param {{ href: string; title: string , e: MouseEvent }} link\n     */\n    handleLinkClick(link: { href: string; title: string; e: MouseEvent }): void {\n      this.$emit('click', link);\n      if (this.onClick) {\n        this.onClick(link);\n      }\n    },\n    /**\n     * 滚动到指定锚点\n     *\n     * @param {string} link\n     */\n    async handleScrollTo(link: string): Promise<void> {\n      const anchor = this.getAnchorTarget(link);\n      this.setCurrentActiveLink(link);\n      if (!anchor) return;\n      this.handleScrollLock = true;\n      const { scrollContainer, targetOffset } = this;\n      const scrollTop = getScroll(scrollContainer);\n      const offsetTop = getOffsetTop(anchor, scrollContainer);\n      const top = scrollTop + offsetTop - targetOffset;\n      await scrollTo(top, {\n        container: scrollContainer,\n      });\n      this.handleScrollLock = false;\n    },\n    /**\n     * 监听滚动事件\n     */\n    handleScroll(): void {\n      if (this.handleScrollLock) return;\n      const { links, bounds, targetOffset } = this;\n      const filters: { top: number; link: string }[] = [];\n      let active = '';\n      // 找出所有当前top小于预设值\n      links.forEach((link) => {\n        const anchor = this.getAnchorTarget(link);\n        if (!anchor) {\n          return;\n        }\n        const top = getOffsetTop(anchor, this.scrollContainer);\n        if (top < bounds + targetOffset) {\n          filters.push({\n            link,\n            top,\n          });\n        }\n      });\n      // 找出小于预设值集合中top最大的\n      if (filters.length) {\n        const latest = filters.reduce((prev, cur) => (prev.top > cur.top ? prev : cur));\n        active = latest.link;\n      }\n      this.setCurrentActiveLink(active);\n    },\n    renderCursor() {\n      const titleContent: ScopedSlotReturnValue = renderTNodeJSX(this, 'cursor');\n      return titleContent || <div class={ANCHOR_LINE_CURSOR_CLASSNAME}></div>;\n    },\n  },\n\n  async mounted() {\n    const { active } = this;\n    this.getScrollContainer();\n    if (active) {\n      await Vue.nextTick();\n      this.handleScrollTo(active);\n    }\n  },\n\n  destroyed() {\n    if (!this.scrollContainer) return;\n    off(this.scrollContainer, 'scroll', this.handleScroll);\n  },\n\n  render() {\n    const {\n      $scopedSlots: { default: children },\n      size,\n      affixProps,\n      activeLineStyle,\n    } = this;\n    const className = [COMPONENT_NAME, CLASSNAMES.SIZE[size]];\n    const content = (\n      <div class={className}>\n        <div class={ANCHOR_LINE_CLASSNAME}>\n          <div class={`${ANCHOR_LINE_CURSOR_CLASSNAME}-wrapper`} style={activeLineStyle}>\n            {this.renderCursor()}\n          </div>\n        </div>\n        {children && children(null)}\n      </div>\n    );\n\n    if (affixProps) {\n      return <Affix {...{ props: affixProps }}>{content}</Affix>;\n    }\n    return content;\n  },\n});\n"],"names":["ANCHOR_LINE_CLASSNAME","COMPONENT_NAME","ANCHOR_LINE_CURSOR_CLASSNAME","Vue","extend","name","props","provide","tAnchor","data","links","active","activeLineStyle","watch","attach","scrollContainer","off","handleScroll","getScrollContainer","methods","container","on","getAnchorTarget","link","matcher","match","ANCHOR_SHARP_REGEXP","anchor","document","getElementById","registerLink","test","indexOf","push","unregisterLink","filter","each","setCurrentActiveLink","emitChange","nextTick","updateActiveLine","ele","$el","querySelector","CLASSNAMES","STATUS","top","offsetTop","height","offsetHeight","opacity","currentLink","prevLink","$emit","onChange","handleLinkClick","onClick","handleScrollTo","handleScrollLock","targetOffset","scrollTop","getScroll","getOffsetTop","scrollTo","bounds","filters","forEach","length","latest","reduce","prev","cur","renderCursor","titleContent","renderTNodeJSX","mounted","destroyed","render","children","$scopedSlots","size","affixProps","className","SIZE","content"],"mappings":"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"}