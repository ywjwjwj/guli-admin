{"version":3,"file":"breadcrumb-item.js","sources":["../../src/breadcrumb/breadcrumb-item.tsx"],"sourcesContent":["import Vue from 'vue';\nimport { ChevronRightIcon } from 'tdesign-icons-vue';\nimport { prefix } from '../config';\nimport Tooltip from '../tooltip/index';\nimport props from './breadcrumb-item-props';\nimport { isNodeOverflow } from '../utils/dom';\nimport { TNodeReturnValue } from '../common';\n\nconst name = `${prefix}-breadcrumb__item`;\nconst separatorClass = `${prefix}-breadcrumb__separator`;\nconst disableClass = `${prefix}-is-disabled`;\nconst linkClass = `${prefix}-link`;\nconst maxLengthClass = `${prefix}-breadcrumb__inner`;\nconst textFlowClass = `${prefix}-breadcrumb--text-overflow`;\nconst gestureClass = `${prefix}-gestureClass`;\n\nexport interface LocalTBreadcrumb {\n  separator: Function | string;\n  theme: string;\n  $slots: {\n    separator: TNodeReturnValue;\n  };\n  maxItemWidth: string;\n}\nconst localTBreadcrumbOrigin: LocalTBreadcrumb = {\n  separator: '',\n  theme: 'light',\n  $slots: { separator: '' },\n  maxItemWidth: undefined,\n};\nexport default Vue.extend({\n  name: 'TBreadcrumbItem',\n\n  props: {\n    ...props,\n  },\n\n  inject: ['tBreadcrumb'],\n\n  data() {\n    return {\n      localTBreadcrumb: localTBreadcrumbOrigin,\n      themeClassName: '',\n      $router: null,\n      isCutOff: false,\n    };\n  },\n\n  components: {\n    Tooltip,\n  },\n\n  computed: {\n    maxWithStyle() {\n      const { localTBreadcrumb } = this;\n      const { maxItemWidth } = localTBreadcrumb;\n      const maxWith: string = this.maxWidth || maxItemWidth || '120';\n      return { 'max-width': `${maxWith}px` };\n    },\n  },\n\n  watch: {\n    tBreadcrumb: {\n      immediate: true,\n      handler(v): void {\n        this.localTBreadcrumb = v;\n      },\n    },\n  },\n\n  created() {\n    const tBreadcrumb = this.localTBreadcrumb;\n    this.themeClassName = tBreadcrumb.theme;\n  },\n  mounted() {\n    this.isCutOff = isNodeOverflow(this.$refs.breadcrumbText);\n  },\n  beforeUpdate() {\n    this.isCutOff = isNodeOverflow(this.$refs.breadcrumbText);\n  },\n  methods: {\n    bindEvent() {\n      const { to } = this;\n      const router = this.router || this.$router;\n      if (to && router) {\n        this.replace ? router.replace(to) : router.push(to);\n      }\n    },\n  },\n\n  render() {\n    const {\n      localTBreadcrumb, href, target, to, disabled,\n    } = this;\n    const { separator } = localTBreadcrumb;\n    const separatorSlot = localTBreadcrumb.$slots.separator;\n    const separatorPropContent = typeof separator === 'function' ? separator() : separator;\n    const separatorContent = separatorPropContent || separatorSlot || <ChevronRightIcon />;\n    const itemClass = [name, this.themeClassName];\n    const textClass = [textFlowClass];\n\n    if (disabled) {\n      textClass.push(disableClass);\n    }\n\n    if (this.$listeners.click) {\n      textClass.push(gestureClass);\n    }\n\n    const clickEvent = to && !disabled ? { on: { click: this.bindEvent } } : {};\n    const textContent = (\n      <span ref=\"breadcrumbText\" class={maxLengthClass} style={this.maxWithStyle}>\n        {this.$slots.default}\n      </span>\n    );\n    let itemContent = (\n      <span class={textClass} {...{ on: this.$listeners }} {...clickEvent}>\n        {textContent}\n      </span>\n    );\n\n    if (href && !disabled) {\n      textClass.push(linkClass);\n      itemContent = (\n        <a class={textClass} href={href} target={target} {...{ on: this.$listeners }}>\n          {textContent}\n        </a>\n      );\n    }\n    return (\n      <div class={itemClass}>\n        {this.isCutOff ? <Tooltip content={() => this.$slots.default}>{itemContent}</Tooltip> : itemContent}\n        <span class={separatorClass}>{separatorContent}</span>\n      </div>\n    );\n  },\n});\n"],"names":["name","prefix","separatorClass","disableClass","linkClass","maxLengthClass","textFlowClass","gestureClass","localTBreadcrumbOrigin","separator","theme","$slots","maxItemWidth","Vue","extend","props","inject","data","localTBreadcrumb","themeClassName","$router","isCutOff","components","Tooltip","computed","maxWithStyle","maxWith","maxWidth","watch","tBreadcrumb","immediate","handler","v","created","mounted","isNodeOverflow","$refs","breadcrumbText","beforeUpdate","methods","bindEvent","to","router","replace","push","render","href","target","disabled","separatorSlot","separatorPropContent","separatorContent","itemClass","textClass","$listeners","click","clickEvent","on","textContent","itemContent","_mergeJSXProps"],"mappings":";;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AAMA,IAAMA,IAAI,GAAMC,EAAAA,CAAAA,MAAAA,CAAAA,MAAN,EAAV,mBAAA,CAAA,CAAA;AACA,IAAMC,cAAc,GAAMD,EAAAA,CAAAA,MAAAA,CAAAA,MAAN,EAApB,wBAAA,CAAA,CAAA;AACA,IAAME,YAAY,GAAMF,EAAAA,CAAAA,MAAAA,CAAAA,MAAN,EAAlB,cAAA,CAAA,CAAA;AACA,IAAMG,SAAS,GAAMH,EAAAA,CAAAA,MAAAA,CAAAA,MAAN,EAAf,OAAA,CAAA,CAAA;AACA,IAAMI,cAAc,GAAMJ,EAAAA,CAAAA,MAAAA,CAAAA,MAAN,EAApB,oBAAA,CAAA,CAAA;AACA,IAAMK,aAAa,GAAML,EAAAA,CAAAA,MAAAA,CAAAA,MAAN,EAAnB,4BAAA,CAAA,CAAA;AACA,IAAMM,YAAY,GAAMN,EAAAA,CAAAA,MAAAA,CAAAA,MAAN,EAAlB,eAAA,CAAA,CAAA;AACA,IAAMO,sBAAsB,GAAG;AAC7BC,EAAAA,SAAS,EAAE,EADkB;AAE7BC,EAAAA,KAAK,EAAE,OAFsB;AAG7BC,EAAAA,MAAM,EAAE;AAAEF,IAAAA,SAAS,EAAE,EAAA;AAAb,GAHqB;AAI7BG,EAAAA,YAAY,EAAE,KAAK,CAAA;AAJU,CAA/B,CAAA;AAMA,sBAAeC,GAAG,CAACC,MAAJ,CAAW;AACxBd,EAAAA,IAAI,EAAE,iBADkB;AAExBe,EAAAA,KAAK,EACAA,aAAAA,CAAAA,EAAAA,EAAAA,KADA,CAFmB;AAKxBC,EAAAA,MAAM,EAAE,CAAC,aAAD,CALgB;AAMxBC,EAAAA,IANwB,EAMjB,SAAA,IAAA,GAAA;AACL,IAAO,OAAA;AACLC,MAAAA,gBAAgB,EAAEV,sBADb;AAELW,MAAAA,cAAc,EAAE,EAFX;AAGLC,MAAAA,OAAO,EAAE,IAHJ;AAILC,MAAAA,QAAQ,EAAE,KAAA;AAJL,KAAP,CAAA;AAMD,GAbuB;AAcxBC,EAAAA,UAAU,EAAE;AACVC,IAAAA,OAAO,EAAPA,OAAAA;AADU,GAdY;AAiBxBC,EAAAA,QAAQ,EAAE;AACRC,IAAAA,YADQ,EACO,SAAA,YAAA,GAAA;AACb,MAAA,IAAQP,gBAAR,GAA6B,IAA7B,CAAQA,gBAAR,CAAA;AACA,MAAA,IAAQN,YAAR,GAAyBM,gBAAzB,CAAQN,YAAR,CAAA;AACA,MAAA,IAAMc,OAAO,GAAG,IAAA,CAAKC,QAAL,IAAiBf,YAAjB,IAAiC,KAAjD,CAAA;AACA,MAAO,OAAA;AAAE,QAAA,WAAA,EAAA,EAAA,CAAA,MAAA,CAAgBc,OAAhB,EAAA,IAAA,CAAA;AAAF,OAAP,CAAA;AACD,KAAA;AANO,GAjBc;AAyBxBE,EAAAA,KAAK,EAAE;AACLC,IAAAA,WAAW,EAAE;AACXC,MAAAA,SAAS,EAAE,IADA;AAEXC,MAAAA,OAFW,EAEHC,SAAAA,OAAAA,CAAAA,CAFG,EAEA;AACT,QAAKd,IAAAA,CAAAA,gBAAL,GAAwBc,CAAxB,CAAA;AACD,OAAA;AAJU,KAAA;AADR,GAzBiB;AAiCxBC,EAAAA,OAjCwB,EAiCd,SAAA,OAAA,GAAA;AACR,IAAMJ,IAAAA,WAAW,GAAG,IAAA,CAAKX,gBAAzB,CAAA;AACA,IAAA,IAAA,CAAKC,cAAL,GAAsBU,WAAW,CAACnB,KAAlC,CAAA;AACD,GApCuB;AAqCxBwB,EAAAA,OArCwB,EAqCd,SAAA,OAAA,GAAA;AACR,IAAKb,IAAAA,CAAAA,QAAL,GAAgBc,cAAc,CAAC,KAAKC,KAAL,CAAWC,cAAZ,CAA9B,CAAA;AACD,GAvCuB;AAwCxBC,EAAAA,YAxCwB,EAwCT,SAAA,YAAA,GAAA;AACb,IAAKjB,IAAAA,CAAAA,QAAL,GAAgBc,cAAc,CAAC,KAAKC,KAAL,CAAWC,cAAZ,CAA9B,CAAA;AACD,GA1CuB;AA2CxBE,EAAAA,OAAO,EAAE;AACPC,IAAAA,SADO,EACK,SAAA,SAAA,GAAA;AACV,MAAA,IAAQC,EAAR,GAAe,IAAf,CAAQA,EAAR,CAAA;AACA,MAAA,IAAMC,MAAM,GAAG,IAAA,CAAKA,MAAL,IAAe,KAAKtB,OAAnC,CAAA;;AACA,MAAIqB,IAAAA,EAAE,IAAIC,MAAV,EAAkB;AAChB,QAAA,IAAA,CAAKC,OAAL,GAAeD,MAAM,CAACC,OAAP,CAAeF,EAAf,CAAf,GAAoCC,MAAM,CAACE,IAAP,CAAYH,EAAZ,CAApC,CAAA;AACD,OAAA;AACF,KAAA;AAPM,GA3Ce;AAoDxBI,EAAAA,MApDwB,EAoDf,SAAA,MAAA,GAAA;AAAA,IAAA,IAAA,KAAA,GAAA,IAAA,CAAA;;AAAA,IAAA,IAAA,CAAA,GAAA,SAAA,CAAA,CAAA,CAAA,CAAA;AACP,IAAA,IACE3B,gBADF,GAMI,IANJ,CACEA,gBADF;AAAA,QAEE4B,IAFF,GAMI,IANJ,CAEEA,IAFF;AAAA,QAGEC,MAHF,GAMI,IANJ,CAGEA,MAHF;AAAA,QAIEN,EAJF,GAMI,IANJ,CAIEA,EAJF;AAAA,QAKEO,QALF,GAMI,IANJ,CAKEA,QALF,CAAA;AAOA,IAAA,IAAQvC,SAAR,GAAsBS,gBAAtB,CAAQT,SAAR,CAAA;AACA,IAAA,IAAMwC,aAAa,GAAG/B,gBAAgB,CAACP,MAAjB,CAAwBF,SAA9C,CAAA;AACA,IAAMyC,IAAAA,oBAAoB,GAAG,OAAOzC,SAAP,KAAqB,UAArB,GAAkCA,SAAS,EAA3C,GAAgDA,SAA7E,CAAA;AACA,IAAA,IAAM0C,gBAAgB,GAAGD,oBAAoB,IAAID,aAAxB,IAAzB,CAAA,CAAA,gBAAA,CAAA,CAAA;AACA,IAAA,IAAMG,SAAS,GAAG,CAACpD,IAAD,EAAO,IAAA,CAAKmB,cAAZ,CAAlB,CAAA;AACA,IAAA,IAAMkC,SAAS,GAAG,CAAC/C,aAAD,CAAlB,CAAA;;AACA,IAAA,IAAI0C,QAAJ,EAAc;AACZK,MAAAA,SAAS,CAACT,IAAV,CAAezC,YAAf,CAAA,CAAA;AACD,KAAA;;AACD,IAAA,IAAI,IAAKmD,CAAAA,UAAL,CAAgBC,KAApB,EAA2B;AACzBF,MAAAA,SAAS,CAACT,IAAV,CAAerC,YAAf,CAAA,CAAA;AACD,KAAA;;AACD,IAAA,IAAMiD,UAAU,GAAGf,EAAE,IAAI,CAACO,QAAP,GAAkB;AAAES,MAAAA,EAAE,EAAE;AAAEF,QAAAA,KAAK,EAAE,IAAKf,CAAAA,SAAAA;AAAd,OAAA;AAAN,KAAlB,GAAsD,EAAzE,CAAA;AACA,IAAA,IAAMkB,WAAW,GAAA,CAAA,CAAA,MAAA,EAAA;AAAA,MAAA,KAAA,EAAa,gBAAb;AAAA,MAAA,OAAA,EAAqCrD,cAArC;AAAA,MAAA,OAAA,EAA4D,IAAKoB,CAAAA,YAAAA;AAAjE,KAAgF,EAAA,CAAA,IAAA,CAAKd,MAAL,CAAA,SAAA,CAAhF,CAAjB,CAAA,CAAA;AACA,IAAA,IAAIgD,WAAW,GAAA,CAAA,CAAA,MAAA,EAAAC,MAAA,CAAA,CAAA;AAAA,MAAA,OAAA,EAAgBP,SAAhB;AAAA,MAAA,IAAA,EAAA,aAAA,CAAA,EAAA,EAAqC,KAAKC,UAA1C,CAAA;AAAA,KAA4DE,EAAAA,UAA5D,CAAyEE,CAAAA,EAAAA,CAAAA,WAAzE,CAAf,CAAA,CAAA;;AACA,IAAA,IAAIZ,IAAI,IAAI,CAACE,QAAb,EAAuB;AACrBK,MAAAA,SAAS,CAACT,IAAV,CAAexC,SAAf,CAAA,CAAA;AACAuD,MAAAA,WAAW,GAAA,CAAA,CAAA,GAAA,EAAA;AAAA,QAAA,OAAA,EAAaN,SAAb;AAAA,QAAA,OAAA,EAAA;AAAA,UAAA,MAAA,EAA8BP,IAA9B;AAAA,UAA4CC,QAAAA,EAAAA,MAAAA;AAA5C,SAAA;AAAA,QAAA,IAAA,EAAA,aAAA,CAAA,EAAA,EAA8D,KAAKO,UAAnE,CAAA;AAAA,OAAA,EAAA,CAAkFI,WAAlF,CAAX,CAAA,CAAA;AACD,KAAA;;AACD,IAAA,OAAA,CAAA,CAAA,KAAA,EAAA;AAAA,MAAmBN,OAAAA,EAAAA,SAAAA;AAAnB,KAAA,EAAA,CACG,KAAK/B,QAAL,GAAA,CAAA,CAAA,OAAA,EAAA;AAAA,MAAA,OAAA,EAAA;AAAA,QAAkC,SAAA,EAAA,SAAA,OAAA,GAAA;AAAA,UAAM,OAAA,KAAI,CAACV,MAAL,CAAN,SAAA,CAAA,CAAA;AAAA,SAAA;AAAlC,OAAA;AAAA,KAA8DgD,EAAAA,CAAAA,WAA9D,KAAuFA,WAD1F,EAAA,CAAA,CAAA,MAAA,EAAA;AAAA,MAEezD,OAAAA,EAAAA,cAAAA;AAFf,KAAA,EAAA,CAEgCiD,gBAFhC,CAAA,CAAA,CAAA,CAAA,CAAA;AAID,GAAA;AAnFuB,CAAX,CAAf;;;;"}