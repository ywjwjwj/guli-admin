{"version":3,"file":"notificationList.js","sources":["../../src/notification/notificationList.tsx"],"sourcesContent":["import Vue from 'vue';\nimport Notification from './notification';\nimport { prefix } from '../config';\nimport { TdNotificationProps, NotificationOptions } from './type';\nimport { DEFAULT_Z_INDEX, PLACEMENT_OFFSET, DISTANCE } from './const';\nimport { Styles } from '../common';\n\nexport default Vue.extend({\n  components: { Notification },\n  props: {\n    placement: {\n      type: String,\n      default: 'top-right',\n      validator(v: string): boolean {\n        return ['top-left', 'top-right', 'bottom-left', 'bottom-right'].indexOf(v) > -1;\n      },\n    },\n  },\n  data() {\n    return {\n      list: [],\n    };\n  },\n  computed: {\n    styles(): Styles {\n      return {\n        zIndex: DEFAULT_Z_INDEX,\n        ...PLACEMENT_OFFSET[this.placement],\n      };\n    },\n  },\n  methods: {\n    add(options: TdNotificationProps): number {\n      this.list.push(options);\n      return this.list.length - 1;\n    },\n    remove(index: number) {\n      this.list.splice(index, 1);\n    },\n    removeAll() {\n      this.list = [];\n    },\n    getOffset(val: string | number) {\n      if (!val) return;\n      return isNaN(Number(val)) ? val : `${val}px`;\n    },\n    notificationStyles(item: { offset: NotificationOptions['offset']; zIndex: number }) {\n      const styles: Styles = {\n        marginBottom: DISTANCE,\n      };\n      if (item.offset) {\n        styles.position = 'relative';\n        styles.left = this.getOffset(item.offset[0]);\n        styles.top = this.getOffset(item.offset[1]);\n      }\n      if (item.zIndex) styles['z-index'] = item.zIndex;\n      return styles;\n    },\n    getListeners(index: number) {\n      return {\n        'close-btn-click': () => this.remove(index),\n        'duration-end': () => this.remove(index),\n      };\n    },\n  },\n  render() {\n    if (!this.list.length) return;\n    return (\n      <div class={`${prefix}-notification__show--${this.placement}`} style={this.styles}>\n        {this.list.map((item, index) => (\n          <t-notification\n            key={item.id}\n            style={this.notificationStyles(item)}\n            {...{ props: item }}\n            {...{ on: this.getListeners(index) }}\n          />\n        ))}\n      </div>\n    );\n  },\n});\n"],"names":["Vue","extend","components","Notification","props","placement","type","String","validator","v","indexOf","data","list","computed","styles","zIndex","DEFAULT_Z_INDEX","PLACEMENT_OFFSET","methods","add","options","push","length","remove","index","splice","removeAll","getOffset","val","isNaN","Number","notificationStyles","item","marginBottom","DISTANCE","offset","position","left","top","getListeners","render","prefix","map","id"],"mappings":"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"}