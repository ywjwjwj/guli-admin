{"version":3,"file":"submenu.js","sources":["../../src/menu/submenu.tsx"],"sourcesContent":["import {\n  defineComponent,\n  computed,\n  inject,\n  ref,\n  provide,\n  onMounted,\n  getCurrentInstance,\n  watch,\n} from '@vue/composition-api';\nimport { prefix } from '../config';\nimport props from './submenu-props';\nimport { renderContent, renderTNodeJSX } from '../utils/render-tnode';\nimport FakeArrow from '../common-components/fake-arrow';\nimport Ripple from '../utils/ripple';\nimport { TdMenuInterface, TdSubMenuInterface } from './const';\nimport { getKeepAnimationMixins } from '../config-provider/config-receiver';\nimport { AnimationType } from '../config-provider/type';\n\nconst keepAnimationMixins = getKeepAnimationMixins();\n\nexport default defineComponent({\n  name: 'TSubmenu',\n  components: {\n    FakeArrow,\n  },\n  mixins: [keepAnimationMixins],\n  directives: {\n    ripple: Ripple,\n  },\n  props,\n  setup(props, ctx) {\n    const menu = inject<TdMenuInterface>('TdMenu');\n    const {\n      theme, activeValues, expandValues, mode, isHead, open,\n    } = menu;\n    const submenu = inject<TdSubMenuInterface>('TdSubmenu', null);\n\n    const isActive = computed(() => activeValues.value.indexOf(props.value) > -1);\n    const popupVisible = ref(false);\n    const rippleColor = computed(() => (theme.value === 'light' ? '#E7E7E7' : '#383838'));\n    const isOpen = computed(() => {\n      if (mode.value === 'popup') {\n        return popupVisible.value;\n      }\n      return expandValues ? expandValues.value.includes(props.value) : false;\n    });\n    const isNested = ref(false); // 是否嵌套\n    const classes = computed(() => [\n      `${prefix}-submenu`,\n      {\n        [`${prefix}-is-disabled`]: props.disabled,\n        [`${prefix}-is-opened`]: isOpen.value,\n      },\n    ]);\n    const popupClass = computed(() => [\n      `${prefix}-menu__popup`,\n      {\n        [`${prefix}-is-opened`]: popupVisible.value,\n        [`${prefix}-is-vertical`]: !isHead,\n      },\n    ]);\n    const submenuClass = computed(() => [\n      `${prefix}-menu__item`,\n      {\n        [`${prefix}-is-disabled`]: props.disabled,\n        [`${prefix}-is-opened`]: isOpen.value,\n        [`${prefix}-is-active`]: isActive.value,\n      },\n    ]);\n    const subClass = computed(() => [\n      `${prefix}-menu__sub`,\n      {\n        [`${prefix}-is-opened`]: isOpen.value,\n      },\n    ]);\n    const arrowClass = computed(() => [\n      {\n        [`${prefix}-fake-arrow--active`]: isOpen.value,\n      },\n    ]);\n\n    // methods\n    const handleMouseEnter = () => {\n      if (props.disabled) return;\n      popupVisible.value = true;\n    };\n    const handleMouseLeave = () => {\n      popupVisible.value = false;\n    };\n    const handleSubmenuItemClick = () => {\n      if (props.disabled) return;\n      open(props.value);\n    };\n\n    watch(popupVisible, (visible) => {\n      menu.open(props.value, visible ? 'add' : 'remove');\n    });\n\n    // provide\n    provide<TdSubMenuInterface>('TdSubmenu', {\n      value: props.value,\n    });\n\n    onMounted(() => {\n      menu?.vMenu?.add({ value: props.value, parent: submenu?.value });\n      const instance = getCurrentInstance();\n      isNested.value = /submenu/i.test(instance.parent.vnode?.tag);\n\n      // adjust popup height\n      if (ctx.refs.popup) {\n        const rect = (ctx.refs.popupInner as HTMLElement).getBoundingClientRect();\n        const $popup = ctx.refs.popup;\n\n        ($popup as HTMLElement).style.setProperty('--popup-max-height', `${rect.height}px`);\n        ($popup as HTMLElement).style.setProperty('--popup-width', `${rect.width}px`);\n      }\n    });\n\n    return {\n      mode,\n      isHead,\n      isNested,\n      classes,\n      subClass,\n      arrowClass,\n      popupClass,\n      submenuClass,\n      rippleColor,\n      handleMouseEnter,\n      handleMouseLeave,\n      handleSubmenuItemClick,\n    };\n  },\n  methods: {\n    renderHeadSubmenu() {\n      const rippleVal = (this.keepAnimation as Record<AnimationType, boolean>).ripple ? this.rippleColor : false;\n      const normalSubmenu = [\n        <div v-ripple={rippleVal} class={this.submenuClass} onClick={this.handleSubmenuItemClick}>\n          {renderTNodeJSX(this, 'title')}\n        </div>,\n        <ul style=\"opacity: 0; width: 0; height: 0; overflow: hidden\">{renderContent(this, 'default', 'content')}</ul>,\n      ];\n\n      const popupSubmenu = [\n        <div class={this.submenuClass}>\n          {renderTNodeJSX(this, 'title')}\n          <fake-arrow\n            overlayClassName={this.arrowClass}\n            overlayStyle={{ transform: `rotate(${this.isNested ? -90 : 0}deg)` }}\n          />\n        </div>,\n        <div ref=\"popup\" class={this.popupClass}>\n          <ul ref=\"popupInner\" class={`${prefix}-menu__popup-wrapper`}>\n            {renderContent(this, 'default', 'content')}\n          </ul>\n        </div>,\n      ];\n      return this.mode === 'normal' ? normalSubmenu : popupSubmenu;\n    },\n    renderSubmenu() {\n      const hasContent = this.$slots.content || this.$slots.default;\n      const icon = renderTNodeJSX(this, 'icon');\n      const child = renderContent(this, 'default', 'content');\n      let paddingLeft = 44;\n\n      if (/submenu/i.test(this.$parent.$vnode?.tag)) {\n        paddingLeft += 16;\n      }\n\n      const needRotate = this.mode === 'popup' && this.isNested;\n      const rippleVal = (this.keepAnimation as Record<AnimationType, boolean>).ripple ? this.rippleColor : false;\n\n      const normalSubmenu = [\n        <div v-ripple={rippleVal} class={this.submenuClass} onClick={this.handleSubmenuItemClick}>\n          {icon}\n          <span class={[`${prefix}-menu__content`]}>{renderTNodeJSX(this, 'title')}</span>\n          {hasContent && (\n            <fake-arrow\n              overlayClassName={this.arrowClass}\n              overlayStyle={{ transform: `rotate(${needRotate ? -90 : 0}deg)` }}\n            />\n          )}\n        </div>,\n        <ul level={this.level} class={this.subClass} style={{ '--padding-left': `${paddingLeft}px` }}>\n          {child}\n        </ul>,\n      ];\n      const popupSubmenu = [\n        <div class={this.submenuClass}>\n          {icon}\n          <span class={[`${prefix}-menu__content`]}>{renderTNodeJSX(this, 'title')}</span>\n          <fake-arrow\n            overlayClassName={this.arrowClass}\n            overlayStyle={{ transform: `rotate(${needRotate ? -90 : 0}deg)` }}\n          />\n        </div>,\n        <div ref=\"popup\" class={this.popupClass}>\n          <ul ref=\"popupInner\" class={`${prefix}-menu__popup-wrapper`}>\n            {child}\n          </ul>\n        </div>,\n      ];\n\n      return this.mode === 'normal' ? normalSubmenu : popupSubmenu;\n    },\n  },\n  render() {\n    let child = null;\n    let events = {};\n\n    if (this.mode === 'popup') {\n      events = {\n        mouseenter: this.handleMouseEnter,\n        mouseleave: this.handleMouseLeave,\n      };\n    }\n    if (Object.keys(this.$slots).length > 0) {\n      child = this.isHead ? this.renderHeadSubmenu() : this.renderSubmenu();\n    }\n    return (\n      <li class={this.classes} {...{ on: events }}>\n        {child}\n      </li>\n    );\n  },\n});\n"],"names":["keepAnimationMixins","getKeepAnimationMixins","defineComponent","name","components","FakeArrow","mixins","directives","ripple","Ripple","props","setup","props2","ctx","menu","inject","theme","activeValues","expandValues","mode","isHead","open","submenu","isActive","computed","value","indexOf","popupVisible","ref","rippleColor","isOpen","includes","isNested","classes","prefix","disabled","popupClass","submenuClass","subClass","arrowClass","handleMouseEnter","handleMouseLeave","handleSubmenuItemClick","watch","visible","provide","onMounted","vMenu","add","parent","instance","getCurrentInstance","test","vnode","tag","refs","popup","rect","popupInner","getBoundingClientRect","$popup","style","setProperty","height","width","methods","renderHeadSubmenu","rippleVal","keepAnimation","normalSubmenu","renderTNodeJSX","renderContent","popupSubmenu","transform","renderSubmenu","hasContent","$slots","content","icon","child","paddingLeft","$parent","$vnode","needRotate","level","render","events","mouseenter","mouseleave","Object","keys","length"],"mappings":"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"}