{"version":3,"file":"date-range.js","sources":["../../../src/date-picker/panel/date-range.tsx"],"sourcesContent":["import Vue, { PropType } from 'vue';\nimport dayjs from 'dayjs';\nimport TDateHeader from '../basic/header';\nimport TDateTable from '../basic/table';\nimport { DatePickerConfig } from '../../config-provider/config-receiver';\nimport {\n  DateRangeData, DateRangeMethods, DateRangeComputed, DateRangeProps,\n} from '../interface';\nimport { DateValue } from '../type';\nimport { prefix } from '../../config';\n\nimport {\n  getWeeks,\n  getYears,\n  getMonths,\n  flagActive,\n  subtractMonth,\n  addMonth,\n  isSame,\n  getToday,\n  firstUpperCase,\n  setDateTime,\n} from '../../_common/js/date-picker/utils';\nimport props from '../props';\n\nconst TODAY = getToday();\nconst LEFT = 'left';\nconst RIGHT = 'right';\n\nexport default Vue.extend<DateRangeData, DateRangeMethods, DateRangeComputed, DateRangeProps>({\n  name: 'TDatePickerDateRange',\n  components: {\n    TDateHeader,\n    TDateTable,\n  },\n  inheritAttrs: false,\n  props: {\n    global: {\n      type: Object as PropType<DatePickerConfig>,\n    },\n    mode: {\n      type: String,\n      default: 'date',\n      validator: (v: string) => ['year', 'month', 'date'].indexOf(v) > -1,\n    },\n    value: {\n      type: Array,\n      default: () => [TODAY, TODAY],\n    },\n    minDate: Date,\n    maxDate: Date,\n    firstDayOfWeek: props.firstDayOfWeek,\n    disableDate: props.disableDate,\n    onChange: props.onChange,\n    onPick: Function,\n  },\n  data() {\n    return {\n      leftYear: null,\n      leftMonth: null,\n      rightMonth: null,\n      rightYear: null,\n      leftType: this.mode,\n      rightType: this.mode,\n      startValue: null,\n      endValue: null,\n      isFirstClick: true,\n      firstClickValue: null,\n    };\n  },\n  computed: {\n    leftData() {\n      return this.getData({\n        year: this.leftYear,\n        month: this.leftMonth,\n        type: this.leftType,\n      });\n    },\n    rightData() {\n      return this.getData({\n        year: this.rightYear,\n        month: this.rightMonth,\n        type: this.rightType,\n      });\n    },\n  },\n  watch: {\n    value: {\n      handler(value) {\n        const [startValue = TODAY, endValue = TODAY] = value;\n        this.startValue = startValue;\n        this.endValue = endValue;\n      },\n      immediate: true,\n    },\n    mode(value) {\n      this.leftType = value;\n      this.rightType = value;\n    },\n  },\n  created() {\n    this.initialPicker();\n  },\n  beforeDestroy() {\n    this.initialPicker();\n  },\n  methods: {\n    initialPicker() {\n      const data = this.getLeftAndRightDataFromValue(this.value);\n\n      this.leftYear = data.leftYear;\n      this.leftMonth = data.leftMonth;\n      this.rightYear = data.rightYear;\n      this.rightMonth = data.rightMonth;\n\n      this.leftType = this.$props.mode;\n      this.rightType = this.$props.mode;\n      const [startValue, endValue] = this.$props.value;\n      this.startValue = startValue;\n      this.endValue = endValue;\n      this.isFirstClick = true;\n      this.firstClickValue = TODAY;\n    },\n    getLeftAndRightDataFromValue(value: any) {\n      const [startValue = TODAY, endValue = TODAY] = value || this.value;\n      const leftYear = startValue.getFullYear();\n      const leftMonth = startValue.getMonth();\n      let rightMonth = endValue.getMonth();\n      let rightYear = endValue.getFullYear();\n\n      if (this.mode === 'date' && isSame(startValue, endValue, 'month')) {\n        const next = addMonth(endValue, 1);\n        rightMonth = addMonth(endValue, 1).getMonth();\n        rightYear = next.getFullYear();\n      }\n\n      if (this.mode === 'month' && isSame(startValue, endValue, 'year')) {\n        rightYear = leftYear + 1;\n      }\n\n      if (this.mode === 'year' && isSame(startValue, endValue, 'year')) {\n        rightYear = leftYear + 10;\n      }\n\n      return {\n        leftYear,\n        leftMonth,\n        rightMonth,\n        rightYear,\n      };\n    },\n    getData({ year, month, type }) {\n      const {\n        disableDate, minDate, maxDate, startValue, endValue, firstDayOfWeek,\n      } = this;\n      let data;\n\n      const start = startValue;\n      const end = endValue;\n\n      const options = {\n        disableDate,\n        minDate,\n        maxDate,\n        firstDayOfWeek,\n        monthLocal: this.global?.months,\n      };\n\n      switch (type) {\n        case 'date':\n          data = getWeeks({ year, month }, options);\n          break;\n        case 'month':\n          data = getMonths(year, options);\n          break;\n        case 'year':\n          data = getYears(year, options);\n          break;\n        default:\n          break;\n      }\n\n      return flagActive(data, { start, end, type });\n    },\n    getClickHandler(direction: string, date: DateValue, e: MouseEvent) {\n      const type = this[`${direction}Type`];\n      return this[`click${firstUpperCase(type)}`](date, e, direction);\n    },\n    clickHeader(flag: number, direction: string) {\n      const year = this[`${direction}Year`];\n      const month = this[`${direction}Month`];\n      const type = this[`${direction}Type`];\n\n      let monthCount;\n      let next;\n      switch (type) {\n        case 'date':\n          monthCount = 1;\n          break;\n        case 'month':\n          monthCount = 12;\n          break;\n        case 'year':\n          monthCount = 120;\n      }\n\n      const current = new Date(year, month);\n      if (flag === 1) {\n        next = addMonth(current, monthCount);\n      } else if (flag === -1) {\n        next = subtractMonth(current, monthCount);\n      } else {\n        next = new Date();\n      }\n      this[`${direction}Year`] = next.getFullYear();\n      this[`${direction}Month`] = next.getMonth();\n    },\n    clickDate(date: Date, e: MouseEvent) {\n      let partial = 'start';\n      if (this.isFirstClick) {\n        this.startValue = date;\n        this.endValue = date;\n        this.isFirstClick = false;\n        this.firstClickValue = date;\n      } else {\n        if (dayjs(this.firstClickValue).isBefore(dayjs(date), 'day')) {\n          this.endValue = date;\n        } else {\n          this.endValue = this.firstClickValue;\n          this.startValue = date;\n        }\n        this.$props.onChange([setDateTime(this.startValue, 0, 0, 0), setDateTime(this.endValue, 23, 59, 59)]);\n        this.isFirstClick = true;\n        partial = 'end';\n      }\n      this.$props.onPick && this.$props.onPick(date, { e, partial });\n    },\n    clickYear(date: Date, e: MouseEvent, type: string) {\n      if (this.mode === 'year') {\n        if (this.isFirstClick) {\n          this.startValue = date;\n          this.isFirstClick = false;\n          this.firstClickValue = date;\n        } else {\n          this.$props.onChange([this.startValue, this.endValue]);\n          this.isFirstClick = true;\n        }\n      } else {\n        this[`${type}Type`] = 'month';\n        this[`${type}Year`] = date.getFullYear();\n      }\n    },\n    clickMonth(date: Date, e: MouseEvent, type: string) {\n      if (this.mode === 'month') {\n        if (this.isFirstClick) {\n          this.startValue = date;\n          this.isFirstClick = false;\n          this.firstClickValue = date;\n        } else {\n          if (this.endValue < this.startValue) {\n            this.endValue = this.startValue;\n          }\n          this.$props.onChange([this.startValue, this.endValue]);\n          this.isFirstClick = true;\n        }\n      } else {\n        this[`${type}Type`] = 'date';\n        this[`${type}Month`] = date.getMonth();\n        this[`${type}Year`] = date.getFullYear();\n      }\n    },\n    onMouseEnter(date: Date) {\n      if (this.isFirstClick) {\n        return;\n      }\n\n      if (this.firstClickValue.getTime() > date.getTime()) {\n        this.startValue = date;\n        this.endValue = this.firstClickValue;\n      } else {\n        this.startValue = this.firstClickValue;\n        this.endValue = date;\n      }\n    },\n    onTypeChange() {\n      this.startValue = this.firstClickValue;\n      this.endValue = this.firstClickValue;\n    },\n    handleTypeChange(direction: string, type: string) {\n      this.$data[`${direction}Type`] = type;\n    },\n  },\n  render() {\n    const { leftType, rightType, firstDayOfWeek } = this;\n    return (\n      <div class={`${prefix}-date-picker__panels`}>\n        <div class={`${prefix}-date-picker__panel`}>\n          <t-date-header\n            year={this.leftYear}\n            month={this.leftMonth}\n            type={leftType}\n            {...{\n              props: {\n                onBtnClick: (flag: number) => this.clickHeader(flag, LEFT),\n                onTypeChange: (type: string) => this.handleTypeChange(LEFT, type),\n              },\n            }}\n          />\n          <t-date-table\n            type={leftType}\n            first-day-of-week={firstDayOfWeek}\n            data={this.leftData}\n            {...{\n              props: {\n                onCellClick: (date: DateValue, e: MouseEvent) => this.getClickHandler(LEFT, date, e),\n                onCellMouseEnter: this.onMouseEnter,\n              },\n            }}\n          />\n        </div>\n        <div class={`${prefix}-date-picker__panel `}>\n          <t-date-header\n            year={this.rightYear}\n            month={this.rightMonth}\n            type={rightType}\n            {...{\n              props: {\n                onBtnClick: (flag: number) => this.clickHeader(flag, RIGHT),\n                onTypeChange: (type: string) => this.handleTypeChange(RIGHT, type),\n              },\n            }}\n          />\n          <t-date-table\n            type={rightType}\n            first-day-of-week={firstDayOfWeek}\n            data={this.rightData}\n            {...{\n              on: { 'update:type': this.onTypeChange },\n              props: {\n                onCellClick: (date: DateValue, e: MouseEvent) => this.getClickHandler(RIGHT, date, e),\n                onCellMouseEnter: this.onMouseEnter,\n              },\n            }}\n          />\n        </div>\n      </div>\n    );\n  },\n});\n"],"names":["TODAY","getToday","LEFT","RIGHT","Vue","extend","name","components","TDateHeader","TDateTable","inheritAttrs","props","global","type","Object","mode","String","validator","v","indexOf","value","Array","minDate","Date","maxDate","firstDayOfWeek","disableDate","onChange","onPick","Function","data","leftYear","leftMonth","rightMonth","rightYear","leftType","rightType","startValue","endValue","isFirstClick","firstClickValue","computed","leftData","getData","year","month","rightData","watch","handler","immediate","created","initialPicker","beforeDestroy","methods","getLeftAndRightDataFromValue","$props","getFullYear","getMonth","isSame","next","addMonth","start","end","options","monthLocal","months","getWeeks","getMonths","getYears","flagActive","getClickHandler","direction","date","e","firstUpperCase","clickHeader","flag","monthCount","current","subtractMonth","clickDate","partial","dayjs","isBefore","setDateTime","clickYear","clickMonth","onMouseEnter","getTime","onTypeChange","handleTypeChange","$data","render","prefix","onBtnClick","onCellClick","onCellMouseEnter"],"mappings":"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"}