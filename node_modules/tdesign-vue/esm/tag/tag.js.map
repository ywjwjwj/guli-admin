{"version":3,"file":"tag.js","sources":["../../src/tag/tag.tsx"],"sourcesContent":["import Vue from 'vue';\nimport { CloseIcon } from 'tdesign-icons-vue';\nimport { ScopedSlotReturnValue } from 'vue/types/vnode';\nimport CLASSNAMES from '../utils/classnames';\nimport { prefix } from '../config';\nimport props from './props';\nimport mixins from '../utils/mixins';\nimport getConfigReceiverMixins, { TagConfig } from '../config-provider/config-receiver';\nimport { renderTNodeJSX, renderContent } from '../utils/render-tnode';\nimport { TdTagProps } from './type';\nimport { emitEvent } from '../utils/event';\nimport { TNodeReturnValue, ClassName, Styles } from '../common';\n\nconst name = `${prefix}-tag`;\n\nexport default mixins(getConfigReceiverMixins<Vue, TagConfig>('tag')).extend({\n  name: 'TTag',\n\n  props: { ...props },\n\n  computed: {\n    tagClass(): ClassName {\n      return [\n        `${name}`,\n        `${name}--${this.theme}`,\n        CLASSNAMES.SIZE[this.size],\n        `${name}--${this.variant}`,\n        this.shape !== 'square' && `${name}--${this.shape}`,\n        {\n          [`${name}--ellipsis`]: this.maxWidth,\n          [`${name}--close`]: this.closable,\n          [`${prefix}-is-disabled`]: this.disabled,\n          [`${name}--disabled`]: this.disabled,\n        },\n      ];\n    },\n    tagStyle(): Styles {\n      if (this.maxWidth) return { maxWidth: `${this.maxWidth}px` };\n      return {};\n    },\n  },\n\n  methods: {\n    handleClose(e: MouseEvent): void {\n      if (this.disabled) return;\n      emitEvent<Parameters<TdTagProps['onClose']>>(this, 'close', { e });\n    },\n    handleClick(e: MouseEvent): void {\n      if (this.disabled) return;\n      emitEvent<Parameters<TdTagProps['onClick']>>(this, 'click', { e });\n    },\n    getCloseIcon(): ScopedSlotReturnValue {\n      if (!this.closable) return null;\n      const iconClassName = `${prefix}-tag__icon-close`;\n      if (this.global.closeIcon) {\n        return this.global.closeIcon((component, b) => {\n          const tProps = typeof b === 'object' && 'attrs' in b ? b.attrs : {};\n          return this.$createElement(component, {\n            props: { ...tProps },\n            class: iconClassName,\n            nativeOn: {\n              click: this.handleClose,\n            },\n          });\n        });\n      }\n      return <CloseIcon nativeOnClick={this.handleClose} class={iconClassName} />;\n    },\n  },\n\n  render() {\n    // 关闭按钮 自定义组件使用 nativeOnClick 绑定事件\n    const closeIcon = this.getCloseIcon();\n    // 标签内容\n    const tagContent: TNodeReturnValue = renderContent(this, 'default', 'content');\n    const tagContentWithMaxWidth = (\n      <span style={this.tagStyle} class={`${name}--text`}>\n        {tagContent}\n      </span>\n    );\n    // 图标\n    const icon = renderTNodeJSX(this, 'icon');\n\n    return (\n      <span class={this.tagClass} onClick={this.handleClick}>\n        {icon}\n        {this.maxWidth ? tagContentWithMaxWidth : tagContent}\n        {closeIcon}\n      </span>\n    );\n  },\n});\n"],"names":["name","prefix","mixins","getConfigReceiverMixins","extend","props","computed","tagClass","theme","CLASSNAMES","SIZE","size","variant","shape","maxWidth","closable","disabled","tagStyle","methods","handleClose","e","emitEvent","handleClick","getCloseIcon","iconClassName","global","closeIcon","component","b","tProps","attrs","$createElement","nativeOn","click","render","tagContent","renderContent","tagContentWithMaxWidth","icon","renderTNodeJSX"],"mappings":"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"}