{"version":3,"file":"radio.js","sources":["../../src/radio/radio.tsx"],"sourcesContent":["import Vue, { VueConstructor, VNode } from 'vue';\nimport { prefix } from '../config';\nimport CLASSNAMES from '../utils/classnames';\nimport { omit } from '../utils/helper';\nimport { renderContent } from '../utils/render-tnode';\nimport props from './props';\nimport { RadioGroupInstance, RadioButtonInstance } from './instance';\nimport { emitEvent } from '../utils/event';\nimport { TdRadioProps } from './type';\n\nconst name = `${prefix}-radio`;\nexport const radioBtnName = `${prefix}-radio-button`;\n\ninterface RadioInstance extends Vue {\n  radioGroup: RadioGroupInstance;\n  radioButton: RadioButtonInstance;\n}\n\nexport default (Vue as VueConstructor<RadioInstance>).extend({\n  name: 'TRadio',\n\n  inheritAttrs: false,\n\n  props: { ...props },\n\n  inject: {\n    radioGroup: { default: undefined },\n    radioButton: { default: undefined },\n  },\n\n  data() {\n    return {\n      // 表单控制禁用态时的变量\n      formDisabled: undefined,\n    };\n  },\n\n  computed: {\n    tDisabled(): boolean {\n      return this.formDisabled || this.disabled;\n    },\n  },\n\n  render(): VNode {\n    const { radioGroup, radioButton } = this;\n\n    const inputProps = {\n      checked: this.checked,\n      disabled: this.tDisabled,\n      value: this.value,\n      name: this.name,\n    };\n\n    if (radioGroup) {\n      inputProps.checked = this.value === radioGroup.value;\n      inputProps.disabled = this.tDisabled === undefined ? radioGroup.disabled : this.tDisabled;\n      inputProps.name = radioGroup.name;\n    }\n\n    const prefixCls = radioButton ? radioBtnName : name;\n\n    const inputClass = [\n      `${prefixCls}`,\n      {\n        [CLASSNAMES.STATUS.checked]: inputProps.checked,\n        [CLASSNAMES.STATUS.disabled]: inputProps.disabled,\n      },\n    ];\n\n    return (\n      <label class={inputClass}>\n        <input\n          type=\"radio\"\n          class={`${prefixCls}__former`}\n          on={{ ...omit(this.$listeners, ['change', 'click']) }}\n          {...{ domProps: inputProps }}\n          onChange={this.handleChange}\n          onClick={this.handleClick}\n        />\n        <span class={`${prefixCls}__input`}></span>\n        <span class={`${prefixCls}__label`}>{renderContent(this, 'default', 'label')}</span>\n      </label>\n    );\n  },\n\n  methods: {\n    handleChange(e: Event) {\n      if (this.radioGroup) {\n        this.radioGroup.$emit('checked-change', this.value, { e });\n      } else {\n        const target = e.target as HTMLInputElement;\n        emitEvent<Parameters<TdRadioProps['onChange']>>(this, 'change', target.checked, { e });\n      }\n    },\n    handleClick(e: Event) {\n      this.$emit('click');\n      if (!this.checked || !this.allowUncheck) return;\n      if (this.radioGroup) {\n        this.radioGroup.$emit('checked-change', undefined, { e });\n      } else {\n        emitEvent<Parameters<TdRadioProps['onChange']>>(this, 'change', false, { e });\n      }\n    },\n  },\n});\n"],"names":["name","prefix","radioBtnName","Vue","extend","inheritAttrs","props","inject","radioGroup","radioButton","data","formDisabled","computed","tDisabled","disabled","render","inputProps","checked","value","prefixCls","inputClass","_defineProperty","CLASSNAMES","STATUS","_mergeJSXProps","omit","$listeners","handleChange","handleClick","renderContent","methods","e","$emit","target","emitEvent","allowUncheck"],"mappings":"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"}