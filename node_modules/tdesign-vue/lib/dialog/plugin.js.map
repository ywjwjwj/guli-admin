{"version":3,"file":"plugin.js","sources":["../../src/dialog/plugin.tsx"],"sourcesContent":["import Vue from 'vue';\nimport DialogComponent from './dialog';\n\nimport { getAttach } from '../utils/dom';\nimport {\n  DialogOptions,\n  DialogMethod,\n  DialogConfirmMethod,\n  DialogAlertMethod,\n  DialogInstance,\n} from './type';\n\nconst createDialog: DialogMethod = (props: DialogOptions) => {\n  const options = { ...props };\n  options.visible = true;\n  const dialog = new DialogComponent({\n    propsData: {\n      ...options,\n      onClose: options.onClose || (() => {\n        dialog.visible = false;\n      }),\n    },\n  }).$mount();\n  if (options.className) {\n    options.className.split(' ').forEach((name) => {\n      dialog.$el.classList.add(name.trim());\n    });\n  }\n  if (options.style) {\n    (dialog.$el as HTMLElement).style.cssText += options.style;\n  }\n  const container = getAttach(options.attach);\n  if (container) {\n    container.appendChild(dialog.$el);\n  } else {\n    console.error('attach is not exist');\n  }\n\n  const dialogNode: DialogInstance = {\n    show: () => {\n      dialog.visible = true;\n    },\n    hide: () => {\n      dialog.visible = false;\n    },\n    update: (options: DialogOptions) => {\n      Object.assign(dialog, options);\n    },\n    destroy: () => {\n      dialog.visible = false;\n      container.contains(dialog.$el) && container.removeChild(dialog.$el);\n    },\n  };\n  return dialogNode;\n};\ninterface ExtraApi {\n  confirm: DialogConfirmMethod;\n  alert: DialogAlertMethod;\n}\n\nconst confirm: DialogConfirmMethod = (props: DialogOptions) => createDialog(props);\n\nconst alert: DialogAlertMethod = (props: Omit<DialogOptions, 'confirmBtn'>) => {\n  const options = { ...props };\n  options.cancelBtn = null;\n  return createDialog(options);\n};\n\nconst extraApi: ExtraApi = {\n  confirm,\n  alert,\n};\n\nconst _DialogPlugin: Vue.PluginObject<undefined> = {\n  install: () => {\n    Vue.prototype.$dialog = createDialog;\n    Object.keys(extraApi).forEach((funcName) => {\n      Vue.prototype.$dialog[funcName] = extraApi[funcName];\n    });\n  },\n};\n\nObject.keys(extraApi).forEach((funcName) => {\n  _DialogPlugin[funcName] = extraApi[funcName];\n});\n\nexport const DialogPlugin: (\n  Vue.PluginObject<undefined>\n  & DialogMethod\n  & ExtraApi\n) = _DialogPlugin as any;\nexport default DialogPlugin;\n\ndeclare module 'vue/types/vue' {\n  // Bind to `this` keyword\n  interface Vue {\n    $dialog: DialogMethod & ExtraApi;\n  }\n}\n"],"names":["createDialog","props","options","visible","dialog","DialogComponent","propsData","onClose","$mount","className","split","forEach","name","$el","classList","add","trim","style","cssText","container","getAttach","attach","appendChild","console","error","dialogNode","show","hide","update","options2","Object","assign","destroy","contains","removeChild","confirm","alert","cancelBtn","extraApi","_DialogPlugin","install","Vue","prototype","$dialog","keys","funcName","DialogPlugin"],"mappings":"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"}