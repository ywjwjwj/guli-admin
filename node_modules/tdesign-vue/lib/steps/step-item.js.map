{"version":3,"file":"step-item.js","sources":["../../src/steps/step-item.tsx"],"sourcesContent":["import Vue from 'vue';\nimport isFunction from 'lodash/isFunction';\nimport { ScopedSlotReturnValue } from 'vue/types/vnode';\nimport { CheckIcon, CloseIcon } from 'tdesign-icons-vue';\nimport mixins from '../utils/mixins';\nimport getConfigReceiverMixins, { StepsConfig } from '../config-provider/config-receiver';\nimport { prefix } from '../config';\nimport props from './step-item-props';\nimport { renderTNodeJSX, renderContent } from '../utils/render-tnode';\nimport Steps from './steps';\nimport { ClassName } from '../common';\n\nconst name = `${prefix}-steps-item`;\n\nexport interface StepItemType extends Vue {\n  steps: InstanceType<typeof Steps>;\n}\n\nexport default mixins(getConfigReceiverMixins<StepItemType, StepsConfig>('steps')).extend({\n  name: 'TStepItem',\n  props: {\n    ...props,\n  },\n  components: {\n    CheckIcon,\n    CloseIcon,\n  },\n  inject: {\n    steps: { default: undefined },\n  },\n  data() {\n    return {\n      index: -1,\n    };\n  },\n  computed: {\n    current(): string | number {\n      return this.steps && this.steps.current;\n    },\n    baseClass(): ClassName {\n      return [name, { [`${name}--${this.status}`]: this.status }];\n    },\n    iconClass(): ClassName {\n      return [`${name}__icon`, { [`${name}--${this.status}`]: this.status }];\n    },\n    canClick(): boolean {\n      return this.status !== 'process' && !this.steps?.readonly;\n    },\n  },\n  mounted() {\n    this.steps.addItem(this);\n  },\n  destroyed() {\n    this.steps.removeItem(this);\n  },\n  methods: {\n    renderIcon() {\n      let defaultIcon;\n      if (this.steps.theme === 'default') {\n        let icon: ScopedSlotReturnValue = '';\n        switch (this.status) {\n          case 'finish':\n            icon = <check-icon />;\n            break;\n          case 'error':\n            if (isFunction(this.global.errorIcon)) {\n              icon = this.global.errorIcon(this.$createElement);\n            } else {\n              icon = <close-icon />;\n            }\n            break;\n          // default 包含 case 'process' 的情况\n          default:\n            icon = String(this.index + 1);\n            break;\n        }\n        defaultIcon = <span class={`${name}__icon--number`}>{icon}</span>;\n      }\n      return renderTNodeJSX(this, 'icon', defaultIcon);\n    },\n    onStepClick(e: MouseEvent) {\n      const val = this.value === undefined ? this.index : this.value;\n      this.steps.handleChange(val, this.current, e);\n    },\n  },\n  render() {\n    const content = renderContent(this, 'default', 'content');\n    return (\n      <div class={this.baseClass}>\n        <div class={`${name}__inner ${this.canClick ? `${name}--clickable` : ''}`} onClick={this.onStepClick}>\n          <div class={this.iconClass}>{this.renderIcon()}</div>\n          <div class={`${name}__content`}>\n            <div class={`${name}__title`}>{renderTNodeJSX(this, 'title')}</div>\n            <div class={`${name}__description`}>{content}</div>\n            <div class={`${name}__extra`}>{renderTNodeJSX(this, 'extra')}</div>\n          </div>\n        </div>\n      </div>\n    );\n  },\n});\n"],"names":["name","prefix","mixins","getConfigReceiverMixins","extend","props","components","CheckIcon","CloseIcon","inject","steps","data","index","computed","current","baseClass","_defineProperty","status","iconClass","canClick","readonly","mounted","addItem","destroyed","removeItem","methods","renderIcon","defaultIcon","theme","icon","isFunction","global","errorIcon","$createElement","String","renderTNodeJSX","onStepClick","e","val","value","handleChange","render","content","renderContent"],"mappings":";;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AAOA,IAAMA,IAAI,GAAMC,EAAAA,CAAAA,MAAAA,CAAAA,aAAN,EAAV,aAAA,CAAA,CAAA;AACA,gBAAeC,uBAAM,CAACC,wCAAuB,CAAC,OAAD,CAAxB,CAAN,CAAyCC,MAAzC,CAAgD;AAC7DJ,EAAAA,IAAI,EAAE,WADuD;AAE7DK,EAAAA,KAAK,EACAA,aAAAA,CAAAA,EAAAA,EAAAA,8BADA,CAFwD;AAK7DC,EAAAA,UAAU,EAAE;AACVC,IAAAA,SAAS,EAATA,yBADU;AAEVC,IAAAA,SAAS,EAATA,yBAAAA;AAFU,GALiD;AAS7DC,EAAAA,MAAM,EAAE;AACNC,IAAAA,KAAK,EAAE;AAAE,MAAA,SAAA,EAAS,KAAK,CAAA;AAAhB,KAAA;AADD,GATqD;AAY7DC,EAAAA,IAZ6D,EAYtD,SAAA,IAAA,GAAA;AACL,IAAO,OAAA;AACLC,MAAAA,KAAK,EAAE,CAAC,CAAA;AADH,KAAP,CAAA;AAGD,GAhB4D;AAiB7DC,EAAAA,QAAQ,EAAE;AACRC,IAAAA,OADQ,EACE,SAAA,OAAA,GAAA;AACR,MAAA,OAAO,KAAKJ,KAAL,IAAc,IAAKA,CAAAA,KAAL,CAAWI,OAAhC,CAAA;AACD,KAHO;AAIRC,IAAAA,SAJQ,EAII,SAAA,SAAA,GAAA;AACV,MAAO,OAAA,CAACf,IAAD,EAAAgB,mCAAA,CAAA,EAAA,EAAA,EAAA,CAAA,MAAA,CAAahB,IAAb,EAAA,IAAA,CAAA,CAAA,MAAA,CAAsB,KAAKiB,MAA3B,CAAA,EAAsC,IAAKA,CAAAA,MAA3C,CAAP,CAAA,CAAA;AACD,KANO;AAORC,IAAAA,SAPQ,EAOI,SAAA,SAAA,GAAA;AACV,MAAO,OAAA,CAAA,EAAA,CAAA,MAAA,CAAIlB,IAAJ,EAAA,QAAA,CAAA,EAAAgB,mCAAA,CAAA,EAAA,EAAA,EAAA,CAAA,MAAA,CAAwBhB,IAAxB,EAAA,IAAA,CAAA,CAAA,MAAA,CAAiC,KAAKiB,MAAtC,CAAA,EAAiD,IAAKA,CAAAA,MAAtD,CAAP,CAAA,CAAA;AACD,KATO;AAURE,IAAAA,QAVQ,EAUG,SAAA,QAAA,GAAA;AAAA,MAAA,IAAA,WAAA,CAAA;;AACT,MAAO,OAAA,IAAA,CAAKF,MAAL,KAAgB,SAAhB,IAA6B,EAAC,CAAA,WAAA,GAAA,IAAA,CAAKP,KAAN,MAAA,IAAA,IAAA,WAAA,KAAA,KAAA,CAAA,IAAC,WAAYU,CAAAA,QAAb,CAApC,CAAA;AACD,KAAA;AAZO,GAjBmD;AA+B7DC,EAAAA,OA/B6D,EA+BnD,SAAA,OAAA,GAAA;AACR,IAAA,IAAA,CAAKX,KAAL,CAAWY,OAAX,CAAmB,IAAnB,CAAA,CAAA;AACD,GAjC4D;AAkC7DC,EAAAA,SAlC6D,EAkCjD,SAAA,SAAA,GAAA;AACV,IAAA,IAAA,CAAKb,KAAL,CAAWc,UAAX,CAAsB,IAAtB,CAAA,CAAA;AACD,GApC4D;AAqC7DC,EAAAA,OAAO,EAAE;AACPC,IAAAA,UADO,EACM,SAAA,UAAA,GAAA;AAAA,MAAA,IAAA,CAAA,GAAA,IAAA,CAAA,cAAA,CAAA;AACX,MAAA,IAAIC,WAAJ,CAAA;;AACA,MAAA,IAAI,KAAKjB,KAAL,CAAWkB,KAAX,KAAqB,SAAzB,EAAoC;AAClC,QAAIC,IAAAA,IAAI,GAAG,EAAX,CAAA;;AACA,QAAA,QAAQ,KAAKZ,MAAb;AACE,UAAA,KAAK,QAAL;AACEY,YAAAA,IAAI,GAAJ,CAAA,CAAA,YAAA,CAAA,CAAA;AACA,YAAA,MAAA;;AACF,UAAA,KAAK,OAAL;AACE,YAAA,IAAIC,8BAAU,CAAC,IAAA,CAAKC,MAAL,CAAYC,SAAb,CAAd,EAAuC;AACrCH,cAAAA,IAAI,GAAG,IAAKE,CAAAA,MAAL,CAAYC,SAAZ,CAAsB,IAAKC,CAAAA,cAA3B,CAAP,CAAA;AACD,aAFD,MAEO;AACLJ,cAAAA,IAAI,GAAJ,CAAA,CAAA,YAAA,CAAA,CAAA;AACD,aAAA;;AACD,YAAA,MAAA;;AACF,UAAA;AACEA,YAAAA,IAAI,GAAGK,MAAM,CAAC,KAAKtB,KAAL,GAAa,CAAd,CAAb,CAAA;AACA,YAAA,MAAA;AAbJ,SAAA;;AAeAe,QAAAA,WAAW,GAAA,CAAA,CAAA,MAAA,EAAA;AAAA,UAAA,OAAA,EAAA,EAAA,CAAA,MAAA,CAAmB3B,IAAnB,EAAA,gBAAA,CAAA;AAAA,SAAA,EAAA,CAA0C6B,IAA1C,CAAX,CAAA,CAAA;AACD,OAAA;;AACD,MAAA,OAAOM,gCAAc,CAAC,IAAD,EAAO,MAAP,EAAeR,WAAf,CAArB,CAAA;AACD,KAvBM;AAwBPS,IAAAA,WAxBO,EAwBKC,SAAAA,WAAAA,CAAAA,CAxBL,EAwBQ;AACb,MAAA,IAAMC,GAAG,GAAG,IAAKC,CAAAA,KAAL,KAAe,KAAK,CAApB,GAAwB,IAAK3B,CAAAA,KAA7B,GAAqC,IAAA,CAAK2B,KAAtD,CAAA;AACA,MAAK7B,IAAAA,CAAAA,KAAL,CAAW8B,YAAX,CAAwBF,GAAxB,EAA6B,IAAA,CAAKxB,OAAlC,EAA2CuB,CAA3C,CAAA,CAAA;AACD,KAAA;AA3BM,GArCoD;AAkE7DI,EAAAA,MAlE6D,EAkEpD,SAAA,MAAA,GAAA;AAAA,IAAA,IAAA,CAAA,GAAA,SAAA,CAAA,CAAA,CAAA,CAAA;AACP,IAAMC,IAAAA,OAAO,GAAGC,+BAAa,CAAC,IAAD,EAAO,SAAP,EAAkB,SAAlB,CAA7B,CAAA;AACA,IAAA,OAAA,CAAA,CAAA,KAAA,EAAA;AAAA,MAAA,OAAA,EAAmB,IAAK5B,CAAAA,SAAAA;AAAxB,KAAA,EAAA,CAAA,CAAA,CAAA,KAAA,EAAA;AAAA,MAAA,OAAA,EAAA,EAAA,CAAA,MAAA,CAAkDf,IAAlD,EAAiE,UAAA,CAAA,CAAA,MAAA,CAAA,IAAA,CAAKmB,QAAL,GAAmBnB,EAAAA,CAAAA,MAAAA,CAAAA,IAAnB,mBAAuC,EAAxG,CAAA;AAAA,MAAA,IAAA,EAAA;AAAA,QAAA,OAAA,EAAuH,IAAKoC,CAAAA,WAAAA;AAA5H,OAAA;AAAA,KAAA,EAAA,CAAA,CAAA,CAAA,KAAA,EAAA;AAAA,MAAA,OAAA,EACc,IAAKlB,CAAAA,SAAAA;AADnB,KAC+B,EAAA,CAAA,IAAA,CAAKQ,UAAL,EAD/B,CAAA,CAAA,EAAA,CAAA,CAAA,KAAA,EAAA;AAAA,MAAA,OAAA,EAAA,EAAA,CAAA,MAAA,CAEiB1B,IAFjB,EAAA,WAAA,CAAA;AAAA,KAAA,EAAA,CAAA,CAAA,CAAA,KAAA,EAAA;AAAA,MAAA,OAAA,EAAA,EAAA,CAAA,MAAA,CAGmBA,IAHnB,EAAA,SAAA,CAAA;AAAA,KAAA,EAAA,CAGmCmC,gCAAc,CAAC,IAAD,EAAO,OAAP,CAHjD,CAAA,CAAA,EAAA,CAAA,CAAA,KAAA,EAAA;AAAA,MAAA,OAAA,EAAA,EAAA,CAAA,MAAA,CAImBnC,IAJnB,EAAA,eAAA,CAAA;AAAA,KAAA,EAAA,CAIyC0C,OAJzC,CAAA,CAAA,EAAA,CAAA,CAAA,KAAA,EAAA;AAAA,MAAA,OAAA,EAAA,EAAA,CAAA,MAAA,CAKmB1C,IALnB,EAAA,SAAA,CAAA;AAAA,KAAA,EAAA,CAKmCmC,gCAAc,CAAC,IAAD,EAAO,OAAP,CALjD,CAAA,CAAA,CAAA,CAAA,CAAA,CAAA,CAAA,CAAA,CAAA;AAQD,GAAA;AA5E4D,CAAhD,CAAf;;;;"}