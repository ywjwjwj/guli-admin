{"version":3,"file":"map-props.js","sources":["../../src/utils/map-props.ts"],"sourcesContent":["import Vue, { ComponentOptions, CreateElement, VueConstructor } from 'vue';\n\nconst defaultModel = {\n  prop: 'value',\n  event: 'input',\n};\n\nfunction toCamel(str: string): string {\n  return str.replace(/-([a-z])/ig, (m, letter) => letter.toUpperCase());\n}\n\ntype PropOption = {\n  name: string;\n  event?: string | string[];\n  alias?: string[];\n};\n\ntype Option = {\n  model?: typeof defaultModel;\n};\n\ntype ParsedPropOption = {\n  defaultName: string;\n  dataName: string;\n  events: string[];\n  alias?: string[];\n  [propName: string]: any;\n};\n\nfunction getPropOptionMap(props: (string | PropOption)[], options: Option = {}): { [name: string]: ParsedPropOption } {\n  const propOptionMap = {};\n\n  const { model } = options;\n\n  function parseProp(propOption: PropOption): ParsedPropOption {\n    const {\n      name: propName,\n      ...others\n    } = propOption;\n    const camelName = propName.replace(/^[a-z]/, (letter: string) => letter.toUpperCase());\n    const defaultName = `default${camelName}`;\n    const dataName = `data${camelName}`;\n\n    let events: string[] = [];\n    if (propOption.event) {\n      events = events.concat(propOption.event);\n    } else if (model.prop === propName) {\n      events = events.concat(model.event);\n    } else {\n      events = events.concat(`update:${propName}`);\n    }\n\n    return {\n      events,\n      defaultName,\n      dataName,\n      ...others,\n    };\n  }\n\n  props.forEach((prop: string | PropOption) => {\n    const defaultOption = {\n      alias: [] as string[],\n    };\n    let propOption: PropOption;\n    if (typeof prop === 'string') {\n      propOption = { ...defaultOption, name: prop };\n    } else {\n      propOption = { ...defaultOption, ...prop };\n    }\n\n    propOptionMap[propOption.name] = parseProp(propOption);\n  });\n\n  return propOptionMap;\n}\n\nexport default function (props: (string | PropOption)[], options: Option = {}) {\n  function mapProps(componentConstructor: VueConstructor | any) {\n    const component: ComponentOptions<Vue> = componentConstructor.prototype\n      ? componentConstructor.prototype.constructor.options\n      : componentConstructor;\n    const model = options.model || defaultModel;\n    const propOptionMap = getPropOptionMap(props, { model });\n\n    const defineProps: Record<string, any> = { ...component.props };\n    const defineWatches = {};\n    let defineEvents: string[] = [];\n    const defineMethods = {};\n\n    const propsKeys: string[] = Object.keys(component.props);\n    const camelPropsKeys = propsKeys.map((key) => toCamel(key));\n\n    Object.keys(propOptionMap).forEach((propName) => {\n      const {\n        events, alias, defaultName, dataName,\n      } = propOptionMap[propName];\n\n      defineProps[propName] = component.props[propName];\n      defineProps[defaultName] = component.props[defaultName];\n      if (alias) {\n        alias.forEach((prop: string) => {\n          defineProps[prop] = defineProps[propName];\n        });\n      }\n      defineEvents = defineEvents.concat(events);\n\n      // watch default prop\n      defineWatches[defaultName] = {\n        handler(v: any): void {\n          if (\n            defaultName in this.$vnode.componentOptions.propsData\n            && !(propName in this.$vnode.componentOptions.propsData)\n          ) {\n            this.$data[dataName] = v;\n          }\n        },\n        immediate: true,\n      };\n\n      // watch alias\n      alias.forEach((aliasItem) => {\n        defineWatches[aliasItem] = {\n          handler(v: any): void {\n            if (\n              aliasItem in this.$vnode.componentOptions.propsData\n              && !(propName in this.$vnode.componentOptions.propsData)\n            ) {\n              this.$data[dataName] = v;\n            }\n          },\n          immediate: true,\n        };\n      });\n\n      // watch prop\n      defineWatches[propName] = {\n        handler(v: any): void {\n          if (propName in this.$vnode.componentOptions.propsData) {\n            this.$data[dataName] = v;\n          }\n        },\n        immediate: true,\n      };\n    });\n    if (component.methods) {\n      Object.keys(component.methods).forEach((key) => {\n        defineMethods[key] = function (this: any, ...args: any[]): any {\n          if (this.$refs.component) {\n            return this.$refs.component[key](...args);\n          }\n        };\n      });\n    }\n\n    const { name } = component;\n    return Vue.extend({\n      name: `${name}-mapprops`,\n      inheritAttrs: false,\n      model: {\n        prop: model.prop,\n        event: Array.isArray(model.event) ? model.event[0] : model.event,\n      },\n      data() {\n        const data = {};\n        Object.keys(propOptionMap).forEach((propName: string): void => {\n          const { dataName } = propOptionMap[propName];\n          data[dataName] = undefined;\n        });\n        return { ...data };\n      },\n      props: {\n        ...defineProps,\n      },\n      computed: {\n        _listeners(): Record<string, any> {\n          const others = {};\n          Object.keys(this.$listeners).forEach((event: string): void => {\n            if (defineEvents.indexOf(event) === -1) {\n              others[event] = (...args: any[]): void => {\n                // (this.$listeners[event] as Function)(...args);\n                this.$emit(event, ...args);\n              };\n            }\n          });\n          return others;\n        },\n      },\n      watch: defineWatches,\n      render(h: CreateElement) {\n        const propMap = {};\n        const handlerMap = {};\n\n        Object.keys(propOptionMap).forEach((propName: string): void => {\n          const { dataName, events } = propOptionMap[propName];\n          if (\n            propName in this.$vnode.componentOptions.propsData\n            || typeof this[dataName] !== 'undefined'\n          ) {\n            propMap[propName] = this[dataName];\n          }\n          // 只监听第一个定义的事件，参数取第一个事件参数\n          handlerMap[events[0]] = (v: any, ...args: any[]): any => this.updateData(propName, v, ...args);\n        });\n\n        const attrs = {};\n        Object.keys(this.$attrs).forEach((attrName) => {\n          const camelAttrKey = toCamel(attrName);\n          if (camelPropsKeys.indexOf(camelAttrKey) === -1) {\n            attrs[attrName] = this.$attrs[attrName];\n          }\n        });\n\n        return h(component, {\n          props: {\n            ...this.$props,\n            ...propMap,\n          },\n\n          attrs: {\n            ...attrs,\n          },\n\n          on: {\n            ...this._listeners as Record<string, any>,\n            ...handlerMap,\n          },\n\n          scopedSlots: {\n            ...this.$scopedSlots,\n          },\n\n          ref: 'component',\n        });\n      },\n      methods: {\n        updateData(this: any, propName: string, v: any, ...args: any[]): any {\n          propOptionMap[propName].events.forEach((event) => {\n            this.$emit(event, v, ...args);\n          });\n          if (!(propName in this.$vnode.componentOptions.propsData)) {\n            this[propOptionMap[propName].dataName] = v;\n            return true;\n          }\n        },\n        ...defineMethods,\n      },\n    });\n  }\n\n  return mapProps;\n}\n"],"names":["defaultModel","prop","event","toCamel","str","replace","m","letter","toUpperCase","getPropOptionMap","props","options","propOptionMap","model","parseProp","propOption","propName","name","others","camelName","defaultName","dataName","events","concat","forEach","defaultOption","alias","mapProps","componentConstructor","component","prototype","constructor","defineProps","defineWatches","defineEvents","defineMethods","propsKeys","Object","keys","camelPropsKeys","map","key","handler","v","$vnode","componentOptions","propsData","$data","immediate","aliasItem","methods","$refs","Vue","extend","inheritAttrs","Array","isArray","data","computed","_listeners","$listeners","indexOf","args","$emit","watch","render","h","propMap","handlerMap","updateData","attrs","$attrs","attrName","camelAttrKey","$props","on","scopedSlots","$scopedSlots","ref"],"mappings":"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"}