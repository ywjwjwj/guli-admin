{"version":3,"file":"switch.js","sources":["../../src/switch/switch.tsx"],"sourcesContent":["import Vue, { VNode } from 'vue';\nimport { prefix } from '../config';\nimport CLASSNAMES from '../utils/classnames';\nimport Loading from '../loading';\nimport { SwitchValue } from './type';\nimport props from './props';\nimport { ClassName, TNodeReturnValue } from '../common';\n\nconst name = `${prefix}-switch`;\n\nexport default Vue.extend({\n  name: 'TSwitch',\n\n  props: { ...props },\n\n  model: {\n    prop: 'value',\n    event: 'change',\n  },\n\n  data() {\n    return {\n      // 表单控制禁用态时的变量\n      formDisabled: undefined,\n    };\n  },\n\n  computed: {\n    classes(): ClassName {\n      return [\n        `${name}`,\n        CLASSNAMES.SIZE[this.size],\n        {\n          [CLASSNAMES.STATUS.disabled]: this.tDisabled,\n          [CLASSNAMES.STATUS.loading]: this.loading,\n          [CLASSNAMES.STATUS.checked]: this.value === this.activeValue,\n        },\n      ];\n    },\n    nodeClasses(): ClassName {\n      return [\n        `${name}__handle`,\n        {\n          [CLASSNAMES.STATUS.disabled]: this.tDisabled,\n          [CLASSNAMES.STATUS.loading]: this.loading,\n        },\n      ];\n    },\n    contentClasses(): ClassName {\n      return [\n        `${name}__content`,\n        CLASSNAMES.SIZE[this.size],\n        {\n          [CLASSNAMES.STATUS.disabled]: this.tDisabled,\n        },\n      ];\n    },\n    tDisabled(): boolean {\n      return this.formDisabled || this.disabled;\n    },\n    activeValue(): SwitchValue {\n      if (this.customValue && this.customValue.length > 0) {\n        return this.customValue[0];\n      }\n      return true;\n    },\n    inactiveValue(): SwitchValue {\n      if (this.customValue && this.customValue.length > 1) {\n        return this.customValue[1];\n      }\n      return false;\n    },\n    content(): TNodeReturnValue {\n      if (typeof this.label === 'function') {\n        return this.label(this.$createElement, { value: this.value });\n      }\n      if (typeof this.label === 'string') {\n        return this.label;\n      }\n      if (Array.isArray(this.label)) {\n        const label = this.value === this.activeValue ? this.label[0] : this.label[1];\n        if (!label) return;\n        if (typeof label === 'string') {\n          return label;\n        }\n        if (typeof label === 'function') {\n          return label(this.$createElement);\n        }\n      }\n      if (this.$scopedSlots.label) {\n        return this.$scopedSlots.label({ value: this.value });\n      }\n      return null;\n    },\n  },\n  watch: {\n    value: {\n      handler(val: SwitchValue): void {\n        if (this.customValue && this.customValue.length && !this.customValue.includes(val)) {\n          throw `value is not in ${JSON.stringify(this.customValue)}`;\n        }\n      },\n      immediate: true,\n    },\n  },\n  methods: {\n    handleToggle(): void {\n      const checked = this.value === this.activeValue ? this.inactiveValue : this.activeValue;\n      typeof this.onChange === 'function' && this.onChange(checked);\n      this.$emit('change', checked);\n    },\n    toggle(): void {\n      if (this.tDisabled || this.loading) {\n        return;\n      }\n      this.handleToggle();\n    },\n  },\n  render(): VNode {\n    const {\n      loading, disabled, content, nodeClasses, classes, toggle, contentClasses,\n    } = this;\n\n    let switchContent: TNodeReturnValue;\n    let loadingContent: TNodeReturnValue;\n\n    if (loading) {\n      loadingContent = <Loading size=\"small\" />;\n    } else if (content) {\n      switchContent = content;\n    }\n\n    return (\n      <div class={classes} disabled={disabled} onClick={toggle}>\n        <span class={nodeClasses}>{loadingContent}</span>\n        <div class={contentClasses}>{switchContent}</div>\n      </div>\n    );\n  },\n});\n"],"names":["name","prefix","Vue","extend","props","model","prop","event","data","formDisabled","computed","classes","CLASSNAMES","SIZE","size","_defineProperty","STATUS","disabled","tDisabled","loading","checked","value","activeValue","nodeClasses","contentClasses","customValue","length","inactiveValue","content","label","$createElement","Array","isArray","$scopedSlots","watch","handler","val","includes","JSON","stringify","immediate","methods","handleToggle","onChange","$emit","toggle","render","switchContent","loadingContent","Loading"],"mappings":"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"}