{"code":"(window.webpackJsonp=window.webpackJsonp||[]).push([[\"chunk-258c\"],{\"1riY\":function(e,t,n){\"use strict\";n.r(t);var i=n(\"QbLZ\"),s=n.n(i),o=n(\"xash\"),r=n(\"Pl4H\"),a=n(\"4d7F\"),c=n.n(a),u=n(\"GQeE\"),l=n.n(u),d={name:\"EditorSlideUpload\",props:{color:{type:String,default:\"#1890ff\"}},data:function(){return{dialogVisible:!1,listObj:{},fileList:[]}},methods:{checkAllSuccess:function(){var e=this;return l()(this.listObj).every(function(t){return e.listObj[t].hasSuccess})},handleSubmit:function(){var e=this,t=l()(this.listObj).map(function(t){return e.listObj[t]});this.checkAllSuccess()?(this.$emit(\"successCBK\",t),this.listObj={},this.fileList=[],this.dialogVisible=!1):this.$message(\"请等待所有图片上传成功 或 出现了网络问题，请刷新页面重新上传！\")},handleSuccess:function(e,t){for(var n=t.uid,i=l()(this.listObj),s=0,o=i.length;s<o;s++)if(this.listObj[i[s]].uid===n)return this.listObj[i[s]].url=e.files.file,void(this.listObj[i[s]].hasSuccess=!0)},handleRemove:function(e){for(var t=e.uid,n=l()(this.listObj),i=0,s=n.length;i<s;i++)if(this.listObj[n[i]].uid===t)return void delete this.listObj[n[i]]},beforeUpload:function(e){var t=this,n=window.URL||window.webkitURL,i=e.uid;return this.listObj[i]={},new c.a(function(s,o){var r=new Image;r.src=n.createObjectURL(e),r.onload=function(){t.listObj[i]={hasSuccess:!1,uid:e.uid,width:this.width,height:this.height}},s(!0)})}}},f=(n(\"wn0B\"),n(\"KHd+\")),h=Object(f.a)(d,function(){var e=this,t=e.$createElement,n=e._self._c||t;return n(\"div\",{staticClass:\"upload-container\"},[n(\"el-button\",{style:{background:e.color,borderColor:e.color},attrs:{icon:\"el-icon-upload\",size:\"mini\",type:\"primary\"},on:{click:function(t){e.dialogVisible=!0}}},[e._v(\"上传图片\\n  \")]),e._v(\" \"),n(\"el-dialog\",{attrs:{visible:e.dialogVisible},on:{\"update:visible\":function(t){e.dialogVisible=t}}},[n(\"el-upload\",{staticClass:\"editor-slide-upload\",attrs:{multiple:!0,\"file-list\":e.fileList,\"show-file-list\":!0,\"on-remove\":e.handleRemove,\"on-success\":e.handleSuccess,\"before-upload\":e.beforeUpload,action:\"https://httpbin.org/post\",\"list-type\":\"picture-card\"}},[n(\"el-button\",{attrs:{size:\"small\",type:\"primary\"}},[e._v(\"点击上传\")])],1),e._v(\" \"),n(\"el-button\",{on:{click:function(t){e.dialogVisible=!1}}},[e._v(\"取 消\")]),e._v(\" \"),n(\"el-button\",{attrs:{type:\"primary\"},on:{click:e.handleSubmit}},[e._v(\"确 定\")])],1)],1)},[],!1,null,\"39480e6e\",null);h.options.__file=\"editorImage.vue\";var m=[\"advlist anchor autolink autosave code codesample colorpicker colorpicker contextmenu directionality emoticons fullscreen hr image imagetools importcss insertdatetime link lists media nonbreaking noneditable pagebreak paste preview print save searchreplace spellchecker tabfocus table template textcolor textpattern visualblocks visualchars wordcount\"],p=[\"searchreplace bold italic underline strikethrough alignleft aligncenter alignright outdent indent  blockquote undo redo removeformat subscript superscript code codesample\",\"hr bullist numlist link image charmap preview anchor pagebreak insertdatetime media table emoticons forecolor backcolor fullscreen\"],b={name:\"Tinymce\",components:{editorImage:h.exports},props:{id:{type:String,default:function(){return\"vue-tinymce-\"+ +new Date+(1e3*Math.random()).toFixed(0)}},value:{type:String,default:\"\"},toolbar:{type:Array,required:!1,default:function(){return[]}},menubar:{type:String,default:\"file edit insert view format table\"},height:{type:Number,required:!1,default:360}},data:function(){return{hasChange:!1,hasInit:!1,tinymceId:this.id,fullscreen:!1,languageTypeList:{en:\"en\",zh:\"zh_CN\"}}},computed:{language:function(){return this.languageTypeList[this.$store.getters.language]}},watch:{value:function(e){var t=this;!this.hasChange&&this.hasInit&&this.$nextTick(function(){return window.tinymce.get(t.tinymceId).setContent(e||\"\")})},language:function(){var e=this;this.destroyTinymce(),this.$nextTick(function(){return e.initTinymce()})}},mounted:function(){this.initTinymce()},activated:function(){this.initTinymce()},deactivated:function(){this.destroyTinymce()},destroyed:function(){this.destroyTinymce()},methods:{initTinymce:function(){var e=this,t=this;window.tinymce.init({language:this.language,selector:\"#\"+this.tinymceId,height:this.height,body_class:\"panel-body \",object_resizing:!1,toolbar:this.toolbar.length>0?this.toolbar:p,menubar:this.menubar,plugins:m,end_container_on_empty_block:!0,powerpaste_word_import:\"clean\",code_dialog_height:450,code_dialog_width:1e3,advlist_bullet_styles:\"square\",advlist_number_styles:\"default\",imagetools_cors_hosts:[\"www.tinymce.com\",\"codepen.io\"],default_link_target:\"_blank\",link_title:!1,nonbreaking_force_tab:!0,init_instance_callback:function(n){t.value&&n.setContent(t.value),t.hasInit=!0,n.on(\"NodeChange Change KeyUp SetContent\",function(){e.hasChange=!0,e.$emit(\"input\",n.getContent())})},setup:function(e){e.on(\"FullscreenStateChanged\",function(e){t.fullscreen=e.state})}})},destroyTinymce:function(){window.tinymce.get(this.tinymceId)&&window.tinymce.get(this.tinymceId).destroy()},setContent:function(e){window.tinymce.get(this.tinymceId).setContent(e)},getContent:function(){window.tinymce.get(this.tinymceId).getContent()},imageSuccessCBK:function(e){var t=this;e.forEach(function(e){window.tinymce.get(t.tinymceId).insertContent('<img class=\"wscnph\" src=\"'+e.url+'\" >')})}}},g=(n(\"79La\"),Object(f.a)(b,function(){var e=this.$createElement,t=this._self._c||e;return t(\"div\",{staticClass:\"tinymce-container editor-container\",class:{fullscreen:this.fullscreen}},[t(\"textarea\",{staticClass:\"tinymce-textarea\",attrs:{id:this.tinymceId}}),this._v(\" \"),t(\"div\",{staticClass:\"editor-custom-btn-container\"},[t(\"editorImage\",{staticClass:\"editor-upload-btn\",attrs:{color:\"#1890ff\"},on:{successCBK:this.imageSuccessCBK}})],1)])},[],!1,null,\"261f5e1f\",null));g.options.__file=\"index.vue\";var v=g.exports,I={title:\"\",subjectId:\"\",subjectParentId:\"\",teacherId:\"\",lessonNum:0,description:\"\",cover:Object({NODE_ENV:\"production\",BASE_API:\"https://easy-mock.com/mock/5950a2419adc231f356a6636/vue-admin\"}).OSS_PATH+\"/img/zs1.png\",price:0},y={components:{Tinymce:v},data:function(){return{courseId:\"\",saveBtnDisabled:!1,courseInfo:I,teacherList:[],subjectOneList:[],subjectTwoList:[],BASE_API:\"https://easy-mock.com/mock/5950a2419adc231f356a6636/vue-admin\"}},created:function(){this.$route.params&&this.$route.params.id?(this.courseId=this.$route.params.id,console.log(this.courseId),this.getInfo()):(this.getListTeacher(),this.getSubjectTree(),this.courseInfo=s()({},I))},watch:{},methods:{getInfo:function(){var e=this;o.a.getCourseInfoId(this.courseId).then(function(t){e.courseInfo=t.data.courseInfoVo,r.a.getSubjectTree().then(function(t){e.subjectOneList=t.data.list;for(var n=0;n<e.subjectOneList.length;n++)if(e.subjectOneList[n].id===e.courseInfo.subjectParentId)return e.subjectTwoList=e.subjectOneList[n].children,!1}),e.getListTeacher()})},handleAvatarSuccess:function(e,t){console.log(e),console.log(URL.createObjectURL(t.raw)),this.courseInfo.cover=e.data.url},beforeAvatarUpload:function(e){var t=\"image/jpeg\"===e.type,n=e.size/1024/1024<2;return t||this.$message.error(\"上传头像图片只能是 JPG 格式!\"),n||this.$message.error(\"上传头像图片大小不能超过 2MB!\"),t&&n},subjectLevelOneChanged:function(e){for(var t=0;t<this.subjectOneList.length;t++)if(this.subjectOneList[t].id===e)return this.subjectTwoList=this.subjectOneList[t].children,void(this.courseInfo.subjectId=this.subjectTwoList[0].title)},getSubjectTree:function(){var e=this;r.a.getSubjectTree().then(function(t){e.subjectOneList=t.data.list})},getListTeacher:function(){var e=this;o.a.getListTeacher().then(function(t){e.teacherList=t.data.items})},addCourse:function(){var e=this;o.a.addCourseInfo(this.courseInfo).then(function(t){e.$message({type:\"success\",message:\"成功\"}),e.$router.push({path:\"/edu/course/chapter/\"+t.data.courseId})})},updateCourse:function(){var e=this;o.a.updateCourseInfo(this.courseInfo).then(function(t){return e.$message({type:\"success\",message:\"修改成功!\"}),t}).then(function(t){console.log(e.courseId),e.$router.push({path:\"/course/chapter/\"+t.data.courseId})}).catch(function(t){e.$message({type:\"error\",message:\"保存失败\"})})},saveOrUpadte:function(){this.courseInfo.id?this.updateCourse():this.addCourse()}}},_=(n(\"2qtX\"),Object(f.a)(y,function(){var e=this,t=e.$createElement,n=e._self._c||t;return n(\"div\",{staticClass:\"app-container\"},[n(\"h2\",{staticStyle:{\"text-align\":\"center\"}},[e._v(\"添加新课程\")]),e._v(\" \"),n(\"el-steps\",{staticStyle:{\"margin-bottom\":\"40px\"},attrs:{active:1,\"process-status\":\"wait\",\"align-center\":\"\"}},[n(\"el-step\",{attrs:{title:\"填写课程基本信息\"}}),e._v(\" \"),n(\"el-step\",{attrs:{title:\"完善课程详情并上传视频\"}}),e._v(\" \"),n(\"el-step\",{attrs:{title:\"发布课程\"}})],1),e._v(\" \"),n(\"t-steps\",{staticStyle:{\"margin-bottom\":\"40px\"},attrs:{defaultCurrent:1,\"align-center\":\"\"}},[n(\"t-step-item\",{attrs:{title:\"填写课程基本信息\"}}),e._v(\" \"),n(\"t-step-item\",{attrs:{title:\"创建课程大纲\"}}),e._v(\" \"),n(\"t-step-item\",{attrs:{title:\"发布课程\"}})],1),e._v(\" \"),n(\"el-form\",{attrs:{\"label-width\":\"120px\"}},[n(\"el-form-item\",{attrs:{label:\"课程标题\"}},[n(\"el-input\",{attrs:{placeholder:\" 示例：机器学习项目课：从基础到搭建项目视频课程。专业名称注意大小写\"},model:{value:e.courseInfo.title,callback:function(t){e.$set(e.courseInfo,\"title\",t)},expression:\"courseInfo.title\"}})],1),e._v(\" \"),n(\"el-form-item\",{attrs:{label:\"课程类别\"}},[n(\"el-select\",{attrs:{placeholder:\"一级分类\"},on:{change:e.subjectLevelOneChanged},model:{value:e.courseInfo.subjectParentId,callback:function(t){e.$set(e.courseInfo,\"subjectParentId\",t)},expression:\"courseInfo.subjectParentId\"}},e._l(e.subjectOneList,function(e){return n(\"el-option\",{key:e.id,attrs:{label:e.title,value:e.id}})})),e._v(\" \"),n(\"el-select\",{attrs:{placeholder:\"二级分类\"},model:{value:e.courseInfo.subjectId,callback:function(t){e.$set(e.courseInfo,\"subjectId\",t)},expression:\"courseInfo.subjectId\"}},e._l(e.subjectTwoList,function(e){return n(\"el-option\",{key:e.id,attrs:{label:e.title,value:e.id}})}))],1),e._v(\" \"),n(\"el-form-item\",{attrs:{label:\"课程讲师\"}},[n(\"el-select\",{attrs:{placeholder:\"请选择\"},model:{value:e.courseInfo.teacherId,callback:function(t){e.$set(e.courseInfo,\"teacherId\",t)},expression:\"courseInfo.teacherId\"}},e._l(e.teacherList,function(e){return n(\"el-option\",{key:e.id,attrs:{label:e.name,value:e.id}})}))],1),e._v(\" \"),n(\"el-form-item\",{attrs:{label:\"总课时\"}},[n(\"el-input-number\",{attrs:{min:0,\"controls-position\":\"right\",placeholder:\"请填写课程的总课时数\"},model:{value:e.courseInfo.lessonNum,callback:function(t){e.$set(e.courseInfo,\"lessonNum\",t)},expression:\"courseInfo.lessonNum\"}})],1),e._v(\" \"),n(\"el-form-item\",{attrs:{label:\"课程简介\"}},[n(\"tinymce\",{attrs:{height:300},model:{value:e.courseInfo.description,callback:function(t){e.$set(e.courseInfo,\"description\",t)},expression:\"courseInfo.description\"}})],1),e._v(\" \"),n(\"el-form-item\",{attrs:{label:\"课程封面\"}},[n(\"el-upload\",{staticClass:\"avatar-uploader\",attrs:{\"show-file-list\":!1,\"on-success\":e.handleAvatarSuccess,\"before-upload\":e.beforeAvatarUpload,action:e.BASE_API+\"/eduoss/fileoss\"}},[n(\"img\",{staticStyle:{width:\"400px\",height:\"auto\"},attrs:{src:e.courseInfo.cover}})])],1),e._v(\" \"),n(\"el-form-item\",{attrs:{label:\"课程价格\"}},[n(\"el-input-number\",{attrs:{min:0,\"controls-position\":\"right\",placeholder:\"免费课程请设置为0元\"},model:{value:e.courseInfo.price,callback:function(t){e.$set(e.courseInfo,\"price\",t)},expression:\"courseInfo.price\"}}),e._v(\" 元\\n        \")],1),e._v(\" \"),n(\"el-form-item\",[n(\"el-button\",{attrs:{disabled:e.saveBtnDisabled,type:\"primary\"},on:{click:e.saveOrUpadte}},[e._v(\"保存并下一步\")])],1)],1)],1)},[],!1,null,\"956a2d04\",null));_.options.__file=\"info.vue\";t.default=_.exports},\"2qtX\":function(e,t,n){\"use strict\";var i=n(\"nOoK\");n.n(i).a},\"79La\":function(e,t,n){\"use strict\";var i=n(\"U6US\");n.n(i).a},EiMK:function(e,t,n){},GQeE:function(e,t,n){e.exports={default:n(\"iq4v\"),__esModule:!0}},Mqbl:function(e,t,n){var i=n(\"JB68\"),s=n(\"w6GO\");n(\"zn7N\")(\"keys\",function(){return function(e){return s(i(e))}})},Pl4H:function(e,t,n){\"use strict\";var i=n(\"t3Un\");t.a={getSubjectTree:function(e){return Object(i.a)({url:\"/subject/getSubjectTree\",method:\"get\"})}}},\"RU/L\":function(e,t,n){n(\"Rqdy\");var i=n(\"WEpk\").Object;e.exports=function(e,t,n){return i.defineProperty(e,t,n)}},Rqdy:function(e,t,n){var i=n(\"Y7ZC\");i(i.S+i.F*!n(\"jmDH\"),\"Object\",{defineProperty:n(\"2faE\").f})},SEkw:function(e,t,n){e.exports={default:n(\"RU/L\"),__esModule:!0}},U6US:function(e,t,n){},YEIV:function(e,t,n){\"use strict\";t.__esModule=!0;var i=function(e){return e&&e.__esModule?e:{default:e}}(n(\"SEkw\"));t.default=function(e,t,n){return t in e?(0,i.default)(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}},iq4v:function(e,t,n){n(\"Mqbl\"),e.exports=n(\"WEpk\").Object.keys},nOoK:function(e,t,n){},wn0B:function(e,t,n){\"use strict\";var i=n(\"EiMK\");n.n(i).a},xash:function(e,t,n){\"use strict\";var i,s=n(\"YEIV\"),o=n.n(s),r=n(\"t3Un\");t.a=(i={addCourseInfo:function(e){return Object(r.a)({url:\"/course/addCourseInfo\",method:\"post\",data:e})},getListTeacher:function(){return Object(r.a)({url:\"/teacher/selectAllTeacher2\",method:\"get\"})},getCourseInfoId:function(e){return Object(r.a)({url:\"/course/getCourseInfo/\"+e,method:\"get\"})},updateCourseInfo:function(e){return Object(r.a)({url:\"/course/updateCourseInfo\",method:\"post\",data:e})},getCoursePublishInfo:function(e){return Object(r.a)({url:\"/course/getPublishCourseInfo/\"+e,method:\"get\"})},publishCourse:function(e){return Object(r.a)({url:\"/course/publishCourse/\"+e,method:\"put\"})},getCourseList:function(){return Object(r.a)({url:\"/course/getCourseList/\"+courseId,method:\"get\"})}},o()(i,\"getCourseList\",function(e,t,n){return Object(r.a)({url:\"/course/getCourseList/\"+e+\"/\"+t,method:\"post\",data:n})}),o()(i,\"removeDataById\",function(e){return Object(r.a)({url:\"/course/\"+e,method:\"delete\"})}),i)},zn7N:function(e,t,n){var i=n(\"Y7ZC\"),s=n(\"WEpk\"),o=n(\"KUxP\");e.exports=function(e,t){var n=(s.Object||{})[e]||Object[e],r={};r[e]=t(n),i(i.S+i.F*o(function(){n(1)}),\"Object\",r)}}}]);","extractedComments":[]}